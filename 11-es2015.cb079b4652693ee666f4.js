(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{pldV:function(n,t,e){"use strict";e.r(t),e.d(t,"ApproveAnnotationPageModule",(function(){return N}));var o=e("ofXK"),i=e("3Pt+"),a=e("TEn/"),s=e("tyNb"),c=e("mrSG"),r=e("VQbp"),l=e("fXoL"),b=e("nF61"),d=e("CzEO");function p(n,t){if(1&n&&(l.Rb(0,"ion-select-option",23),l.zc(1),l.Qb()),2&n){const n=t.$implicit;l.ic("value",n),l.Ab(1),l.Ac(n)}}function u(n,t){if(1&n&&(l.Rb(0,"ion-select-option",23),l.zc(1),l.Qb()),2&n){const n=t.$implicit;l.ic("value",n),l.Ab(1),l.Ac(n)}}function g(n,t){if(1&n&&(l.Rb(0,"ion-select-option",23),l.zc(1),l.Qb()),2&n){const n=t.$implicit;l.ic("value",n),l.Ab(1),l.Ac(n)}}const h=function(){return{height:"30vh"}};let f=(()=>{class n{constructor(n,t,e){this.modalController=n,this.annotationService=t,this.toastController=e,this.typeOfInteractions=new Array,this.typeOfStudy=new Array,this.significance=new Array,this.approveModel={annotationId:"",approved:"pending",comments:""},this.getAttributes()}ngOnInit(){console.log("Selected:",this.selectedAnnotation)}dismissModal(){this.modalController.dismiss()}getAttributes(){this.annotationService.getAttributes().subscribe(n=>{this.typeOfStudy=n.find(n=>"Type of Study"===n.attr_name).attr_value,this.typeOfInteractions=n.find(n=>"Type of Interactions"===n.attr_name).attr_value,this.significance=n.find(n=>"Significance"===n.attr_name).attr_value})}editAnnotation(n){this.selectedAnnotation.approved=n,this.annotationService.editAnnotation(this.selectedAnnotation).subscribe(()=>Object(c.a)(this,void 0,void 0,(function*(){this.dismissModal(),(yield this.toastController.create({header:`Edit ${this.selectedAnnotation.plant} success!`,color:"success",duration:2e3})).present()})),()=>Object(c.a)(this,void 0,void 0,(function*(){(yield this.toastController.create({header:"Failed to edit "+this.selectedAnnotation.plant,color:"danger",duration:2e3})).present()})))}disapproveAnnotation(){this.approveModel.approved="unapproved",this.annotationService.approveAnnotation(this.approveModel).subscribe(()=>Object(c.a)(this,void 0,void 0,(function*(){(yield this.toastController.create({header:"Disapprove selected data annotation success!",color:"success",duration:2e3})).present(),this.dismissModal()})),()=>Object(c.a)(this,void 0,void 0,(function*(){(yield this.toastController.create({header:"Fail to disapprove selected data annotation!",color:"danger",duration:2e3})).present()})))}approveAnnotation(){this.approveModel.annotationId=this.selectedAnnotation._id,this.approveModel.approved="approved",this.annotationService.approveAnnotation(this.approveModel).subscribe(()=>Object(c.a)(this,void 0,void 0,(function*(){(yield this.toastController.create({header:"Approve selected data annotation success!",color:"success",duration:2e3})).present(),this.dismissModal()})),()=>Object(c.a)(this,void 0,void 0,(function*(){(yield this.toastController.create({header:"Fail to approve selected data annotation!",color:"danger",duration:2e3})).present()})))}}return n.\u0275fac=function(t){return new(t||n)(l.Mb(a.R),l.Mb(b.a),l.Mb(a.Y))},n.\u0275cmp=l.Gb({type:n,selectors:[["app-approve-annotation"]],inputs:{selectedAnnotation:"selectedAnnotation"},decls:66,vars:13,consts:[["color","tertiary"],["slot","end"],["shape","round","fill","clear",3,"click"],["name","close"],["name","basket-outline","slot","start"],["position","floating"],["type","text",3,"ngModel","ngModelChange"],["name","leaf","slot","start"],[3,"ngModel","ngModelChange"],["name","logo-web-component","slot","start"],["name","book","slot","start"],["interface","popover",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","chatbubbles","slot","start"],["name","thumbs-up","slot","start"],["name","chatbubble-ellipses","slot","start"],[3,"styles","ngModel","ngModelChange"],["rows","8",3,"ngModel","ngModelChange"],["lines","none",1,"ion-margin-top"],["slot","end","size","default","color","danger",3,"click"],["name","close-circle","slot","start"],["slot","end","size","default","color","success",3,"click"],["name","save","slot","start"],[3,"value"]],template:function(n,t){1&n&&(l.Rb(0,"ion-header"),l.Rb(1,"ion-toolbar",0),l.Rb(2,"ion-title"),l.zc(3,"Approve Annotation"),l.Qb(),l.Rb(4,"ion-buttons",1),l.Rb(5,"ion-button",2),l.Zb("click",(function(){return t.dismissModal()})),l.Nb(6,"ion-icon",3),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Rb(7,"ion-content"),l.Rb(8,"ion-grid"),l.Rb(9,"ion-row"),l.Rb(10,"ion-col"),l.Rb(11,"ion-item"),l.Nb(12,"ion-icon",4),l.Rb(13,"ion-label",5),l.zc(14,"Product Name"),l.Qb(),l.Rb(15,"ion-input",6),l.Zb("ngModelChange",(function(n){return t.selectedAnnotation.product=n})),l.Qb(),l.Qb(),l.Rb(16,"ion-item"),l.Nb(17,"ion-icon",7),l.Rb(18,"ion-label"),l.zc(19,"Name of Plant"),l.Qb(),l.Qb(),l.Rb(20,"ion-item"),l.Rb(21,"quill-editor",8),l.Zb("ngModelChange",(function(n){return t.selectedAnnotation.plant=n})),l.Qb(),l.Qb(),l.Rb(22,"ion-item"),l.Nb(23,"ion-icon",9),l.Rb(24,"ion-label"),l.zc(25,"Active Components"),l.Qb(),l.Qb(),l.Rb(26,"ion-item"),l.Rb(27,"quill-editor",8),l.Zb("ngModelChange",(function(n){return t.selectedAnnotation.components=n})),l.Qb(),l.Qb(),l.Rb(28,"ion-item"),l.Nb(29,"ion-icon",10),l.Rb(30,"ion-label"),l.zc(31,"Type of Study"),l.Qb(),l.Rb(32,"ion-select",11),l.Zb("ngModelChange",(function(n){return t.selectedAnnotation.study=n})),l.xc(33,p,2,2,"ion-select-option",12),l.Qb(),l.Qb(),l.Rb(34,"ion-item"),l.Nb(35,"ion-icon",13),l.Rb(36,"ion-label"),l.zc(37,"Type of Interactions"),l.Qb(),l.Rb(38,"ion-select",11),l.Zb("ngModelChange",(function(n){return t.selectedAnnotation.interactions=n})),l.xc(39,u,2,2,"ion-select-option",12),l.Qb(),l.Qb(),l.Rb(40,"ion-item"),l.Nb(41,"ion-icon",14),l.Rb(42,"ion-label"),l.zc(43,"Significance"),l.Qb(),l.Rb(44,"ion-select",11),l.Zb("ngModelChange",(function(n){return t.selectedAnnotation.significance=n})),l.xc(45,g,2,2,"ion-select-option",12),l.Qb(),l.Qb(),l.Rb(46,"ion-item"),l.Nb(47,"ion-icon",15),l.Rb(48,"ion-label"),l.zc(49,"Descriptions"),l.Qb(),l.Qb(),l.Rb(50,"ion-item"),l.Rb(51,"quill-editor",16),l.Zb("ngModelChange",(function(n){return t.selectedAnnotation.descriptions=n})),l.Qb(),l.Qb(),l.Rb(52,"ion-item"),l.Nb(53,"ion-icon",15),l.Rb(54,"ion-label",5),l.zc(55,"Write comments here..."),l.Qb(),l.Rb(56,"ion-textarea",17),l.Zb("ngModelChange",(function(n){return t.selectedAnnotation.comments=n})),l.Qb(),l.Qb(),l.Rb(57,"ion-item",18),l.Rb(58,"ion-button",19),l.Zb("click",(function(){return t.editAnnotation("unapproved")})),l.Nb(59,"ion-icon",20),l.Rb(60,"ion-label"),l.zc(61,"Disapprove"),l.Qb(),l.Qb(),l.Rb(62,"ion-button",21),l.Zb("click",(function(){return t.editAnnotation("approved")})),l.Nb(63,"ion-icon",22),l.Rb(64,"ion-label"),l.zc(65,"Approve"),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb()),2&n&&(l.Ab(15),l.ic("ngModel",t.selectedAnnotation.product),l.Ab(6),l.ic("ngModel",t.selectedAnnotation.plant),l.Ab(6),l.ic("ngModel",t.selectedAnnotation.components),l.Ab(5),l.ic("ngModel",t.selectedAnnotation.study),l.Ab(1),l.ic("ngForOf",t.typeOfStudy),l.Ab(5),l.ic("ngModel",t.selectedAnnotation.interactions),l.Ab(1),l.ic("ngForOf",t.typeOfInteractions),l.Ab(5),l.ic("ngModel",t.selectedAnnotation.significance),l.Ab(1),l.ic("ngForOf",t.significance),l.Ab(6),l.ic("styles",l.jc(12,h))("ngModel",t.selectedAnnotation.descriptions),l.Ab(5),l.ic("ngModel",t.selectedAnnotation.comments))},directives:[a.q,a.N,a.M,a.f,a.e,a.r,a.n,a.p,a.C,a.m,a.t,a.u,a.s,a.X,i.e,i.h,d.a,a.E,a.W,o.k,a.L,a.F],styles:[""]}),n})();var m=e("QuQm"),v=e("KJTt"),A=e("2MiI"),R=e("lDzL"),Q=e("LmEr");function M(n,t){if(1&n){const n=l.Sb();l.Rb(0,"ion-item",17),l.Nb(1,"ion-text",18),l.Rb(2,"ion-buttons",19),l.Rb(3,"ion-button",20),l.Zb("click",(function(){l.qc(n);const e=t.$implicit;return l.bc().approveAnnotation(e)})),l.Nb(4,"ion-icon",21),l.Rb(5,"ion-label"),l.zc(6,"Approve/Disapprove"),l.Qb(),l.Qb(),l.Rb(7,"ion-button",22),l.Zb("click",(function(){l.qc(n);const e=t.$implicit;return l.bc().removeAnnotation(e)})),l.Nb(8,"ion-icon",23),l.Qb(),l.Qb(),l.Qb()}if(2&n){const n=t.$implicit;l.Ab(1),l.ic("innerHTML",n.plant,l.rc)}}function y(n,t){if(1&n&&l.Nb(0,"span",18),2&n){const n=l.bc().value;l.ic("innerHTML",n,l.rc)}}function C(n,t){if(1&n){const n=l.Sb();l.Rb(0,"span"),l.Rb(1,"ion-button",28),l.Zb("click",(function(){l.qc(n);const t=l.bc().row;return l.bc(2).openInfo(t)})),l.Nb(2,"ion-icon",29),l.Qb(),l.Qb()}}function w(n,t){if(1&n&&(l.xc(0,y,1,1,"span",26),l.xc(1,C,3,0,"span",27)),2&n){const n=l.bc().$implicit;l.ic("ngIf","More Info"!==n.name),l.Ab(1),l.ic("ngIf","More Info"===n.name)}}function O(n,t){1&n&&(l.Rb(0,"ngx-datatable-column",24),l.xc(1,w,2,2,"ng-template",25),l.Qb()),2&n&&l.ic("name",t.$implicit.name)("width",200)}const S=[{path:"",component:(()=>{class n{constructor(n,t,e,o,i){this.pagePositionService=n,this.annotationService=t,this.modalController=e,this.alertController=o,this.toastController=i,this.pageAtTop=!0,this.page=new m.a,this.rows=new Array,this.selected=[],this.columns=[{name:"Product"},{name:"Plant"},{name:"Components"},{name:"Study"},{name:"Interactions"},{name:"Significance"},{name:"Descriptions"},{name:"More Info"}],this.page.limit=5}ngOnInit(){this.innerWidth=window.innerWidth,this.setPage({offset:0}),this.selected=[]}onResize(n){this.innerWidth=window.innerWidth}onScroll(n){this.pageAtTop=this.pagePositionService.isPageAtTop(n)}setPage(n){this.page.offset=n.offset,this.page.approved="pending",this.annotationService.getAnnotationList(this.page).subscribe(n=>{this.page.offset=n.offset,this.page.totalAnnotations=n.total,this.page.totalPage=n.pages,this.rows=n.result.map(n=>({_id:n._id,product:n.product,plant:n.plant,components:n.components,study:n.study,interactions:n.interactions,significance:n.significance,comments:n.comments,descriptions:n.descriptions,approved:n.approved,articleId:n.articles}))})}onSort(n){this.page.orderBy=n.column.name.toLowerCase(),this.page.isAscending="asc"===n.newValue,this.page.approved="pending",this.annotationService.getAnnotationList(this.page).subscribe(n=>{this.page.offset=n.offset,this.page.totalAnnotations=n.total,this.page.totalPage=n.pages,this.rows=n.articles.map(n=>({_id:n._id,product:n.product,plant:n.plant,components:n.components,study:n.study,interactions:n.interactions,significance:n.significance,comments:n.comments,descriptions:n.descriptions,approved:n.approved,articleId:n.articles}))})}onSelect({}){}openInfo(n){return Object(c.a)(this,void 0,void 0,(function*(){const t=yield this.modalController.create({cssClass:"custom-lg-modal",component:r.a,componentProps:{annotation:n}});return yield t.present()}))}approveAnnotation(n){return Object(c.a)(this,void 0,void 0,(function*(){const t=yield this.modalController.create({cssClass:"custom-lg-modal",component:f,componentProps:{selectedAnnotation:n}});yield t.present(),yield t.onWillDismiss().then(()=>{this.ngOnInit()})}))}removeAnnotation(n){return Object(c.a)(this,void 0,void 0,(function*(){const t=yield this.alertController.create({cssClass:"my-custom-class",header:"Deleting",subHeader:""+n.plant,message:"Are you sure you want to delete this annotationn? This action cannot be undone.",buttons:[{text:"Cancel",role:"cancel"},{text:"Delete",handler:()=>{this.annotationService.deleteAnnotation(n).subscribe(()=>Object(c.a)(this,void 0,void 0,(function*(){(yield this.toastController.create({header:"Delete selected data annotation success!",color:"success",duration:2e3})).present(),this.ngOnInit()})),()=>Object(c.a)(this,void 0,void 0,(function*(){(yield this.toastController.create({header:"Error deleting selected annotation!",color:"danger",duration:2e3})).present(),this.ngOnInit()})))}}]});yield t.present()}))}}return n.\u0275fac=function(t){return new(t||n)(l.Mb(v.a),l.Mb(b.a),l.Mb(a.R),l.Mb(a.a),l.Mb(a.Y))},n.\u0275cmp=l.Gb({type:n,selectors:[["app-approve-annotation"]],hostBindings:function(n,t){1&n&&l.Zb("resize",(function(n){return t.onResize(n)}),!1,l.pc)},decls:27,vars:18,consts:[[3,"pageAtTop"],[3,"fullscreen","scrollEvents","ionScroll"],["id","container"],["id","navi"],[1,"circle-1"],["id","infoi"],[1,"ion-no-padding","page-height"],["size","1"],["size","10","size-lg","6"],[1,"home-title"],[1,"home-subtitle"],["size","0","size-md","1"],["size","12","size-md","10"],["lines","none","color","light",4,"ngFor","ngForOf"],["rowHeight","auto",1,"material",2,"margin-bottom","20vh",3,"rows","columnMode","headerHeight","footerHeight","externalPaging","count","offset","limit","scrollbarH","selected","selectionType","externalSorting","page","select","sort"],[3,"name","width",4,"ngFor","ngForOf"],[3,"innerWidth"],["lines","none","color","light"],[3,"innerHTML"],["slot","end"],["color","primary","fill","solid",3,"click"],["name","checkmark-circle","slot","start"],["color","danger","fill","solid",3,"click"],["name","trash-outline"],[3,"name","width"],["ngx-datatable-cell-template",""],[3,"innerHTML",4,"ngIf"],[4,"ngIf"],["shape","round","fill","clear",3,"click"],["name","information-circle","color","tertiary"]],template:function(n,t){1&n&&(l.Rb(0,"ion-header"),l.Nb(1,"app-header",0),l.Qb(),l.Rb(2,"ion-content",1),l.Zb("ionScroll",(function(n){return t.onScroll(n)})),l.Rb(3,"div",2),l.Rb(4,"div",3),l.Nb(5,"span",4),l.Qb(),l.Rb(6,"div",5),l.Rb(7,"ion-grid",6),l.Rb(8,"ion-row"),l.Nb(9,"ion-col",7),l.Rb(10,"ion-col",8),l.Rb(11,"h1",9),l.zc(12,"Data Annotations for Approval"),l.Qb(),l.Rb(13,"p",10),l.zc(14,"Approve or disapprove the data annotations."),l.Qb(),l.Qb(),l.Qb(),l.Rb(15,"ion-row"),l.Nb(16,"ion-col",11),l.Rb(17,"ion-col",12),l.xc(18,M,9,1,"ion-item",13),l.Qb(),l.Nb(19,"ion-col",11),l.Qb(),l.Rb(20,"ion-row"),l.Nb(21,"ion-col",11),l.Rb(22,"ion-col",12),l.Rb(23,"ngx-datatable",14),l.Zb("page",(function(n){return t.setPage(n)}))("select",(function(n){return t.onSelect(n)}))("sort",(function(n){return t.onSort(n)})),l.xc(24,O,2,2,"ngx-datatable-column",15),l.Qb(),l.Qb(),l.Nb(25,"ion-col",11),l.Qb(),l.Qb(),l.Nb(26,"app-footer",16),l.Qb(),l.Qb(),l.Qb()),2&n&&(l.Ab(1),l.ic("pageAtTop",t.pageAtTop),l.Ab(1),l.ic("fullscreen",!0)("scrollEvents",!0),l.Ab(16),l.ic("ngForOf",t.selected),l.Ab(5),l.ic("rows",t.rows)("columnMode","force")("headerHeight",50)("footerHeight",50)("externalPaging",!0)("count",t.page.totalAnnotations)("offset",t.page.offset)("limit",t.page.limit)("scrollbarH",!0)("selected",t.selected)("selectionType","single")("externalSorting",!0),l.Ab(1),l.ic("ngForOf",t.columns),l.Ab(2),l.ic("innerWidth",t.innerWidth))},directives:[a.q,A.a,a.n,a.p,a.C,a.m,o.k,R.c,Q.a,a.t,a.K,a.f,a.e,a.r,a.u,R.b,R.a,o.l],styles:[".circle-1[_ngcontent-%COMP%]{right:-434px;top:-554px;height:868px;width:868px}.circle-1[_ngcontent-%COMP%], .circle-2[_ngcontent-%COMP%]{position:absolute;background-color:#bbb;border-radius:50%;display:inline-block;background:#6078ea;background:linear-gradient(201deg,#6078ea,#17ead9)}.circle-2[_ngcontent-%COMP%]{left:-200px;top:1200px;height:500px;width:500px}#container[_ngcontent-%COMP%]{position:relative}#infoi[_ngcontent-%COMP%], #navi[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;top:0;left:0}#infoi[_ngcontent-%COMP%]{z-index:1}.page-height[_ngcontent-%COMP%]{min-height:100vh}"]}),n})()}];let z=(()=>{class n{}return n.\u0275mod=l.Kb({type:n}),n.\u0275inj=l.Jb({factory:function(t){return new(t||n)},imports:[[s.i.forChild(S)],s.i]}),n})();var x=e("iWjc");let N=(()=>{class n{}return n.\u0275mod=l.Kb({type:n}),n.\u0275inj=l.Jb({factory:function(t){return new(t||n)},imports:[[o.c,i.a,a.O,z,R.d,x.a]]}),n})()}}]);