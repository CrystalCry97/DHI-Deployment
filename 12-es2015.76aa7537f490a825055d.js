(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"/zMi":function(e,t,o){"use strict";o.d(t,"a",(function(){return r}));var n=o("AytR"),i=o("fXoL"),s=o("tk/3");let r=(()=>{class e{constructor(e){this.http=e,this.href=n.a.api_endpoint+"/user"}getUserList(e){return this.http.get(`${this.href}/get?orderBy=${e.orderBy}&isAscending=${e.isAscending}&limit=${e.limit}&offset=${e.offset}&name=${e.name}&email=${e.email}`)}editUser(e){return this.http.post(this.href+"/patch",e)}changePassword(e){return this.http.post(this.href+"/updatePassword",{password:e})}createUser(e){return this.http.post(this.href+"/create",e)}deleteUser(e){return this.http.post(this.href+"/remove",{id:e._id,confirm:!0})}}return e.\u0275fac=function(t){return new(t||e)(i.Ub(s.b))},e.\u0275prov=i.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},"2MiI":function(e,t,o){"use strict";o.d(t,"a",(function(){return f}));var n=o("mrSG"),i=o("fXoL"),s=o("TEn/"),r=o("Yhfc"),a=o("/zMi"),l=o("lGQG"),c=o("3Pt+");let b=(()=>{class e{constructor(e,t,o,n,i){this.modalController=e,this.toastController=t,this.tokenHelper=o,this.userManagementService=n,this.authService=i,this.updateProfileModel={name:"",email:""}}ngOnInit(){this.updateProfileModel.email=this.tokenHelper.getEmail(),this.updateProfileModel.name=this.tokenHelper.getName()}dismissModal(){this.modalController.dismiss()}updateProfile(){this.userManagementService.editUser(this.updateProfileModel).subscribe(()=>Object(n.a)(this,void 0,void 0,(function*(){const e={refreshToken:this.tokenHelper.getRefreshToken()};this.authService.refresh(e).subscribe(e=>{this.tokenHelper.setAccessToken(e.newToken)}),(yield this.toastController.create({header:"Update user profile successfully",message:this.updateProfileModel.name+"'s profile has been updated.",color:"success",duration:2e3})).present()})),()=>Object(n.a)(this,void 0,void 0,(function*(){(yield this.toastController.create({header:"Fail to update user profile",message:`Fail to update ${this.updateProfileModel.name}'s profile.`,color:"danger",duration:2e3})).present()})))}}return e.\u0275fac=function(t){return new(t||e)(i.Lb(s.P),i.Lb(s.U),i.Lb(r.a),i.Lb(a.a),i.Lb(l.a))},e.\u0275cmp=i.Fb({type:e,selectors:[["app-my-profile"]],decls:24,vars:2,consts:[["color","tertiary"],["slot","end"],["shape","round","fill","clear",3,"click"],["name","close"],["name","person","slot","start"],["position","floating"],["type","text",3,"ngModel","ngModelChange"],["name","mail","slot","start"],[3,"ngModel","ngModelChange"],["lines","none"],["slot","end",3,"click"]],template:function(e,t){1&e&&(i.Qb(0,"ion-header"),i.Qb(1,"ion-toolbar",0),i.Qb(2,"ion-title"),i.xc(3,"My Profile"),i.Pb(),i.Qb(4,"ion-buttons",1),i.Qb(5,"ion-button",2),i.Yb("click",(function(){return t.dismissModal()})),i.Mb(6,"ion-icon",3),i.Pb(),i.Pb(),i.Pb(),i.Pb(),i.Qb(7,"ion-content"),i.Qb(8,"ion-grid"),i.Qb(9,"ion-row"),i.Qb(10,"ion-col"),i.Qb(11,"ion-item"),i.Mb(12,"ion-icon",4),i.Qb(13,"ion-label",5),i.xc(14,"Name"),i.Pb(),i.Qb(15,"ion-input",6),i.Yb("ngModelChange",(function(e){return t.updateProfileModel.name=e})),i.Pb(),i.Pb(),i.Qb(16,"ion-item"),i.Mb(17,"ion-icon",7),i.Qb(18,"ion-label",5),i.xc(19,"Email"),i.Pb(),i.Qb(20,"ion-input",8),i.Yb("ngModelChange",(function(e){return t.updateProfileModel.email=e})),i.Pb(),i.Pb(),i.Qb(21,"ion-item",9),i.Qb(22,"ion-button",10),i.Yb("click",(function(){return t.updateProfile()})),i.xc(23,"Save"),i.Pb(),i.Pb(),i.Pb(),i.Pb(),i.Pb(),i.Pb()),2&e&&(i.zb(15),i.gc("ngModel",t.updateProfileModel.name),i.zb(5),i.gc("ngModel",t.updateProfileModel.email))},directives:[s.o,s.L,s.K,s.f,s.e,s.p,s.m,s.n,s.z,s.l,s.r,s.s,s.q,s.T,c.d,c.g],styles:[""]}),e})(),u=(()=>{class e{constructor(e,t,o){this.modalController=e,this.userManagementService=t,this.toastController=o,this.password="",this.confirmPassword=""}ngOnInit(){}dismissModal(){this.modalController.dismiss()}changePassword(){this.userManagementService.changePassword(this.confirmPassword).subscribe(()=>Object(n.a)(this,void 0,void 0,(function*(){this.dismissModal(),(yield this.toastController.create({header:"Change password successfully",message:"Your password has been changed.",color:"success",duration:2e3})).present()})),()=>Object(n.a)(this,void 0,void 0,(function*(){(yield this.toastController.create({header:"Fail to change password",message:"Please try again or re-login your account.",color:"danger",duration:2e3})).present()})))}}return e.\u0275fac=function(t){return new(t||e)(i.Lb(s.P),i.Lb(a.a),i.Lb(s.U))},e.\u0275cmp=i.Fb({type:e,selectors:[["app-change-password"]],decls:24,vars:3,consts:[["color","tertiary"],["slot","end"],["shape","round","fill","clear",3,"click"],["name","close"],["name","lock-closed","slot","start"],["position","floating"],["type","password",3,"ngModel","ngModelChange"],["lines","none"],["slot","end",3,"disabled","click"]],template:function(e,t){1&e&&(i.Qb(0,"ion-header"),i.Qb(1,"ion-toolbar",0),i.Qb(2,"ion-title"),i.xc(3,"Change Password"),i.Pb(),i.Qb(4,"ion-buttons",1),i.Qb(5,"ion-button",2),i.Yb("click",(function(){return t.dismissModal()})),i.Mb(6,"ion-icon",3),i.Pb(),i.Pb(),i.Pb(),i.Pb(),i.Qb(7,"ion-content"),i.Qb(8,"ion-grid"),i.Qb(9,"ion-row"),i.Qb(10,"ion-col"),i.Qb(11,"ion-item"),i.Mb(12,"ion-icon",4),i.Qb(13,"ion-label",5),i.xc(14,"Password"),i.Pb(),i.Qb(15,"ion-input",6),i.Yb("ngModelChange",(function(e){return t.password=e})),i.Pb(),i.Pb(),i.Qb(16,"ion-item"),i.Mb(17,"ion-icon",4),i.Qb(18,"ion-label",5),i.xc(19,"Confirm Password"),i.Pb(),i.Qb(20,"ion-input",6),i.Yb("ngModelChange",(function(e){return t.confirmPassword=e})),i.Pb(),i.Pb(),i.Qb(21,"ion-item",7),i.Qb(22,"ion-button",8),i.Yb("click",(function(){return t.changePassword()})),i.xc(23,"Change password"),i.Pb(),i.Pb(),i.Pb(),i.Pb(),i.Pb(),i.Pb()),2&e&&(i.zb(15),i.gc("ngModel",t.password),i.zb(5),i.gc("ngModel",t.confirmPassword),i.zb(2),i.gc("disabled",t.password!==t.confirmPassword||""===t.password))},directives:[s.o,s.L,s.K,s.f,s.e,s.p,s.m,s.n,s.z,s.l,s.r,s.s,s.q,s.T,c.d,c.g],styles:[""]}),e})();var d=o("tyNb");let h=(()=>{class e{constructor(e,t,o){this.modalController=e,this.authService=t,this.router=o}ngOnInit(){}dismissModal(){this.modalController.dismiss()}myProfile(){return Object(n.a)(this,void 0,void 0,(function*(){const e=yield this.modalController.create({component:b});return yield e.present()}))}changePassword(){return Object(n.a)(this,void 0,void 0,(function*(){const e=yield this.modalController.create({component:u});return yield e.present()}))}logout(){this.authService.logout().subscribe(()=>{this.dismissModal(),this.router.navigate(["/home"])})}}return e.\u0275fac=function(t){return new(t||e)(i.Lb(s.P),i.Lb(l.a),i.Lb(d.g))},e.\u0275cmp=i.Fb({type:e,selectors:[["app-settings"]],decls:21,vars:0,consts:[["color","tertiary"],["slot","end"],["shape","round","fill","clear",3,"click"],["name","close"],["button","",3,"click"],["slot","start","ios","person-circle-outline","md","person-circle-sharp"],["slot","start","ios","lock-closed-outline","md","lock-closed-sharp"],["button","","lines","none","detail","false",3,"click"],["slot","start","ios","log-out-outline","md","log-out-sharp"]],template:function(e,t){1&e&&(i.Qb(0,"ion-header"),i.Qb(1,"ion-toolbar",0),i.Qb(2,"ion-title"),i.xc(3,"Settings"),i.Pb(),i.Qb(4,"ion-buttons",1),i.Qb(5,"ion-button",2),i.Yb("click",(function(){return t.dismissModal()})),i.Mb(6,"ion-icon",3),i.Pb(),i.Pb(),i.Pb(),i.Pb(),i.Qb(7,"ion-content"),i.Qb(8,"ion-list"),i.Qb(9,"ion-item",4),i.Yb("click",(function(){return t.myProfile()})),i.Mb(10,"ion-icon",5),i.Qb(11,"ion-label"),i.xc(12,"My Profile"),i.Pb(),i.Pb(),i.Qb(13,"ion-item",4),i.Yb("click",(function(){return t.changePassword()})),i.Mb(14,"ion-icon",6),i.Qb(15,"ion-label"),i.xc(16,"Change Password"),i.Pb(),i.Pb(),i.Qb(17,"ion-item",7),i.Yb("click",(function(){return t.logout()})),i.Mb(18,"ion-icon",8),i.Qb(19,"ion-label"),i.xc(20,"Log Out"),i.Pb(),i.Pb(),i.Pb(),i.Pb())},directives:[s.o,s.L,s.K,s.f,s.e,s.p,s.m,s.t,s.r,s.s],styles:[""]}),e})();var g=o("ofXK");function m(e,t){if(1&e){const e=i.Rb();i.Qb(0,"ion-button",4),i.Yb("click",(function(){return i.oc(e),i.ac().login()})),i.xc(1,"Log in"),i.Pb()}}function p(e,t){if(1&e){const e=i.Rb();i.Qb(0,"ion-button",5),i.Yb("click",(function(){return i.oc(e),i.ac().openSettings()})),i.xc(1),i.Mb(2,"ion-icon",6),i.Pb()}if(2&e){const e=i.ac();i.gc("color",e.pageAtTop?"dark":"light"),i.zb(1),i.zc("Hello ",e.userName()," ")}}let f=(()=>{class e{constructor(e,t,o){this.router=e,this.tokenHelper=t,this.modalController=o}ngOnInit(){}login(){this.router.navigate(["/login"])}isLogin(){return this.tokenHelper.isTokensExist()}userName(){return this.tokenHelper.getName()}openSettings(){return Object(n.a)(this,void 0,void 0,(function*(){const e=yield this.modalController.create({component:h});return yield e.present()}))}}return e.\u0275fac=function(t){return new(t||e)(i.Lb(d.g),i.Lb(r.a),i.Lb(s.P))},e.\u0275cmp=i.Fb({type:e,selectors:[["app-header"]],inputs:{pageAtTop:"pageAtTop"},decls:5,vars:3,consts:[[3,"color"],["slot","start"],["slot","end","fill","outline","shape","round","color","light","class","header-btn",3,"click",4,"ngIf"],["slot","end","fill","outline","shape","round","class","header-btn",3,"color","click",4,"ngIf"],["slot","end","fill","outline","shape","round","color","light",1,"header-btn",3,"click"],["slot","end","fill","outline","shape","round",1,"header-btn",3,"color","click"],["name","chevron-down"]],template:function(e,t){1&e&&(i.Qb(0,"ion-toolbar",0),i.Qb(1,"ion-buttons",1),i.Mb(2,"ion-menu-button"),i.Pb(),i.vc(3,m,2,0,"ion-button",2),i.vc(4,p,3,2,"ion-button",3),i.Pb()),2&e&&(i.gc("color",t.pageAtTop?"":"dark"),i.zb(3),i.gc("ngIf",!t.isLogin()),i.zb(1),i.gc("ngIf",t.isLogin()))},directives:[s.L,s.f,s.w,g.k,s.e,s.p],styles:[".header-btn[_ngcontent-%COMP%]{margin:10px 50px}"]}),e})()},KJTt:function(e,t,o){"use strict";o.d(t,"a",(function(){return i}));var n=o("fXoL");let i=(()=>{class e{constructor(){}isPageAtTop(e){return e.detail.currentY<70}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=n.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},LmEr:function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));var n=o("fXoL"),i=o("TEn/"),s=o("ofXK");function r(e,t){1&e&&(n.Qb(0,"ion-buttons",3),n.Qb(1,"ion-button"),n.Qb(2,"small"),n.xc(3,"Home"),n.Pb(),n.Pb(),n.Qb(4,"ion-button"),n.Qb(5,"small"),n.xc(6,"About"),n.Pb(),n.Pb(),n.Qb(7,"ion-button"),n.Qb(8,"small"),n.xc(9,"About"),n.Pb(),n.Pb(),n.Qb(10,"ion-button"),n.Qb(11,"small"),n.xc(12,"Our Team"),n.Pb(),n.Pb(),n.Qb(13,"ion-button"),n.Qb(14,"small"),n.xc(15,"Contact Us"),n.Pb(),n.Pb(),n.Pb())}let a=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Fb({type:e,selectors:[["app-footer"]],inputs:{innerWidth:"innerWidth"},decls:5,vars:1,consts:[["color","dark",1,"footer-toolbar"],["slot","start"],["slot","end",4,"ngIf"],["slot","end"]],template:function(e,t){1&e&&(n.Qb(0,"ion-toolbar",0),n.Qb(1,"ion-text",1),n.Qb(2,"small"),n.xc(3,"Copyright \xa92020 All Rights Reserved | Universiti Sains Malaysia"),n.Pb(),n.Pb(),n.vc(4,r,16,0,"ion-buttons",2),n.Pb()),2&e&&(n.zb(4),n.gc("ngIf",t.innerWidth>=1200))},directives:[i.L,i.I,s.k,i.f,i.e],styles:[".footer-toolbar[_ngcontent-%COMP%]{padding:0 20px}"]}),e})()},gMET:function(e,t,o){"use strict";o.r(t),o.d(t,"UserManagementPageModule",(function(){return k}));var n=o("ofXK"),i=o("3Pt+"),s=o("TEn/"),r=o("tyNb"),a=o("mrSG");class l{constructor(){this.limit=0,this.totalUser=0,this.totalPage=0,this.offset=0,this.searchBy="name",this.orderBy="name",this.isAscending=!0,this.name="",this.email=""}}var c=o("fXoL"),b=o("/zMi");let u=(()=>{class e{constructor(e,t,o){this.modalController=e,this.userManagementService=t,this.toastController=o}ngOnInit(){}dismissModal(){this.modalController.dismiss()}editAcc(){this.userManagementService.editUser(this.user).subscribe(()=>Object(a.a)(this,void 0,void 0,(function*(){this.dismissModal(),(yield this.toastController.create({header:`Edit ${this.user.name}'s account success!`,color:"success",duration:2e3})).present()})),()=>Object(a.a)(this,void 0,void 0,(function*(){(yield this.toastController.create({header:`Fail to edit ${this.user.name}'s account!`,color:"danger",duration:2e3})).present()})))}}return e.\u0275fac=function(t){return new(t||e)(c.Lb(s.P),c.Lb(b.a),c.Lb(s.U))},e.\u0275cmp=c.Fb({type:e,selectors:[["app-edit-user"]],inputs:{user:"user"},decls:35,vars:4,consts:[["color","tertiary"],["slot","end"],["shape","round","fill","clear",3,"click"],["name","close"],["name","person","slot","start"],["position","floating"],["type","text",3,"ngModel","ngModelChange"],["name","mail","slot","start"],[3,"ngModel","ngModelChange"],["name","ribbon","slot","start"],["interface","popover",3,"ngModel","ngModelChange"],["value","data manager"],["value","senior data manager"],["lines","none",1,"ion-margin-top"],["slot","end","size","default",3,"click"],["name","save","slot","start"]],template:function(e,t){1&e&&(c.Qb(0,"ion-header"),c.Qb(1,"ion-toolbar",0),c.Qb(2,"ion-title"),c.xc(3),c.Pb(),c.Qb(4,"ion-buttons",1),c.Qb(5,"ion-button",2),c.Yb("click",(function(){return t.dismissModal()})),c.Mb(6,"ion-icon",3),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(7,"ion-content"),c.Qb(8,"ion-grid"),c.Qb(9,"ion-row"),c.Qb(10,"ion-col"),c.Qb(11,"ion-item"),c.Mb(12,"ion-icon",4),c.Qb(13,"ion-label",5),c.xc(14,"Name"),c.Pb(),c.Qb(15,"ion-input",6),c.Yb("ngModelChange",(function(e){return t.user.name=e})),c.Pb(),c.Pb(),c.Qb(16,"ion-item"),c.Mb(17,"ion-icon",7),c.Qb(18,"ion-label",5),c.xc(19,"Email"),c.Pb(),c.Qb(20,"ion-input",8),c.Yb("ngModelChange",(function(e){return t.user.email=e})),c.Pb(),c.Pb(),c.Qb(21,"ion-item"),c.Mb(22,"ion-icon",9),c.Qb(23,"ion-label"),c.xc(24,"Role (NOT WORKING)"),c.Pb(),c.Qb(25,"ion-select",10),c.Yb("ngModelChange",(function(e){return t.user.role=e})),c.Qb(26,"ion-select-option",11),c.xc(27,"Data Manager"),c.Pb(),c.Qb(28,"ion-select-option",12),c.xc(29,"Senior Data Manager"),c.Pb(),c.Pb(),c.Pb(),c.Qb(30,"ion-item",13),c.Qb(31,"ion-button",14),c.Yb("click",(function(){return t.editAcc()})),c.Mb(32,"ion-icon",15),c.Qb(33,"ion-label"),c.xc(34,"Save"),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb()),2&e&&(c.zb(3),c.zc("Edit ",t.user.name,"'s account"),c.zb(12),c.gc("ngModel",t.user.name),c.zb(5),c.gc("ngModel",t.user.email),c.zb(5),c.gc("ngModel",t.user.role))},directives:[s.o,s.L,s.K,s.f,s.e,s.p,s.m,s.n,s.z,s.l,s.r,s.s,s.q,s.T,i.d,i.g,s.D,s.S,s.E],styles:[""]}),e})(),d=(()=>{class e{constructor(e,t,o){this.modalController=e,this.userManagementService=t,this.toastController=o,this.user={_id:"",name:"",email:"",role:""}}ngOnInit(){}dismissModal(){this.modalController.dismiss()}createAcc(){this.userManagementService.createUser(this.user).subscribe(()=>Object(a.a)(this,void 0,void 0,(function*(){this.dismissModal(),(yield this.toastController.create({header:`Create ${this.user.name}'s account success!`,color:"success",duration:2e3})).present()})),()=>Object(a.a)(this,void 0,void 0,(function*(){(yield this.toastController.create({header:`Fail to create ${this.user.name}'s account!`,color:"danger",duration:2e3})).present()})))}}return e.\u0275fac=function(t){return new(t||e)(c.Lb(s.P),c.Lb(b.a),c.Lb(s.U))},e.\u0275cmp=c.Fb({type:e,selectors:[["app-create-user"]],decls:37,vars:3,consts:[["color","tertiary"],["slot","end"],["shape","round","fill","clear",3,"click"],["name","close"],["name","person","slot","start"],["position","floating"],["type","text",3,"ngModel","ngModelChange"],["name","mail","slot","start"],[3,"ngModel","ngModelChange"],["name","ribbon","slot","start"],["interface","popover",3,"ngModel","ngModelChange"],["value","admin"],["value","data manager"],["value","senior data manager"],["lines","none",1,"ion-margin-top"],["slot","end","size","default",3,"click"],["name","save","slot","start"]],template:function(e,t){1&e&&(c.Qb(0,"ion-header"),c.Qb(1,"ion-toolbar",0),c.Qb(2,"ion-title"),c.xc(3,"Create new account"),c.Pb(),c.Qb(4,"ion-buttons",1),c.Qb(5,"ion-button",2),c.Yb("click",(function(){return t.dismissModal()})),c.Mb(6,"ion-icon",3),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(7,"ion-content"),c.Qb(8,"ion-grid"),c.Qb(9,"ion-row"),c.Qb(10,"ion-col"),c.Qb(11,"ion-item"),c.Mb(12,"ion-icon",4),c.Qb(13,"ion-label",5),c.xc(14,"Name"),c.Pb(),c.Qb(15,"ion-input",6),c.Yb("ngModelChange",(function(e){return t.user.name=e})),c.Pb(),c.Pb(),c.Qb(16,"ion-item"),c.Mb(17,"ion-icon",7),c.Qb(18,"ion-label",5),c.xc(19,"Email"),c.Pb(),c.Qb(20,"ion-input",8),c.Yb("ngModelChange",(function(e){return t.user.email=e})),c.Pb(),c.Pb(),c.Qb(21,"ion-item"),c.Mb(22,"ion-icon",9),c.Qb(23,"ion-label"),c.xc(24,"Role"),c.Pb(),c.Qb(25,"ion-select",10),c.Yb("ngModelChange",(function(e){return t.user.role=e})),c.Qb(26,"ion-select-option",11),c.xc(27,"Admin"),c.Pb(),c.Qb(28,"ion-select-option",12),c.xc(29,"Data Manager"),c.Pb(),c.Qb(30,"ion-select-option",13),c.xc(31,"Senior Data Manager"),c.Pb(),c.Pb(),c.Pb(),c.Qb(32,"ion-item",14),c.Qb(33,"ion-button",15),c.Yb("click",(function(){return t.createAcc()})),c.Mb(34,"ion-icon",16),c.Qb(35,"ion-label"),c.xc(36,"Create"),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb()),2&e&&(c.zb(15),c.gc("ngModel",t.user.name),c.zb(5),c.gc("ngModel",t.user.email),c.zb(5),c.gc("ngModel",t.user.role))},directives:[s.o,s.L,s.K,s.f,s.e,s.p,s.m,s.n,s.z,s.l,s.r,s.s,s.q,s.T,i.d,i.g,s.D,s.S,s.E],styles:[""]}),e})();var h=o("KJTt"),g=o("2MiI"),m=o("lDzL"),p=o("LmEr");function f(e,t){if(1&e){const e=c.Rb();c.Qb(0,"ion-item",17),c.Qb(1,"ion-text"),c.xc(2),c.Pb(),c.Qb(3,"ion-buttons",5),c.Qb(4,"ion-button",18),c.Yb("click",(function(){c.oc(e);const o=t.$implicit;return c.ac().deleteUser(o)})),c.Mb(5,"ion-icon",19),c.Qb(6,"ion-label"),c.xc(7,"Delete"),c.Pb(),c.Pb(),c.Pb(),c.Pb()}if(2&e){const e=t.$implicit;c.zb(2),c.yc(e.name)}}const P=function(){return{name:"Name"}},Q=function(){return{name:"Email"}},M=function(){return{name:"Role",sortable:!1}},v=function(e,t,o){return[e,t,o]},y=[{path:"",component:(()=>{class e{constructor(e,t,o,n,i){this.pagePositionService=e,this.userManagementService=t,this.modalController=o,this.alertController=n,this.toastController=i,this.pageAtTop=!0,this.page=new l,this.rows=new Array,this.selected=[],this.page.limit=5}ngOnInit(){this.innerWidth=window.innerWidth,this.setPage({offset:0})}onResize(e){this.innerWidth=window.innerWidth}onScroll(e){this.pageAtTop=this.pagePositionService.isPageAtTop(e)}setPage(e){this.page.offset=e.offset,this.userManagementService.getUserList(this.page).subscribe(e=>{this.page.offset=e.offset,this.page.totalUser=e.totalUser,this.page.totalPage=e.totalPage,this.rows=e.user.map(e=>({_id:e._id,name:e.name,email:e.email,role:e.roles.length>0?e.roles[0].role:"-"}))})}search(e){this.page.offset=0,"name"===this.page.searchBy?(this.page.name=e.target.value,this.page.email=""):"email"===this.page.searchBy&&(this.page.name="",this.page.email=e.target.value),this.userManagementService.getUserList(this.page).subscribe(e=>{this.page.offset=e.offset,this.page.totalUser=e.totalUser,this.page.totalPage=e.totalPage,this.rows=e.user.map(e=>({_id:e._id,name:e.name,email:e.email,role:e.roles.length>0?e.roles[0].role:"-"}))})}onSort(e){this.page.orderBy=e.column.name.toLowerCase(),this.page.isAscending="asc"===e.newValue,this.userManagementService.getUserList(this.page).subscribe(e=>{this.page.offset=e.offset,this.page.totalUser=e.totalUser,this.page.totalPage=e.totalPage,this.rows=e.user.map(e=>({_id:e._id,name:e.name,email:e.email,role:e.roles.length>0?e.roles[0].role:"-"}))})}onSelect({selected:e}){console.log("Select Event",e,this.selected)}openCreateUserModal(){return Object(a.a)(this,void 0,void 0,(function*(){const e=yield this.modalController.create({component:d});return yield e.present()}))}openEditUserModal(e){return Object(a.a)(this,void 0,void 0,(function*(){const t=yield this.modalController.create({component:u,componentProps:{user:e}});return yield t.present()}))}deleteUser(e){return Object(a.a)(this,void 0,void 0,(function*(){const t=yield this.alertController.create({cssClass:"my-custom-class",header:`Permenantly delete ${e.name}'s account`,message:"Are you sure you want to delete this account? This action cannot be undone.",buttons:[{text:"Cancel",role:"cancel"},{text:"Delete",handler:()=>{this.userManagementService.deleteUser(e).subscribe(()=>Object(a.a)(this,void 0,void 0,(function*(){(yield this.toastController.create({header:`Edit ${e.name}'s account success!`,color:"success",duration:2e3})).present()})),()=>Object(a.a)(this,void 0,void 0,(function*(){(yield this.toastController.create({header:`Fail to edit ${e.name}'s account!`,color:"danger",duration:2e3})).present()})))}}]});yield t.present()}))}}return e.\u0275fac=function(t){return new(t||e)(c.Lb(h.a),c.Lb(b.a),c.Lb(s.P),c.Lb(s.a),c.Lb(s.U))},e.\u0275cmp=c.Fb({type:e,selectors:[["app-user-management"]],hostBindings:function(e,t){1&e&&c.Yb("resize",(function(e){return t.onResize(e)}),!1,c.nc)},decls:39,vars:26,consts:[[3,"pageAtTop"],[3,"fullscreen","scrollEvents","ionScroll"],["size","0","size-md","1"],["size","12","size-md","10"],["lines","none"],["slot","end"],["color","primary","fill","solid",3,"click"],["name","person-add","slot","start"],["size","12","size-md","6"],["showCancelButton","focus","animated","","placeholder","Enter your search",3,"keyup.enter"],["size","12","size-md","4"],["interface","popover",3,"ngModel","ngModelChange"],["value","name"],["value","email"],["lines","none","color","light",4,"ngFor","ngForOf"],["rowHeight","auto",1,"material",2,"margin-bottom","70vh",3,"rows","columns","columnMode","headerHeight","footerHeight","externalPaging","count","offset","limit","scrollbarH","selected","selectionType","externalSorting","page","select","sort"],[3,"innerWidth"],["lines","none","color","light"],["color","danger","fill","solid",3,"click"],["name","trash","slot","start"]],template:function(e,t){1&e&&(c.Qb(0,"ion-header"),c.Mb(1,"app-header",0),c.Pb(),c.Qb(2,"ion-content",1),c.Yb("ionScroll",(function(e){return t.onScroll(e)})),c.Qb(3,"ion-grid"),c.Qb(4,"ion-row"),c.Mb(5,"ion-col",2),c.Qb(6,"ion-col",3),c.Qb(7,"ion-item",4),c.Qb(8,"ion-buttons",5),c.Qb(9,"ion-button",6),c.Yb("click",(function(){return t.openCreateUserModal()})),c.Mb(10,"ion-icon",7),c.Qb(11,"ion-label"),c.xc(12,"Add User"),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Mb(13,"ion-col",2),c.Pb(),c.Qb(14,"ion-row"),c.Mb(15,"ion-col",2),c.Qb(16,"ion-col",8),c.Qb(17,"ion-searchbar",9),c.Yb("keyup.enter",(function(e){return t.search(e)})),c.Pb(),c.Pb(),c.Qb(18,"ion-col",10),c.Qb(19,"ion-item"),c.Qb(20,"ion-label"),c.xc(21,"Search by"),c.Pb(),c.Qb(22,"ion-select",11),c.Yb("ngModelChange",(function(e){return t.page.searchBy=e})),c.Qb(23,"ion-select-option",12),c.xc(24,"Name"),c.Pb(),c.Qb(25,"ion-select-option",13),c.xc(26,"Email"),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Mb(27,"ion-col",2),c.Pb(),c.Qb(28,"ion-row"),c.Mb(29,"ion-col",2),c.Qb(30,"ion-col",3),c.vc(31,f,8,1,"ion-item",14),c.Pb(),c.Mb(32,"ion-col",2),c.Pb(),c.Qb(33,"ion-row"),c.Mb(34,"ion-col",2),c.Qb(35,"ion-col",3),c.Qb(36,"ngx-datatable",15),c.Yb("page",(function(e){return t.setPage(e)}))("select",(function(e){return t.onSelect(e)}))("sort",(function(e){return t.onSort(e)})),c.Pb(),c.Pb(),c.Mb(37,"ion-col",2),c.Pb(),c.Pb(),c.Mb(38,"app-footer",16),c.Pb()),2&e&&(c.zb(1),c.gc("pageAtTop",t.pageAtTop),c.zb(1),c.gc("fullscreen",!0)("scrollEvents",!0),c.zb(20),c.gc("ngModel",t.page.searchBy),c.zb(9),c.gc("ngForOf",t.selected),c.zb(5),c.gc("rows",t.rows)("columns",c.jc(22,v,c.hc(19,P),c.hc(20,Q),c.hc(21,M)))("columnMode","force")("headerHeight",50)("footerHeight",50)("externalPaging",!0)("count",t.page.totalUser)("offset",t.page.offset)("limit",t.page.limit)("scrollbarH",!0)("selected",t.selected)("selectionType","single")("externalSorting",!0),c.zb(2),c.gc("innerWidth",t.innerWidth))},directives:[s.o,g.a,s.m,s.n,s.z,s.l,s.r,s.f,s.e,s.p,s.s,s.A,s.T,s.D,s.S,i.d,i.g,s.E,n.j,m.c,p.a,s.I],styles:[""]}),e})()}];let w=(()=>{class e{}return e.\u0275mod=c.Jb({type:e}),e.\u0275inj=c.Ib({factory:function(t){return new(t||e)},imports:[[r.i.forChild(y)],r.i]}),e})();var C=o("iWjc");let k=(()=>{class e{}return e.\u0275mod=c.Jb({type:e}),e.\u0275inj=c.Ib({factory:function(t){return new(t||e)},imports:[[n.c,i.a,s.M,w,m.d,C.a]]}),e})()},iWjc:function(e,t,o){"use strict";o.d(t,"a",(function(){return a}));var n=o("ofXK"),i=o("TEn/"),s=o("3Pt+"),r=o("fXoL");let a=(()=>{class e{}return e.\u0275mod=r.Jb({type:e}),e.\u0275inj=r.Ib({factory:function(t){return new(t||e)},imports:[[n.c,s.a,i.M.forRoot()]]}),e})()}}]);