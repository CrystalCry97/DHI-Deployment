function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"/zMi":function(e,n,t){"use strict";t.d(n,"a",(function(){return a}));var o=t("AytR"),r=t("fXoL"),i=t("tk/3"),a=function(){var e=function(){function e(n){_classCallCheck(this,e),this.http=n,this.href=o.a.api_endpoint+"/user"}return _createClass(e,[{key:"getUserList",value:function(e){return this.http.get("".concat(this.href,"/get?orderBy=").concat(e.orderBy,"&isAscending=").concat(e.isAscending,"&limit=").concat(e.limit,"&offset=").concat(e.offset,"&name=").concat(e.name,"&email=").concat(e.email))}},{key:"editUser",value:function(e){return this.http.post(this.href+"/patch",e)}},{key:"changePassword",value:function(e){return this.http.post(this.href+"/updatePassword",{password:e})}},{key:"createUser",value:function(e){return this.http.post(this.href+"/create",e)}},{key:"deleteUser",value:function(e){return this.http.post(this.href+"/remove",{id:e._id,confirm:!0})}}]),e}();return e.\u0275fac=function(n){return new(n||e)(r.Ub(i.b))},e.\u0275prov=r.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},"2MiI":function(e,n,t){"use strict";t.d(n,"a",(function(){return M}));var o,r,i,a=t("mrSG"),s=t("fXoL"),c=t("TEn/"),l=t("Yhfc"),u=t("/zMi"),b=t("lGQG"),d=t("3Pt+"),f=((r=function(){function e(n,t,o,r,i){_classCallCheck(this,e),this.modalController=n,this.toastController=t,this.tokenHelper=o,this.userManagementService=r,this.authService=i,this.updateProfileModel={name:"",email:""}}return _createClass(e,[{key:"ngOnInit",value:function(){this.updateProfileModel.email=this.tokenHelper.getEmail(),this.updateProfileModel.name=this.tokenHelper.getName()}},{key:"dismissModal",value:function(){this.modalController.dismiss()}},{key:"updateProfile",value:function(){var e=this;this.userManagementService.editUser(this.updateProfileModel).subscribe((function(){return Object(a.a)(e,void 0,void 0,regeneratorRuntime.mark((function e(){var n,t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={refreshToken:this.tokenHelper.getRefreshToken()},this.authService.refresh(n).subscribe((function(e){t.tokenHelper.setAccessToken(e.newToken)})),e.next=4,this.toastController.create({header:"Update user profile successfully",message:this.updateProfileModel.name+"'s profile has been updated.",color:"success",duration:2e3});case 4:e.sent.present();case 5:case"end":return e.stop()}}),e,this)})))}),(function(){return Object(a.a)(e,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.toastController.create({header:"Fail to update user profile",message:"Fail to update ".concat(this.updateProfileModel.name,"'s profile."),color:"danger",duration:2e3});case 2:e.sent.present();case 3:case"end":return e.stop()}}),e,this)})))}))}}]),e}()).\u0275fac=function(e){return new(e||r)(s.Lb(c.P),s.Lb(c.U),s.Lb(l.a),s.Lb(u.a),s.Lb(b.a))},r.\u0275cmp=s.Fb({type:r,selectors:[["app-my-profile"]],decls:24,vars:2,consts:[["color","tertiary"],["slot","end"],["shape","round","fill","clear",3,"click"],["name","close"],["name","person","slot","start"],["position","floating"],["type","text",3,"ngModel","ngModelChange"],["name","mail","slot","start"],[3,"ngModel","ngModelChange"],["lines","none"],["slot","end",3,"click"]],template:function(e,n){1&e&&(s.Qb(0,"ion-header"),s.Qb(1,"ion-toolbar",0),s.Qb(2,"ion-title"),s.xc(3,"My Profile"),s.Pb(),s.Qb(4,"ion-buttons",1),s.Qb(5,"ion-button",2),s.Yb("click",(function(){return n.dismissModal()})),s.Mb(6,"ion-icon",3),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Qb(7,"ion-content"),s.Qb(8,"ion-grid"),s.Qb(9,"ion-row"),s.Qb(10,"ion-col"),s.Qb(11,"ion-item"),s.Mb(12,"ion-icon",4),s.Qb(13,"ion-label",5),s.xc(14,"Name"),s.Pb(),s.Qb(15,"ion-input",6),s.Yb("ngModelChange",(function(e){return n.updateProfileModel.name=e})),s.Pb(),s.Pb(),s.Qb(16,"ion-item"),s.Mb(17,"ion-icon",7),s.Qb(18,"ion-label",5),s.xc(19,"Email"),s.Pb(),s.Qb(20,"ion-input",8),s.Yb("ngModelChange",(function(e){return n.updateProfileModel.email=e})),s.Pb(),s.Pb(),s.Qb(21,"ion-item",9),s.Qb(22,"ion-button",10),s.Yb("click",(function(){return n.updateProfile()})),s.xc(23,"Save"),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb()),2&e&&(s.zb(15),s.gc("ngModel",n.updateProfileModel.name),s.zb(5),s.gc("ngModel",n.updateProfileModel.email))},directives:[c.o,c.L,c.K,c.f,c.e,c.p,c.m,c.n,c.z,c.l,c.r,c.s,c.q,c.T,d.d,d.g],styles:[""]}),r),h=((o=function(){function e(n,t,o){_classCallCheck(this,e),this.modalController=n,this.userManagementService=t,this.toastController=o,this.password="",this.confirmPassword=""}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"dismissModal",value:function(){this.modalController.dismiss()}},{key:"changePassword",value:function(){var e=this;this.userManagementService.changePassword(this.confirmPassword).subscribe((function(){return Object(a.a)(e,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.dismissModal(),e.next=3,this.toastController.create({header:"Change password successfully",message:"Your password has been changed.",color:"success",duration:2e3});case 3:e.sent.present();case 4:case"end":return e.stop()}}),e,this)})))}),(function(){return Object(a.a)(e,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.toastController.create({header:"Fail to change password",message:"Please try again or re-login your account.",color:"danger",duration:2e3});case 2:e.sent.present();case 3:case"end":return e.stop()}}),e,this)})))}))}}]),e}()).\u0275fac=function(e){return new(e||o)(s.Lb(c.P),s.Lb(u.a),s.Lb(c.U))},o.\u0275cmp=s.Fb({type:o,selectors:[["app-change-password"]],decls:24,vars:3,consts:[["color","tertiary"],["slot","end"],["shape","round","fill","clear",3,"click"],["name","close"],["name","lock-closed","slot","start"],["position","floating"],["type","password",3,"ngModel","ngModelChange"],["lines","none"],["slot","end",3,"disabled","click"]],template:function(e,n){1&e&&(s.Qb(0,"ion-header"),s.Qb(1,"ion-toolbar",0),s.Qb(2,"ion-title"),s.xc(3,"Change Password"),s.Pb(),s.Qb(4,"ion-buttons",1),s.Qb(5,"ion-button",2),s.Yb("click",(function(){return n.dismissModal()})),s.Mb(6,"ion-icon",3),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Qb(7,"ion-content"),s.Qb(8,"ion-grid"),s.Qb(9,"ion-row"),s.Qb(10,"ion-col"),s.Qb(11,"ion-item"),s.Mb(12,"ion-icon",4),s.Qb(13,"ion-label",5),s.xc(14,"Password"),s.Pb(),s.Qb(15,"ion-input",6),s.Yb("ngModelChange",(function(e){return n.password=e})),s.Pb(),s.Pb(),s.Qb(16,"ion-item"),s.Mb(17,"ion-icon",4),s.Qb(18,"ion-label",5),s.xc(19,"Confirm Password"),s.Pb(),s.Qb(20,"ion-input",6),s.Yb("ngModelChange",(function(e){return n.confirmPassword=e})),s.Pb(),s.Pb(),s.Qb(21,"ion-item",7),s.Qb(22,"ion-button",8),s.Yb("click",(function(){return n.changePassword()})),s.xc(23,"Change password"),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb()),2&e&&(s.zb(15),s.gc("ngModel",n.password),s.zb(5),s.gc("ngModel",n.confirmPassword),s.zb(2),s.gc("disabled",n.password!==n.confirmPassword||""===n.password))},directives:[c.o,c.L,c.K,c.f,c.e,c.p,c.m,c.n,c.z,c.l,c.r,c.s,c.q,c.T,d.d,d.g],styles:[""]}),o),p=t("tyNb"),m=((i=function(){function e(n,t,o){_classCallCheck(this,e),this.modalController=n,this.authService=t,this.router=o}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"dismissModal",value:function(){this.modalController.dismiss()}},{key:"myProfile",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalController.create({component:f});case 2:return n=e.sent,e.next=5,n.present();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"changePassword",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalController.create({component:h});case 2:return n=e.sent,e.next=5,n.present();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"logout",value:function(){var e=this;this.authService.logout().subscribe((function(){e.dismissModal(),e.router.navigate(["/home"])}))}}]),e}()).\u0275fac=function(e){return new(e||i)(s.Lb(c.P),s.Lb(b.a),s.Lb(p.g))},i.\u0275cmp=s.Fb({type:i,selectors:[["app-settings"]],decls:21,vars:0,consts:[["color","tertiary"],["slot","end"],["shape","round","fill","clear",3,"click"],["name","close"],["button","",3,"click"],["slot","start","ios","person-circle-outline","md","person-circle-sharp"],["slot","start","ios","lock-closed-outline","md","lock-closed-sharp"],["button","","lines","none","detail","false",3,"click"],["slot","start","ios","log-out-outline","md","log-out-sharp"]],template:function(e,n){1&e&&(s.Qb(0,"ion-header"),s.Qb(1,"ion-toolbar",0),s.Qb(2,"ion-title"),s.xc(3,"Settings"),s.Pb(),s.Qb(4,"ion-buttons",1),s.Qb(5,"ion-button",2),s.Yb("click",(function(){return n.dismissModal()})),s.Mb(6,"ion-icon",3),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Qb(7,"ion-content"),s.Qb(8,"ion-list"),s.Qb(9,"ion-item",4),s.Yb("click",(function(){return n.myProfile()})),s.Mb(10,"ion-icon",5),s.Qb(11,"ion-label"),s.xc(12,"My Profile"),s.Pb(),s.Pb(),s.Qb(13,"ion-item",4),s.Yb("click",(function(){return n.changePassword()})),s.Mb(14,"ion-icon",6),s.Qb(15,"ion-label"),s.xc(16,"Change Password"),s.Pb(),s.Pb(),s.Qb(17,"ion-item",7),s.Yb("click",(function(){return n.logout()})),s.Mb(18,"ion-icon",8),s.Qb(19,"ion-label"),s.xc(20,"Log Out"),s.Pb(),s.Pb(),s.Pb(),s.Pb())},directives:[c.o,c.L,c.K,c.f,c.e,c.p,c.m,c.t,c.r,c.s],styles:[""]}),i),g=t("ofXK");function P(e,n){if(1&e){var t=s.Rb();s.Qb(0,"ion-button",4),s.Yb("click",(function(){return s.oc(t),s.ac().login()})),s.xc(1,"Log in"),s.Pb()}}function v(e,n){if(1&e){var t=s.Rb();s.Qb(0,"ion-button",5),s.Yb("click",(function(){return s.oc(t),s.ac().openSettings()})),s.xc(1),s.Mb(2,"ion-icon",6),s.Pb()}if(2&e){var o=s.ac();s.gc("color",o.pageAtTop?"dark":"light"),s.zb(1),s.zc("Hello ",o.userName()," ")}}var Q,M=((Q=function(){function e(n,t,o){_classCallCheck(this,e),this.router=n,this.tokenHelper=t,this.modalController=o}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"login",value:function(){this.router.navigate(["/login"])}},{key:"isLogin",value:function(){return this.tokenHelper.isTokensExist()}},{key:"userName",value:function(){return this.tokenHelper.getName()}},{key:"openSettings",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalController.create({component:m});case 2:return n=e.sent,e.next=5,n.present();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})))}}]),e}()).\u0275fac=function(e){return new(e||Q)(s.Lb(p.g),s.Lb(l.a),s.Lb(c.P))},Q.\u0275cmp=s.Fb({type:Q,selectors:[["app-header"]],inputs:{pageAtTop:"pageAtTop"},decls:5,vars:3,consts:[[3,"color"],["slot","start"],["slot","end","fill","outline","shape","round","color","light","class","header-btn",3,"click",4,"ngIf"],["slot","end","fill","outline","shape","round","class","header-btn",3,"color","click",4,"ngIf"],["slot","end","fill","outline","shape","round","color","light",1,"header-btn",3,"click"],["slot","end","fill","outline","shape","round",1,"header-btn",3,"color","click"],["name","chevron-down"]],template:function(e,n){1&e&&(s.Qb(0,"ion-toolbar",0),s.Qb(1,"ion-buttons",1),s.Mb(2,"ion-menu-button"),s.Pb(),s.vc(3,P,2,0,"ion-button",2),s.vc(4,v,3,2,"ion-button",3),s.Pb()),2&e&&(s.gc("color",n.pageAtTop?"":"dark"),s.zb(3),s.gc("ngIf",!n.isLogin()),s.zb(1),s.gc("ngIf",n.isLogin()))},directives:[c.L,c.f,c.w,g.k,c.e,c.p],styles:[".header-btn[_ngcontent-%COMP%]{margin:10px 50px}"]}),Q)},KJTt:function(e,n,t){"use strict";t.d(n,"a",(function(){return r}));var o=t("fXoL"),r=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"isPageAtTop",value:function(e){return e.detail.currentY<70}}]),e}();return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=o.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},LmEr:function(e,n,t){"use strict";t.d(n,"a",(function(){return s}));var o=t("fXoL"),r=t("TEn/"),i=t("ofXK");function a(e,n){1&e&&(o.Qb(0,"ion-buttons",3),o.Qb(1,"ion-button"),o.Qb(2,"small"),o.xc(3,"Home"),o.Pb(),o.Pb(),o.Qb(4,"ion-button"),o.Qb(5,"small"),o.xc(6,"About"),o.Pb(),o.Pb(),o.Qb(7,"ion-button"),o.Qb(8,"small"),o.xc(9,"About"),o.Pb(),o.Pb(),o.Qb(10,"ion-button"),o.Qb(11,"small"),o.xc(12,"Our Team"),o.Pb(),o.Pb(),o.Qb(13,"ion-button"),o.Qb(14,"small"),o.xc(15,"Contact Us"),o.Pb(),o.Pb(),o.Pb())}var s=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=o.Fb({type:e,selectors:[["app-footer"]],inputs:{innerWidth:"innerWidth"},decls:5,vars:1,consts:[["color","dark",1,"footer-toolbar"],["slot","start"],["slot","end",4,"ngIf"],["slot","end"]],template:function(e,n){1&e&&(o.Qb(0,"ion-toolbar",0),o.Qb(1,"ion-text",1),o.Qb(2,"small"),o.xc(3,"Copyright \xa92020 All Rights Reserved | Universiti Sains Malaysia"),o.Pb(),o.Pb(),o.vc(4,a,16,0,"ion-buttons",2),o.Pb()),2&e&&(o.zb(4),o.gc("ngIf",n.innerWidth>=1200))},directives:[r.L,r.I,i.k,r.f,r.e],styles:[".footer-toolbar[_ngcontent-%COMP%]{padding:0 20px}"]}),e}()},gMET:function(e,n,t){"use strict";t.r(n),t.d(n,"UserManagementPageModule",(function(){return S}));var o,r,i=t("ofXK"),a=t("3Pt+"),s=t("TEn/"),c=t("tyNb"),l=t("mrSG"),u=function e(){_classCallCheck(this,e),this.limit=0,this.totalUser=0,this.totalPage=0,this.offset=0,this.searchBy="name",this.orderBy="name",this.isAscending=!0,this.name="",this.email=""},b=t("fXoL"),d=t("/zMi"),f=((r=function(){function e(n,t,o){_classCallCheck(this,e),this.modalController=n,this.userManagementService=t,this.toastController=o}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"dismissModal",value:function(){this.modalController.dismiss()}},{key:"editAcc",value:function(){var e=this;this.userManagementService.editUser(this.user).subscribe((function(){return Object(l.a)(e,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.dismissModal(),e.next=3,this.toastController.create({header:"Edit ".concat(this.user.name,"'s account success!"),color:"success",duration:2e3});case 3:e.sent.present();case 4:case"end":return e.stop()}}),e,this)})))}),(function(){return Object(l.a)(e,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.toastController.create({header:"Fail to edit ".concat(this.user.name,"'s account!"),color:"danger",duration:2e3});case 2:e.sent.present();case 3:case"end":return e.stop()}}),e,this)})))}))}}]),e}()).\u0275fac=function(e){return new(e||r)(b.Lb(s.P),b.Lb(d.a),b.Lb(s.U))},r.\u0275cmp=b.Fb({type:r,selectors:[["app-edit-user"]],inputs:{user:"user"},decls:35,vars:4,consts:[["color","tertiary"],["slot","end"],["shape","round","fill","clear",3,"click"],["name","close"],["name","person","slot","start"],["position","floating"],["type","text",3,"ngModel","ngModelChange"],["name","mail","slot","start"],[3,"ngModel","ngModelChange"],["name","ribbon","slot","start"],["interface","popover",3,"ngModel","ngModelChange"],["value","data manager"],["value","senior data manager"],["lines","none",1,"ion-margin-top"],["slot","end","size","default",3,"click"],["name","save","slot","start"]],template:function(e,n){1&e&&(b.Qb(0,"ion-header"),b.Qb(1,"ion-toolbar",0),b.Qb(2,"ion-title"),b.xc(3),b.Pb(),b.Qb(4,"ion-buttons",1),b.Qb(5,"ion-button",2),b.Yb("click",(function(){return n.dismissModal()})),b.Mb(6,"ion-icon",3),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Qb(7,"ion-content"),b.Qb(8,"ion-grid"),b.Qb(9,"ion-row"),b.Qb(10,"ion-col"),b.Qb(11,"ion-item"),b.Mb(12,"ion-icon",4),b.Qb(13,"ion-label",5),b.xc(14,"Name"),b.Pb(),b.Qb(15,"ion-input",6),b.Yb("ngModelChange",(function(e){return n.user.name=e})),b.Pb(),b.Pb(),b.Qb(16,"ion-item"),b.Mb(17,"ion-icon",7),b.Qb(18,"ion-label",5),b.xc(19,"Email"),b.Pb(),b.Qb(20,"ion-input",8),b.Yb("ngModelChange",(function(e){return n.user.email=e})),b.Pb(),b.Pb(),b.Qb(21,"ion-item"),b.Mb(22,"ion-icon",9),b.Qb(23,"ion-label"),b.xc(24,"Role (NOT WORKING)"),b.Pb(),b.Qb(25,"ion-select",10),b.Yb("ngModelChange",(function(e){return n.user.role=e})),b.Qb(26,"ion-select-option",11),b.xc(27,"Data Manager"),b.Pb(),b.Qb(28,"ion-select-option",12),b.xc(29,"Senior Data Manager"),b.Pb(),b.Pb(),b.Pb(),b.Qb(30,"ion-item",13),b.Qb(31,"ion-button",14),b.Yb("click",(function(){return n.editAcc()})),b.Mb(32,"ion-icon",15),b.Qb(33,"ion-label"),b.xc(34,"Save"),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb()),2&e&&(b.zb(3),b.zc("Edit ",n.user.name,"'s account"),b.zb(12),b.gc("ngModel",n.user.name),b.zb(5),b.gc("ngModel",n.user.email),b.zb(5),b.gc("ngModel",n.user.role))},directives:[s.o,s.L,s.K,s.f,s.e,s.p,s.m,s.n,s.z,s.l,s.r,s.s,s.q,s.T,a.d,a.g,s.D,s.S,s.E],styles:[""]}),r),h=((o=function(){function e(n,t,o){_classCallCheck(this,e),this.modalController=n,this.userManagementService=t,this.toastController=o,this.user={_id:"",name:"",email:"",role:""}}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"dismissModal",value:function(){this.modalController.dismiss()}},{key:"createAcc",value:function(){var e=this;this.userManagementService.createUser(this.user).subscribe((function(){return Object(l.a)(e,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.dismissModal(),e.next=3,this.toastController.create({header:"Create ".concat(this.user.name,"'s account success!"),color:"success",duration:2e3});case 3:e.sent.present();case 4:case"end":return e.stop()}}),e,this)})))}),(function(){return Object(l.a)(e,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.toastController.create({header:"Fail to create ".concat(this.user.name,"'s account!"),color:"danger",duration:2e3});case 2:e.sent.present();case 3:case"end":return e.stop()}}),e,this)})))}))}}]),e}()).\u0275fac=function(e){return new(e||o)(b.Lb(s.P),b.Lb(d.a),b.Lb(s.U))},o.\u0275cmp=b.Fb({type:o,selectors:[["app-create-user"]],decls:37,vars:3,consts:[["color","tertiary"],["slot","end"],["shape","round","fill","clear",3,"click"],["name","close"],["name","person","slot","start"],["position","floating"],["type","text",3,"ngModel","ngModelChange"],["name","mail","slot","start"],[3,"ngModel","ngModelChange"],["name","ribbon","slot","start"],["interface","popover",3,"ngModel","ngModelChange"],["value","admin"],["value","data manager"],["value","senior data manager"],["lines","none",1,"ion-margin-top"],["slot","end","size","default",3,"click"],["name","save","slot","start"]],template:function(e,n){1&e&&(b.Qb(0,"ion-header"),b.Qb(1,"ion-toolbar",0),b.Qb(2,"ion-title"),b.xc(3,"Create new account"),b.Pb(),b.Qb(4,"ion-buttons",1),b.Qb(5,"ion-button",2),b.Yb("click",(function(){return n.dismissModal()})),b.Mb(6,"ion-icon",3),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Qb(7,"ion-content"),b.Qb(8,"ion-grid"),b.Qb(9,"ion-row"),b.Qb(10,"ion-col"),b.Qb(11,"ion-item"),b.Mb(12,"ion-icon",4),b.Qb(13,"ion-label",5),b.xc(14,"Name"),b.Pb(),b.Qb(15,"ion-input",6),b.Yb("ngModelChange",(function(e){return n.user.name=e})),b.Pb(),b.Pb(),b.Qb(16,"ion-item"),b.Mb(17,"ion-icon",7),b.Qb(18,"ion-label",5),b.xc(19,"Email"),b.Pb(),b.Qb(20,"ion-input",8),b.Yb("ngModelChange",(function(e){return n.user.email=e})),b.Pb(),b.Pb(),b.Qb(21,"ion-item"),b.Mb(22,"ion-icon",9),b.Qb(23,"ion-label"),b.xc(24,"Role"),b.Pb(),b.Qb(25,"ion-select",10),b.Yb("ngModelChange",(function(e){return n.user.role=e})),b.Qb(26,"ion-select-option",11),b.xc(27,"Admin"),b.Pb(),b.Qb(28,"ion-select-option",12),b.xc(29,"Data Manager"),b.Pb(),b.Qb(30,"ion-select-option",13),b.xc(31,"Senior Data Manager"),b.Pb(),b.Pb(),b.Pb(),b.Qb(32,"ion-item",14),b.Qb(33,"ion-button",15),b.Yb("click",(function(){return n.createAcc()})),b.Mb(34,"ion-icon",16),b.Qb(35,"ion-label"),b.xc(36,"Create"),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb()),2&e&&(b.zb(15),b.gc("ngModel",n.user.name),b.zb(5),b.gc("ngModel",n.user.email),b.zb(5),b.gc("ngModel",n.user.role))},directives:[s.o,s.L,s.K,s.f,s.e,s.p,s.m,s.n,s.z,s.l,s.r,s.s,s.q,s.T,a.d,a.g,s.D,s.S,s.E],styles:[""]}),o),p=t("KJTt"),m=t("2MiI"),g=t("lDzL"),P=t("LmEr");function v(e,n){if(1&e){var t=b.Rb();b.Qb(0,"ion-item",17),b.Qb(1,"ion-text"),b.xc(2),b.Pb(),b.Qb(3,"ion-buttons",5),b.Qb(4,"ion-button",18),b.Yb("click",(function(){b.oc(t);var e=n.$implicit;return b.ac().deleteUser(e)})),b.Mb(5,"ion-icon",19),b.Qb(6,"ion-label"),b.xc(7,"Delete"),b.Pb(),b.Pb(),b.Pb(),b.Pb()}if(2&e){var o=n.$implicit;b.zb(2),b.yc(o.name)}}var Q,M,k,C=function(){return{name:"Name"}},w=function(){return{name:"Email"}},y=function(){return{name:"Role",sortable:!1}},x=function(e,n,t){return[e,n,t]},L=[{path:"",component:(Q=function(){function e(n,t,o,r,i){_classCallCheck(this,e),this.pagePositionService=n,this.userManagementService=t,this.modalController=o,this.alertController=r,this.toastController=i,this.pageAtTop=!0,this.page=new u,this.rows=new Array,this.selected=[],this.page.limit=5}return _createClass(e,[{key:"ngOnInit",value:function(){this.innerWidth=window.innerWidth,this.setPage({offset:0})}},{key:"onResize",value:function(e){this.innerWidth=window.innerWidth}},{key:"onScroll",value:function(e){this.pageAtTop=this.pagePositionService.isPageAtTop(e)}},{key:"setPage",value:function(e){var n=this;this.page.offset=e.offset,this.userManagementService.getUserList(this.page).subscribe((function(e){n.page.offset=e.offset,n.page.totalUser=e.totalUser,n.page.totalPage=e.totalPage,n.rows=e.user.map((function(e){return{_id:e._id,name:e.name,email:e.email,role:e.roles.length>0?e.roles[0].role:"-"}}))}))}},{key:"search",value:function(e){var n=this;this.page.offset=0,"name"===this.page.searchBy?(this.page.name=e.target.value,this.page.email=""):"email"===this.page.searchBy&&(this.page.name="",this.page.email=e.target.value),this.userManagementService.getUserList(this.page).subscribe((function(e){n.page.offset=e.offset,n.page.totalUser=e.totalUser,n.page.totalPage=e.totalPage,n.rows=e.user.map((function(e){return{_id:e._id,name:e.name,email:e.email,role:e.roles.length>0?e.roles[0].role:"-"}}))}))}},{key:"onSort",value:function(e){var n=this;this.page.orderBy=e.column.name.toLowerCase(),this.page.isAscending="asc"===e.newValue,this.userManagementService.getUserList(this.page).subscribe((function(e){n.page.offset=e.offset,n.page.totalUser=e.totalUser,n.page.totalPage=e.totalPage,n.rows=e.user.map((function(e){return{_id:e._id,name:e.name,email:e.email,role:e.roles.length>0?e.roles[0].role:"-"}}))}))}},{key:"onSelect",value:function(e){var n=e.selected;console.log("Select Event",n,this.selected)}},{key:"openCreateUserModal",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modalController.create({component:h});case 2:return n=e.sent,e.next=5,n.present();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"openEditUserModal",value:function(e){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var t;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.modalController.create({component:f,componentProps:{user:e}});case 2:return t=n.sent,n.next=5,t.present();case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}}),n,this)})))}},{key:"deleteUser",value:function(e){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var t,o=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.alertController.create({cssClass:"my-custom-class",header:"Permenantly delete ".concat(e.name,"'s account"),message:"Are you sure you want to delete this account? This action cannot be undone.",buttons:[{text:"Cancel",role:"cancel"},{text:"Delete",handler:function(){o.userManagementService.deleteUser(e).subscribe((function(){return Object(l.a)(o,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.toastController.create({header:"Edit ".concat(e.name,"'s account success!"),color:"success",duration:2e3});case 2:n.sent.present();case 3:case"end":return n.stop()}}),n,this)})))}),(function(){return Object(l.a)(o,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.toastController.create({header:"Fail to edit ".concat(e.name,"'s account!"),color:"danger",duration:2e3});case 2:n.sent.present();case 3:case"end":return n.stop()}}),n,this)})))}))}}]});case 2:return t=n.sent,n.next=5,t.present();case 5:case"end":return n.stop()}}),n,this)})))}}]),e}(),Q.\u0275fac=function(e){return new(e||Q)(b.Lb(p.a),b.Lb(d.a),b.Lb(s.P),b.Lb(s.a),b.Lb(s.U))},Q.\u0275cmp=b.Fb({type:Q,selectors:[["app-user-management"]],hostBindings:function(e,n){1&e&&b.Yb("resize",(function(e){return n.onResize(e)}),!1,b.nc)},decls:39,vars:26,consts:[[3,"pageAtTop"],[3,"fullscreen","scrollEvents","ionScroll"],["size","0","size-md","1"],["size","12","size-md","10"],["lines","none"],["slot","end"],["color","primary","fill","solid",3,"click"],["name","person-add","slot","start"],["size","12","size-md","6"],["showCancelButton","focus","animated","","placeholder","Enter your search",3,"keyup.enter"],["size","12","size-md","4"],["interface","popover",3,"ngModel","ngModelChange"],["value","name"],["value","email"],["lines","none","color","light",4,"ngFor","ngForOf"],["rowHeight","auto",1,"material",2,"margin-bottom","70vh",3,"rows","columns","columnMode","headerHeight","footerHeight","externalPaging","count","offset","limit","scrollbarH","selected","selectionType","externalSorting","page","select","sort"],[3,"innerWidth"],["lines","none","color","light"],["color","danger","fill","solid",3,"click"],["name","trash","slot","start"]],template:function(e,n){1&e&&(b.Qb(0,"ion-header"),b.Mb(1,"app-header",0),b.Pb(),b.Qb(2,"ion-content",1),b.Yb("ionScroll",(function(e){return n.onScroll(e)})),b.Qb(3,"ion-grid"),b.Qb(4,"ion-row"),b.Mb(5,"ion-col",2),b.Qb(6,"ion-col",3),b.Qb(7,"ion-item",4),b.Qb(8,"ion-buttons",5),b.Qb(9,"ion-button",6),b.Yb("click",(function(){return n.openCreateUserModal()})),b.Mb(10,"ion-icon",7),b.Qb(11,"ion-label"),b.xc(12,"Add User"),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Mb(13,"ion-col",2),b.Pb(),b.Qb(14,"ion-row"),b.Mb(15,"ion-col",2),b.Qb(16,"ion-col",8),b.Qb(17,"ion-searchbar",9),b.Yb("keyup.enter",(function(e){return n.search(e)})),b.Pb(),b.Pb(),b.Qb(18,"ion-col",10),b.Qb(19,"ion-item"),b.Qb(20,"ion-label"),b.xc(21,"Search by"),b.Pb(),b.Qb(22,"ion-select",11),b.Yb("ngModelChange",(function(e){return n.page.searchBy=e})),b.Qb(23,"ion-select-option",12),b.xc(24,"Name"),b.Pb(),b.Qb(25,"ion-select-option",13),b.xc(26,"Email"),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Mb(27,"ion-col",2),b.Pb(),b.Qb(28,"ion-row"),b.Mb(29,"ion-col",2),b.Qb(30,"ion-col",3),b.vc(31,v,8,1,"ion-item",14),b.Pb(),b.Mb(32,"ion-col",2),b.Pb(),b.Qb(33,"ion-row"),b.Mb(34,"ion-col",2),b.Qb(35,"ion-col",3),b.Qb(36,"ngx-datatable",15),b.Yb("page",(function(e){return n.setPage(e)}))("select",(function(e){return n.onSelect(e)}))("sort",(function(e){return n.onSort(e)})),b.Pb(),b.Pb(),b.Mb(37,"ion-col",2),b.Pb(),b.Pb(),b.Mb(38,"app-footer",16),b.Pb()),2&e&&(b.zb(1),b.gc("pageAtTop",n.pageAtTop),b.zb(1),b.gc("fullscreen",!0)("scrollEvents",!0),b.zb(20),b.gc("ngModel",n.page.searchBy),b.zb(9),b.gc("ngForOf",n.selected),b.zb(5),b.gc("rows",n.rows)("columns",b.jc(22,x,b.hc(19,C),b.hc(20,w),b.hc(21,y)))("columnMode","force")("headerHeight",50)("footerHeight",50)("externalPaging",!0)("count",n.page.totalUser)("offset",n.page.offset)("limit",n.page.limit)("scrollbarH",!0)("selected",n.selected)("selectionType","single")("externalSorting",!0),b.zb(2),b.gc("innerWidth",n.innerWidth))},directives:[s.o,m.a,s.m,s.n,s.z,s.l,s.r,s.f,s.e,s.p,s.s,s.A,s.T,s.D,s.S,a.d,a.g,s.E,i.j,g.c,P.a,s.I],styles:[""]}),Q)}],z=((M=function e(){_classCallCheck(this,e)}).\u0275mod=b.Jb({type:M}),M.\u0275inj=b.Ib({factory:function(e){return new(e||M)},imports:[[c.i.forChild(L)],c.i]}),M),R=t("iWjc"),S=((k=function e(){_classCallCheck(this,e)}).\u0275mod=b.Jb({type:k}),k.\u0275inj=b.Ib({factory:function(e){return new(e||k)},imports:[[i.c,a.a,s.M,z,g.d,R.a]]}),k)},iWjc:function(e,n,t){"use strict";t.d(n,"a",(function(){return s}));var o=t("ofXK"),r=t("TEn/"),i=t("3Pt+"),a=t("fXoL"),s=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=a.Jb({type:e}),e.\u0275inj=a.Ib({factory:function(n){return new(n||e)},imports:[[o.c,i.a,r.M.forRoot()]]}),e}()}}]);