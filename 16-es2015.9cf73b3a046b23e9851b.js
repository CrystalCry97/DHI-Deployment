(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{RjGV:function(e,i,t){"use strict";t.r(i),t.d(i,"ConsultationPageModule",(function(){return ee}));var o=t("ofXK"),n=t("3Pt+"),s=t("TEn/"),c=t("tyNb"),a=t("mrSG"),r=t("fXoL"),l=t("AytR"),b=t("tk/3");let d=(()=>{class e{constructor(e){this.http=e,this.href=l.a.api_endpoint+"/consultation",this.href2=l.a.api_endpoint+"/chat"}submitConsultationForm(e){return this.http.post(this.href+"/add",e)}getConsultationList(e){return this.http.get(`${this.href}/get?orderBy=${e.orderBy}&isAscending=${e.isAscending}&limit=${e.limit}&offset=${e.offset}&productName=${e.productName}&content=${e.content}&frequency=${e.frequency}&otherFrequency=${e.otherFrequency}&dose=${e.dose}&duration=${e.duration}&reason=${e.reason}&purchase=${e.purchase}&otherPurchase=${e.otherPurchase}&isMedication=${e.isMedication}&medication=${e.medication}&isSideEffect=${e.isSideEffect}&sideEffect=${e.sideEffect}&isStillTaking=${e.isStillTaking}&isConsult=${e.isConsult}&question=${e.question}&createdAt=${e.createdAt}&email=${e.email}`)}getUserDetails(e){return this.http.get(`${l.a.api_endpoint+"/user"}/profile?email=${e}`)}addMessage(e,i,t){return this.http.post(this.href2+"/add",{consultationId:e,message:i})}getMessages(e){return this.http.get(`${this.href2}/get?consultationId=${e}`)}}return e.\u0275fac=function(i){return new(i||e)(r.Vb(b.b))},e.\u0275prov=r.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var u=t("Yhfc");function h(e,i){if(1&e&&(r.Rb(0,"span"),r.Ac(1),r.Qb()),2&e){const e=r.bc(2);r.Ab(1),r.Cc(", ",e.consultationDetails.medication,"")}}function f(e,i){if(1&e&&(r.Rb(0,"span"),r.Ac(1),r.Qb()),2&e){const e=r.bc(2);r.Ab(1),r.Cc(", ",e.consultationDetails.sideEffect,"")}}function g(e,i){if(1&e&&(r.Rb(0,"div"),r.Rb(1,"p"),r.Ac(2),r.Qb(),r.Rb(3,"p"),r.Ac(4),r.Qb(),r.Rb(5,"p"),r.Ac(6),r.Qb(),r.Rb(7,"p"),r.Ac(8),r.Qb(),r.Rb(9,"p"),r.Ac(10),r.Qb(),r.Rb(11,"p"),r.Ac(12),r.Qb(),r.Rb(13,"p"),r.Ac(14),r.yc(15,h,2,1,"span",7),r.Qb(),r.Rb(16,"p"),r.Ac(17),r.yc(18,f,2,1,"span",7),r.Qb(),r.Rb(19,"p"),r.Ac(20),r.Qb(),r.Rb(21,"p"),r.Ac(22),r.Qb(),r.Rb(23,"p"),r.Ac(24),r.Qb(),r.Qb()),2&e){const e=r.bc();r.Ab(2),r.Cc("Content: ",e.consultationDetails.content,""),r.Ab(2),r.Cc("Frequency: ","Other- Please indicate"===e.consultationDetails.frequency?e.consultationDetails.otherFrequency:e.consultationDetails.frequency,""),r.Ab(2),r.Cc("Dose: ",e.consultationDetails.dose,""),r.Ab(2),r.Cc("Duration of administration: ",e.consultationDetails.duration,""),r.Ab(2),r.Cc("Reason for taking the product: ",e.consultationDetails.reason,""),r.Ab(2),r.Cc("Purchase at: ","Other- Please indicate"===e.consultationDetails.purchase?e.consultationDetails.otherPurchase:e.consultationDetails.purchase,""),r.Ab(2),r.Cc("Taking any medications prescribed by the doctor: ",e.consultationDetails.isMedication,""),r.Ab(1),r.ic("ngIf","Yes"===e.consultationDetails.isMedication),r.Ab(2),r.Cc("Side effects: ",e.consultationDetails.isSideEffect,""),r.Ab(1),r.ic("ngIf","Yes"===e.consultationDetails.isSideEffect),r.Ab(2),r.Cc("Still taking both product and drug at the same time: ",e.consultationDetails.isStillTaking,""),r.Ab(2),r.Cc("Did consult with doctor or pharmacist before taking medication: ",e.consultationDetails.isConsult,""),r.Ab(2),r.Cc("Questions: ",""===e.consultationDetails.question?"-":e.consultationDetails.question,"")}}function m(e,i){1&e&&r.Nb(0,"ion-col",17)}function p(e,i){1&e&&r.Nb(0,"ion-col",17)}function R(e,i){if(1&e&&(r.Rb(0,"ion-row"),r.yc(1,m,1,0,"ion-col",12),r.Rb(2,"ion-col",13),r.Rb(3,"ion-card",14),r.Rb(4,"ion-card-content"),r.Nb(5,"div",15),r.Rb(6,"div",16),r.Ac(7),r.Nb(8,"br"),r.Ac(9),r.cc(10,"date"),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.yc(11,p,1,0,"ion-col",12),r.Qb()),2&e){const e=i.$implicit,t=r.bc();r.Ab(1),r.ic("ngIf",e.sender===t.tokenHelper.getEmail()),r.Ab(2),r.ic("color",e.sender===t.tokenHelper.getEmail()?"tertiary":"primary"),r.Ab(2),r.ic("innerHTML",e.message,r.sc),r.Ab(2),r.Bc(e.sender),r.Ab(2),r.Bc(r.ec(10,6,e.updatedAt,"medium")),r.Ab(2),r.ic("ngIf",e.sender!==t.tokenHelper.getEmail())}}let A=(()=>{class e{constructor(e,i,t,o){this.modalController=e,this.consultationService=i,this.tokenHelper=t,this.toastController=o,this.message="",this.seeMore=!1}ngOnInit(){this.getMessage()}dismissModal(){this.modalController.dismiss()}sendMessage(){this.consultationService.addMessage(this.consultationDetails._id,this.message,this.tokenHelper.getEmail()).subscribe(e=>Object(a.a)(this,void 0,void 0,(function*(){console.log(e),(yield this.toastController.create({header:"Message sent.",color:"success",duration:2e3})).present()})),e=>Object(a.a)(this,void 0,void 0,(function*(){console.log(e),(yield this.toastController.create({header:"Message failed to sent.",color:"danger",duration:2e3})).present()})),()=>{this.message="",this.getMessage()})}getMessage(){this.consultationService.getMessages(this.consultationDetails._id).subscribe(e=>{this.messages=e.messages.sort((e,i)=>e.updatedAt-i.updatedAt),console.log(this.messages)})}seeMoreFunc(){this.seeMore=!this.seeMore}}return e.\u0275fac=function(i){return new(i||e)(r.Mb(s.R),r.Mb(d),r.Mb(u.a),r.Mb(s.Y))},e.\u0275cmp=r.Gb({type:e,selectors:[["app-consultation-details"]],inputs:{consultationDetails:"consultationDetails"},decls:34,vars:13,consts:[["color","tertiary"],["slot","end"],["shape","round","fill","clear",3,"click"],["name","close"],[3,"button"],[1,"see-more",3,"click"],[3,"name"],[4,"ngIf"],[4,"ngFor","ngForOf"],["lines","none",2,"border","solid 2px rgba(0, 0, 0, 0.507)","border-radius","30px"],["placeholder","Type something here..",3,"ngModel","ngModelChange"],[1,"send-button",3,"click"],["size","1",4,"ngIf"],["size","11"],[2,"padding-bottom","10px","color","white",3,"color"],[3,"innerHTML"],[1,"message-detail"],["size","1"]],template:function(e,i){1&e&&(r.Rb(0,"ion-header"),r.Rb(1,"ion-toolbar",0),r.Rb(2,"ion-title"),r.Ac(3,"Consultation Details & Chat"),r.Qb(),r.Rb(4,"ion-buttons",1),r.Rb(5,"ion-button",2),r.Zb("click",(function(){return i.dismissModal()})),r.Nb(6,"ion-icon",3),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(7,"ion-content"),r.Rb(8,"ion-grid"),r.Rb(9,"ion-row"),r.Rb(10,"ion-col"),r.Rb(11,"ion-card",4),r.Rb(12,"ion-card-header"),r.Rb(13,"ion-card-subtitle"),r.Ac(14),r.cc(15,"date"),r.Qb(),r.Rb(16,"ion-card-title"),r.Ac(17),r.Qb(),r.Rb(18,"ion-card-subtitle"),r.Ac(19),r.Qb(),r.Qb(),r.Rb(20,"ion-card-content"),r.Rb(21,"p",5),r.Zb("click",(function(){return i.seeMoreFunc()})),r.Nb(22,"ion-icon",6),r.Ac(23),r.Qb(),r.yc(24,g,25,13,"div",7),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(25,"ion-row"),r.Rb(26,"ion-col"),r.Rb(27,"ion-card",4),r.yc(28,R,12,9,"ion-row",8),r.Rb(29,"ion-card-content"),r.Rb(30,"ion-item",9),r.Rb(31,"ion-input",10),r.Zb("ngModelChange",(function(e){return i.message=e})),r.Qb(),r.Qb(),r.Rb(32,"ion-button",11),r.Zb("click",(function(){return i.sendMessage()})),r.Ac(33,"Send"),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb()),2&e&&(r.Ab(11),r.ic("button",!1),r.Ab(3),r.Bc(r.ec(15,10,i.consultationDetails.createdAt,"medium")),r.Ab(3),r.Cc("Product Name: ",i.consultationDetails.productName,""),r.Ab(2),r.Bc(i.consultationDetails.email),r.Ab(3),r.ic("name",i.seeMore?"caret-up":"caret-down"),r.Ab(1),r.Cc("",i.seeMore?"Hide details":"Click to see more details"," "),r.Ab(1),r.ic("ngIf",i.seeMore),r.Ab(3),r.ic("button",!1),r.Ab(1),r.ic("ngForOf",i.messages),r.Ab(3),r.ic("ngModel",i.message))},directives:[s.q,s.N,s.M,s.f,s.e,s.r,s.n,s.p,s.C,s.m,s.g,s.i,s.j,s.k,s.h,o.l,o.k,s.t,s.s,s.X,n.e,n.h],pipes:[o.e],styles:[".message-detail[_ngcontent-%COMP%]{font-size:10px;float:right;text-align:right}.send-button[_ngcontent-%COMP%]{float:right;margin:10px 2px;color:azure}.see-more[_ngcontent-%COMP%]{text-align:end;color:#3171e0;cursor:pointer;margin-bottom:5px}"]}),e})(),Q=(()=>{class e{constructor(e,i){this.modalController=e,this.consultationService=i,this.data={name:"",email:"",age:null,sex:"",state:"",phoneNumber:""}}ngOnInit(){this.consultationService.getUserDetails(this.email).subscribe(e=>{console.log(e),this.data.name=e.profile.user.name,this.data.email=e.profile.user.email,this.data.age=e.profile.age,this.data.sex=e.profile.sex,this.data.state=e.profile.state,this.data.phoneNumber=e.profile.phoneNumber,console.log(this.data)})}dismissModal(){this.modalController.dismiss()}}return e.\u0275fac=function(i){return new(i||e)(r.Mb(s.R),r.Mb(d))},e.\u0275cmp=r.Gb({type:e,selectors:[["app-consultation-user-detail"]],inputs:{email:"email"},decls:26,vars:7,consts:[["color","tertiary"],["slot","end"],["shape","round","fill","clear",3,"click"],["name","close"],[3,"button"]],template:function(e,i){1&e&&(r.Rb(0,"ion-header"),r.Rb(1,"ion-toolbar",0),r.Rb(2,"ion-title"),r.Ac(3,"User Details"),r.Qb(),r.Rb(4,"ion-buttons",1),r.Rb(5,"ion-button",2),r.Zb("click",(function(){return i.dismissModal()})),r.Nb(6,"ion-icon",3),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(7,"ion-content"),r.Rb(8,"ion-grid"),r.Rb(9,"ion-row"),r.Rb(10,"ion-col"),r.Rb(11,"ion-card",4),r.Rb(12,"ion-card-header"),r.Rb(13,"ion-card-title"),r.Ac(14),r.Qb(),r.Rb(15,"ion-card-subtitle"),r.Ac(16),r.Qb(),r.Qb(),r.Rb(17,"ion-card-content"),r.Rb(18,"p"),r.Ac(19),r.Qb(),r.Rb(20,"p"),r.Ac(21),r.Qb(),r.Rb(22,"p"),r.Ac(23),r.Qb(),r.Rb(24,"p"),r.Ac(25),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb()),2&e&&(r.Ab(11),r.ic("button",!1),r.Ab(3),r.Bc(i.data.name),r.Ab(2),r.Bc(i.data.email),r.Ab(3),r.Cc("Age: ",i.data.age,""),r.Ab(2),r.Cc("Sex: ",i.data.sex,""),r.Ab(2),r.Cc("State: ",i.data.state,""),r.Ab(2),r.Cc("Phone Number: ",i.data.phoneNumber,""))},directives:[s.q,s.N,s.M,s.f,s.e,s.r,s.n,s.p,s.C,s.m,s.g,s.i,s.k,s.j,s.h],styles:[""]}),e})();class M{constructor(){this.limit=0,this.total=0,this.totalPage=0,this.offset=0,this.searchBy="productName",this.orderBy="productName",this.isAscending=!0,this._id="",this.productName="",this.content="",this.frequency="",this.otherFrequency="",this.dose="",this.duration="",this.reason="",this.purchase="",this.otherPurchase="",this.isMedication="",this.medication="",this.isSideEffect="",this.sideEffect="",this.isStillTaking="",this.isConsult="",this.question="",this.createdAt="",this.email=""}}var y=t("KJTt"),C=t("2MiI"),F=t("LmEr"),S=t("lDzL");function v(e,i){1&e&&(r.Rb(0,"p",17),r.Ac(1,"We can help you."),r.Qb())}function P(e,i){1&e&&r.Nb(0,"ion-col",7)}function k(e,i){if(1&e){const e=r.Sb();r.Rb(0,"ion-col",8),r.Rb(1,"ion-button",18),r.Zb("click",(function(){return r.rc(e),r.bc().switchToForm()})),r.Ac(2),r.Qb(),r.Qb()}if(2&e){const e=r.bc();r.Ab(2),r.Bc(e.showForm?"Back to Consultation List":"Consultation Form")}}function N(e,i){1&e&&r.Nb(0,"ion-col",7)}function w(e,i){1&e&&(r.Rb(0,"ion-col"),r.Rb(1,"ion-item",28),r.Rb(2,"ion-label"),r.Ac(3,"Email"),r.Qb(),r.Nb(4,"ion-radio",40),r.Qb(),r.Qb())}function q(e,i){if(1&e){const e=r.Sb();r.Rb(0,"ion-col",19),r.Rb(1,"ion-row"),r.Nb(2,"ion-col",20),r.Rb(3,"ion-col",21),r.Rb(4,"ion-searchbar",22),r.Zb("keyup.enter",(function(i){return r.rc(e),r.bc().search(i)}))("ngModelChange",(function(i){return r.rc(e),r.bc().searchText=i})),r.Qb(),r.Qb(),r.Rb(5,"ion-col",23),r.Rb(6,"ion-button",24),r.Zb("click",(function(){return r.rc(e),r.bc().search(!1)})),r.Nb(7,"ion-icon",25),r.Qb(),r.Qb(),r.Qb(),r.Rb(8,"ion-radio-group",26),r.Zb("ngModelChange",(function(i){return r.rc(e),r.bc().page.searchBy=i})),r.Rb(9,"ion-grid",27),r.Rb(10,"ion-row"),r.Rb(11,"ion-col"),r.Rb(12,"ion-item",28),r.Rb(13,"ion-label"),r.Ac(14,"Search by:"),r.Qb(),r.Qb(),r.Qb(),r.Rb(15,"ion-col"),r.Rb(16,"ion-item",28),r.Rb(17,"ion-label"),r.Ac(18,"Product Name"),r.Qb(),r.Nb(19,"ion-radio",29),r.Qb(),r.Qb(),r.yc(20,w,5,0,"ion-col",15),r.Qb(),r.Qb(),r.Qb(),r.Rb(21,"ion-row",30),r.Nb(22,"ion-col",20),r.Rb(23,"ion-col",31),r.Rb(24,"ion-item",32),r.Rb(25,"ion-label",33),r.Ac(26),r.Qb(),r.Qb(),r.Qb(),r.Rb(27,"ion-col",34),r.Rb(28,"ion-item",32),r.Rb(29,"ion-label",33),r.Ac(30,"Results per Page"),r.Qb(),r.Rb(31,"ion-select",35),r.Zb("ionChange",(function(i){return r.rc(e),r.bc().changeResultPerPage(i)})),r.Rb(32,"ion-select-option",36),r.Ac(33,"10"),r.Qb(),r.Rb(34,"ion-select-option",37),r.Ac(35,"25"),r.Qb(),r.Rb(36,"ion-select-option",38),r.Ac(37,"50"),r.Qb(),r.Rb(38,"ion-select-option",39),r.Ac(39,"100"),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb()}if(2&e){const e=r.bc();r.Ab(4),r.ic("ngModel",e.searchText),r.Ab(4),r.ic("ngModel",e.page.searchBy),r.Ab(12),r.ic("ngIf","mobile user"!==e.getRole()),r.Ab(6),r.Cc("",e.page.total," total")}}function O(e,i){if(1&e&&(r.Rb(0,"ion-item",32),r.Rb(1,"ion-label"),r.Ac(2),r.Qb(),r.Nb(3,"ion-radio",58),r.Qb()),2&e){const e=i.$implicit;r.Ab(2),r.Bc(e),r.Ab(1),r.ic("value",e)}}function E(e,i){if(1&e){const e=r.Sb();r.Rb(0,"ion-item"),r.Rb(1,"ion-label",42),r.Ac(2,"Please indicate.."),r.Qb(),r.Rb(3,"ion-input",59),r.Zb("ngModelChange",(function(i){return r.rc(e),r.bc(2).formFields.otherFrequency=i})),r.Qb(),r.Qb()}if(2&e){const e=r.bc(2);r.Ab(3),r.ic("ngModel",e.formFields.otherFrequency)}}function x(e,i){if(1&e&&(r.Rb(0,"ion-item",32),r.Rb(1,"ion-label"),r.Ac(2),r.Qb(),r.Nb(3,"ion-radio",58),r.Qb()),2&e){const e=i.$implicit;r.Ab(2),r.Bc(e),r.Ab(1),r.ic("value",e)}}function T(e,i){if(1&e&&(r.Rb(0,"ion-item",32),r.Rb(1,"ion-label"),r.Ac(2),r.Qb(),r.Nb(3,"ion-radio",58),r.Qb()),2&e){const e=i.$implicit;r.Ab(2),r.Bc(e),r.Ab(1),r.ic("value",e)}}function D(e,i){if(1&e){const e=r.Sb();r.Rb(0,"ion-item"),r.Rb(1,"ion-label",42),r.Ac(2,"Please indicate.."),r.Qb(),r.Rb(3,"ion-input",60),r.Zb("ngModelChange",(function(i){return r.rc(e),r.bc(2).formFields.otherPurchase=i})),r.Qb(),r.Qb()}if(2&e){const e=r.bc(2);r.Ab(3),r.ic("ngModel",e.formFields.otherPurchase)}}function I(e,i){if(1&e&&(r.Rb(0,"ion-item",32),r.Rb(1,"ion-label"),r.Ac(2),r.Qb(),r.Nb(3,"ion-radio",58),r.Qb()),2&e){const e=i.$implicit;r.Ab(2),r.Bc(e),r.Ab(1),r.ic("value",e)}}function $(e,i){if(1&e){const e=r.Sb();r.Rb(0,"ion-item"),r.Rb(1,"ion-label",42),r.Ac(2,"Please indicate.."),r.Qb(),r.Rb(3,"ion-input",61),r.Zb("ngModelChange",(function(i){return r.rc(e),r.bc(2).formFields.medication=i})),r.Qb(),r.Qb()}if(2&e){const e=r.bc(2);r.Ab(3),r.ic("ngModel",e.formFields.medication)}}function z(e,i){if(1&e&&(r.Rb(0,"ion-item",32),r.Rb(1,"ion-label"),r.Ac(2),r.Qb(),r.Nb(3,"ion-radio",58),r.Qb()),2&e){const e=i.$implicit;r.Ab(2),r.Bc(e),r.Ab(1),r.ic("value",e)}}function Z(e,i){if(1&e){const e=r.Sb();r.Rb(0,"ion-item"),r.Rb(1,"ion-label",42),r.Ac(2,"Please indicate.."),r.Qb(),r.Rb(3,"ion-input",62),r.Zb("ngModelChange",(function(i){return r.rc(e),r.bc(2).formFields.sideEffect=i})),r.Qb(),r.Qb()}if(2&e){const e=r.bc(2);r.Ab(3),r.ic("ngModel",e.formFields.sideEffect)}}function H(e,i){if(1&e&&(r.Rb(0,"ion-item",32),r.Rb(1,"ion-label"),r.Ac(2),r.Qb(),r.Nb(3,"ion-radio",58),r.Qb()),2&e){const e=i.$implicit;r.Ab(2),r.Bc(e),r.Ab(1),r.ic("value",e)}}function L(e,i){if(1&e&&(r.Rb(0,"ion-item",32),r.Rb(1,"ion-label"),r.Ac(2),r.Qb(),r.Nb(3,"ion-radio",58),r.Qb()),2&e){const e=i.$implicit;r.Ab(2),r.Bc(e),r.Ab(1),r.ic("value",e)}}function _(e,i){if(1&e){const e=r.Sb();r.Rb(0,"form",41),r.Zb("ngSubmit",(function(){return r.rc(e),r.bc().logForm()})),r.Rb(1,"ion-item"),r.Rb(2,"ion-label",42),r.Ac(3,"Name of herbal product *"),r.Qb(),r.Rb(4,"ion-input",43),r.Zb("ngModelChange",(function(i){return r.rc(e),r.bc().formFields.productName=i})),r.Qb(),r.Qb(),r.Rb(5,"ion-item"),r.Rb(6,"ion-label",42),r.Ac(7,"Content *"),r.Qb(),r.Rb(8,"ion-textarea",44),r.Zb("ngModelChange",(function(i){return r.rc(e),r.bc().formFields.content=i})),r.Qb(),r.Qb(),r.Rb(9,"ion-list"),r.Rb(10,"ion-radio-group",45),r.Zb("ngModelChange",(function(i){return r.rc(e),r.bc().formFields.frequency=i})),r.Rb(11,"ion-list-header"),r.Rb(12,"ion-label"),r.Ac(13,"Frequency of administration *"),r.Qb(),r.Qb(),r.yc(14,O,4,2,"ion-item",46),r.Qb(),r.Qb(),r.yc(15,E,4,1,"ion-item",15),r.Rb(16,"ion-item"),r.Rb(17,"ion-label",42),r.Ac(18,"Dose *"),r.Qb(),r.Rb(19,"ion-input",47),r.Zb("ngModelChange",(function(i){return r.rc(e),r.bc().formFields.dose=i})),r.Qb(),r.Qb(),r.Rb(20,"ion-list"),r.Rb(21,"ion-radio-group",48),r.Zb("ngModelChange",(function(i){return r.rc(e),r.bc().formFields.duration=i})),r.Rb(22,"ion-list-header"),r.Rb(23,"ion-label"),r.Ac(24,"Duration of administration *"),r.Qb(),r.Qb(),r.yc(25,x,4,2,"ion-item",46),r.Qb(),r.Qb(),r.Rb(26,"ion-item"),r.Rb(27,"ion-label",42),r.Ac(28,"Reason for taking the product *"),r.Qb(),r.Rb(29,"ion-textarea",49),r.Zb("ngModelChange",(function(i){return r.rc(e),r.bc().formFields.reason=i})),r.Qb(),r.Qb(),r.Rb(30,"ion-list"),r.Rb(31,"ion-radio-group",50),r.Zb("ngModelChange",(function(i){return r.rc(e),r.bc().formFields.purchase=i})),r.Rb(32,"ion-list-header"),r.Rb(33,"ion-label"),r.Ac(34,"Where did you purchase? *"),r.Qb(),r.Qb(),r.yc(35,T,4,2,"ion-item",46),r.Qb(),r.Qb(),r.yc(36,D,4,1,"ion-item",15),r.Rb(37,"ion-list"),r.Rb(38,"ion-radio-group",51),r.Zb("ngModelChange",(function(i){return r.rc(e),r.bc().formFields.isMedication=i})),r.Rb(39,"ion-list-header"),r.Rb(40,"ion-label"),r.Ac(41,"Are you taking any medications prescribed by the doctor? *"),r.Qb(),r.Qb(),r.yc(42,I,4,2,"ion-item",46),r.Qb(),r.Qb(),r.yc(43,$,4,1,"ion-item",15),r.Rb(44,"ion-list"),r.Rb(45,"ion-radio-group",52),r.Zb("ngModelChange",(function(i){return r.rc(e),r.bc().formFields.isSideEffect=i})),r.Rb(46,"ion-list-header"),r.Rb(47,"ion-label"),r.Ac(48,"Did you experience any side effects after taken the product? *"),r.Qb(),r.Qb(),r.yc(49,z,4,2,"ion-item",46),r.Qb(),r.Qb(),r.yc(50,Z,4,1,"ion-item",15),r.Rb(51,"ion-list"),r.Rb(52,"ion-radio-group",53),r.Zb("ngModelChange",(function(i){return r.rc(e),r.bc().formFields.isStillTaking=i})),r.Rb(53,"ion-list-header"),r.Rb(54,"ion-label"),r.Ac(55,"Are you still taking both product and drug at the same time? *"),r.Qb(),r.Qb(),r.yc(56,H,4,2,"ion-item",46),r.Qb(),r.Qb(),r.Rb(57,"ion-list"),r.Rb(58,"ion-radio-group",54),r.Zb("ngModelChange",(function(i){return r.rc(e),r.bc().formFields.isConsult=i})),r.Rb(59,"ion-list-header"),r.Rb(60,"ion-label"),r.Ac(61,"Did you consult your doctor or pharmacist before taking these medications? *"),r.Qb(),r.Qb(),r.yc(62,L,4,2,"ion-item",46),r.Qb(),r.Qb(),r.Rb(63,"ion-item"),r.Rb(64,"ion-label",42),r.Ac(65,"Any questions about the product?"),r.Qb(),r.Rb(66,"ion-textarea",55),r.Zb("ngModelChange",(function(i){return r.rc(e),r.bc().formFields.question=i})),r.Qb(),r.Qb(),r.Rb(67,"ion-item",56),r.Rb(68,"ion-button",57),r.Ac(69,"Submit"),r.Qb(),r.Qb(),r.Qb()}if(2&e){const e=r.bc();r.Ab(4),r.ic("ngModel",e.formFields.productName),r.Ab(4),r.ic("ngModel",e.formFields.content),r.Ab(2),r.ic("ngModel",e.formFields.frequency),r.Ab(4),r.ic("ngForOf",e.typeOfFrequency),r.Ab(1),r.ic("ngIf","Other- Please indicate"==e.formFields.frequency),r.Ab(4),r.ic("ngModel",e.formFields.dose),r.Ab(2),r.ic("ngModel",e.formFields.duration),r.Ab(4),r.ic("ngForOf",e.typeOfDuration),r.Ab(4),r.ic("ngModel",e.formFields.reason),r.Ab(2),r.ic("ngModel",e.formFields.purchase),r.Ab(4),r.ic("ngForOf",e.typeOfPurchase),r.Ab(1),r.ic("ngIf","Other- Please indicate"==e.formFields.purchase),r.Ab(2),r.ic("ngModel",e.formFields.isMedication),r.Ab(4),r.ic("ngForOf",e.isMedication),r.Ab(1),r.ic("ngIf","Yes"==e.formFields.isMedication),r.Ab(2),r.ic("ngModel",e.formFields.isSideEffect),r.Ab(4),r.ic("ngForOf",e.isSideEffect),r.Ab(1),r.ic("ngIf","Yes"==e.formFields.isSideEffect),r.Ab(2),r.ic("ngModel",e.formFields.isStillTaking),r.Ab(4),r.ic("ngForOf",e.isStillTaking),r.Ab(2),r.ic("ngModel",e.formFields.isConsult),r.Ab(4),r.ic("ngForOf",e.isConsult),r.Ab(4),r.ic("ngModel",e.formFields.question)}}function B(e,i){if(1&e){const e=r.Sb();r.Rb(0,"span",69),r.Zb("click",(function(){r.rc(e);const i=r.bc().row;return r.bc(3).openDetailsModal(i)})),r.Qb()}if(2&e){const e=r.bc().value;r.ic("innerHTML",e,r.sc)}}function j(e,i){if(1&e){const e=r.Sb();r.Rb(0,"span",69),r.Zb("click",(function(){r.rc(e);const i=r.bc().row;return r.bc(3).openUserModal(i.email)})),r.Qb()}if(2&e){const e=r.bc().value;r.ic("innerHTML",e,r.sc)}}function W(e,i){if(1&e&&r.Nb(0,"span",70),2&e){const e=r.bc().value;r.ic("innerHTML",e,r.sc)}}function Y(e,i){if(1&e&&r.Nb(0,"span",70),2&e){const e=r.bc().value;r.ic("innerHTML",e,r.sc)}}function K(e,i){if(1&e&&(r.yc(0,B,1,1,"span",67),r.yc(1,j,1,1,"span",67),r.yc(2,W,1,1,"span",68),r.yc(3,Y,1,1,"span",68)),2&e){const e=r.bc().$implicit,i=r.bc(2);r.ic("ngIf","Product Name"===e.name),r.Ab(1),r.ic("ngIf","Email"===e.name&&"mobile user"!=i.getRole()),r.Ab(1),r.ic("ngIf","Email"===e.name&&"mobile user"==i.getRole()),r.Ab(1),r.ic("ngIf","Product Name"!==e.name&&"Email"!==e.name)}}function U(e,i){1&e&&(r.Rb(0,"ngx-datatable-column",65),r.yc(1,K,4,4,"ng-template",66),r.Qb()),2&e&&r.ic("name",i.$implicit.name)("width",200)}function G(e,i){if(1&e){const e=r.Sb();r.Rb(0,"div"),r.Rb(1,"ngx-datatable",63),r.Zb("page",(function(i){return r.rc(e),r.bc().setPage(i)}))("select",(function(i){return r.rc(e),r.bc().onSelect(i)}))("sort",(function(i){return r.rc(e),r.bc().onSort(i)})),r.yc(2,U,2,2,"ngx-datatable-column",64),r.Qb(),r.Qb()}if(2&e){const e=r.bc();r.Ab(1),r.ic("rows",e.rows)("columnMode","force")("headerHeight",50)("footerHeight",50)("externalPaging",!0)("count",e.page.total)("offset",e.page.offset)("limit",e.page.limit)("scrollbarH",!0)("selected",e.selected)("selectionType","single")("externalSorting",!0),r.Ab(1),r.ic("ngForOf",e.columns)}}const J=[{path:"",component:(()=>{class e{constructor(e,i,t,o,n,s,c){this.pagePositionService=e,this.alertController=i,this.consultationService=t,this.tokenHelper=o,this.loadingController=n,this.datepipe=s,this.modalController=c,this.pageAtTop=!0,this.searchText="",this.showForm=!1,this.segment="form",this.formFields={productName:"",content:"",frequency:"",otherFrequency:"",dose:"",duration:"",reason:"",purchase:"",otherPurchase:"",isMedication:"",medication:"",isSideEffect:"",sideEffect:"",isStillTaking:"",isConsult:"",question:"",email:this.tokenHelper.getEmail()},this.mandatory=["productName","content","frequency","dose","duration","reason","purchase","isMedication","isSideEffect","isStillTaking","isConsult"],this.typeOfFrequency=["Once a day","Twice a day","Three times a day","Once a week","Other- Please indicate"],this.typeOfDuration=["Less than 6 months","6 months - 1 year","More than 1 year","More than 5 years","More than 10 years"],this.typeOfPurchase=["Pharmacy","Wellness center","Chinese medicine shop","Multilevel Marketing (MLM)","Traditional medicine shop","Other- Please indicate"],this.isMedication=["Yes","No"],this.isSideEffect=["Yes","No"],this.isStillTaking=["Yes","No"],this.isConsult=["Yes","No"],this.page=new M,this.rows=new Array,this.columns=[{name:"Product Name"},{name:"Created At"},{name:"Email",prop:"email"}],this.selected=[],this.page.limit=10}ngOnInit(){this.innerWidth=window.innerWidth,this.setPage({offset:0})}getRole(){return this.tokenHelper.getRole()}onResize(e){this.innerWidth=window.innerWidth}onScroll(e){this.pageAtTop=this.pagePositionService.isPageAtTop(e)}checkProperties(e){for(var i in e)if(this.mandatory.includes(i)&&(null==e[i]||""==e[i]))return!1;return!0}logForm(){return Object(a.a)(this,void 0,void 0,(function*(){if(console.log(this.formFields),0==this.checkProperties(this.formFields)){const e=yield this.alertController.create({cssClass:"my-custom-class",header:"Form Incomplete",message:"Please complete all required fields (*) in the form.",buttons:["OK"]});yield e.present()}else"Other- Please indicate"===this.formFields.frequency&&(this.formFields.frequency=this.formFields.otherFrequency),"Other- Please indicate"===this.formFields.purchase&&(this.formFields.purchase=this.formFields.otherPurchase),"No"===this.formFields.isMedication&&(this.formFields.medication="-"),"No"===this.formFields.isSideEffect&&(this.formFields.sideEffect="-"),this.consultationService.submitConsultationForm({content:this.formFields.content,dose:this.formFields.dose,duration:this.formFields.duration,frequency:this.formFields.frequency,isConsult:this.formFields.isConsult,isMedication:this.formFields.isMedication,isSideEffect:this.formFields.isSideEffect,isStillTaking:this.formFields.isStillTaking,medication:this.formFields.medication,productName:this.formFields.productName,purchase:this.formFields.purchase,question:this.formFields.question,reason:this.formFields.reason,sideEffect:this.formFields.sideEffect,email:this.formFields.email}).subscribe(()=>Object(a.a)(this,void 0,void 0,(function*(){const e=yield this.alertController.create({cssClass:"my-custom-class",header:"Submit Successfully",message:"We will contact you soon.",buttons:[{text:"OK",handler:()=>{this.formFields={productName:"",content:"",frequency:"",otherFrequency:"",dose:"",duration:"",reason:"",purchase:"",otherPurchase:"",isMedication:"",medication:"",isSideEffect:"",sideEffect:"",isStillTaking:"",isConsult:"",question:"",email:""}}}]});yield e.present()})),e=>Object(a.a)(this,void 0,void 0,(function*(){console.log(e);const i=yield this.alertController.create({cssClass:"my-custom-class",header:"Fail to submit",message:"Please try again.",buttons:["OK"]});yield i.present()})))}))}setPage(e){this.page.offset=e.offset,"mobile user"==this.getRole()&&(this.page.email=this.tokenHelper.getEmail()),this.consultationService.getConsultationList(this.page).subscribe(e=>{console.log(e),this.page.offset=e.offset,this.page.total=e.total,this.page.totalPage=e.totalPage,this.rows=e.result.map(e=>({_id:e._id,productName:e.productName,content:e.content,frequency:e.frequency,otherFrequency:e.otherFrequency,dose:e.dose,duration:e.duration,reason:e.reason,purchase:e.purchase,otherPurchase:e.otherPurchase,isMedication:e.isMedication,medication:e.medication,isSideEffect:e.isSideEffect,sideEffect:e.sideEffect,isStillTaking:e.isStillTaking,isConsult:e.isConsult,question:e.question,createdAt:this.datepipe.transform(e.createdAt,"medium"),email:e.email}))},()=>{this.stopLoading()})}search(e){this.presentLoading();const i=e?e.target.value:this.searchText;this.page.offset=0,"productName"===this.page.searchBy?(this.page.productName=i,this.page.email=""):"email"===this.page.searchBy&&(this.page.productName="",this.page.email=i),"mobile user"==this.getRole()&&(this.page.email=this.tokenHelper.getEmail()),this.consultationService.getConsultationList(this.page).subscribe(e=>{this.stopLoading(),this.page.offset=e.offset,this.page.total=e.total,this.page.totalPage=e.totalPage,this.rows=e.result.map(e=>({_id:e._id,productName:e.productName,content:e.content,frequency:e.frequency,otherFrequency:e.otherFrequency,dose:e.dose,duration:e.duration,reason:e.reason,purchase:e.purchase,otherPurchase:e.otherPurchase,isMedication:e.isMedication,medication:e.medication,isSideEffect:e.isSideEffect,sideEffect:e.sideEffect,isStillTaking:e.isStillTaking,isConsult:e.isConsult,question:e.question,createdAt:this.datepipe.transform(e.createdAt,"medium"),email:e.email}))},()=>{this.stopLoading()})}onSort(e){this.page.orderBy=e.column.name.toLowerCase(),this.page.isAscending="asc"===e.newValue,this.consultationService.getConsultationList(this.page).subscribe(e=>{this.page.offset=e.offset,this.page.total=e.total,this.page.totalPage=e.totalPage,this.rows=e.user.map(e=>({_id:e._id,productName:e.productName,content:e.content,frequency:e.frequency,otherFrequency:e.otherFrequency,dose:e.dose,duration:e.duration,reason:e.reason,purchase:e.purchase,otherPurchase:e.otherPurchase,isMedication:e.isMedication,medication:e.medication,isSideEffect:e.isSideEffect,sideEffect:e.sideEffect,isStillTaking:e.isStillTaking,isConsult:e.isConsult,question:e.question,createdAt:this.datepipe.transform(e.createdAt,"medium"),email:e.email}))})}onSelect({}){}presentLoading(){return Object(a.a)(this,void 0,void 0,(function*(){console.log("start loading");const e=yield this.loadingController.create({cssClass:"my-custom-class",message:"Searching..."});yield e.present()}))}stopLoading(){return Object(a.a)(this,void 0,void 0,(function*(){console.log("stop loading"),this.loadingController.dismiss()}))}openDetailsModal(e){return Object(a.a)(this,void 0,void 0,(function*(){const i=yield this.modalController.create({cssClass:"custom-lg-modal",component:A,componentProps:{consultationDetails:e}});yield i.present()}))}openUserModal(e){return Object(a.a)(this,void 0,void 0,(function*(){console.log(e);const i=yield this.modalController.create({cssClass:"custom-lg-modal",component:Q,componentProps:{email:e}});yield i.present()}))}changeResultPerPage(e){this.page.limit=e.detail.value,this.search(!1)}switchToForm(){this.showForm=!this.showForm,this.showForm||this.setPage({offset:0})}}return e.\u0275fac=function(i){return new(i||e)(r.Mb(y.a),r.Mb(s.a),r.Mb(d),r.Mb(u.a),r.Mb(s.Q),r.Mb(o.e),r.Mb(s.R))},e.\u0275cmp=r.Gb({type:e,selectors:[["app-consultation"]],hostBindings:function(e,i){1&e&&r.Zb("resize",(function(e){return i.onResize(e)}),!1,r.qc)},decls:25,vars:11,consts:[[3,"pageAtTop"],[3,"fullscreen","scrollEvents","ionScroll"],["id","container"],["id","navi"],[1,"circle-1"],["id","infoi"],[1,"ion-no-padding","page-height","ion-margin"],["size","1"],["size","10"],[1,"home-title"],["class","home-subtitle",4,"ngIf"],["size","1",4,"ngIf"],["size","10",4,"ngIf"],["size","12",4,"ngIf"],[3,"ngSubmit",4,"ngIf"],[4,"ngIf"],[3,"innerWidth"],[1,"home-subtitle"],[2,"float","right","margin-bottom","10px",3,"click"],["size","12"],["size","0","size-md","1"],["size","10","size-md","9"],["showCancelButton","never","animated","","placeholder","Enter your search",3,"ngModel","keyup.enter","ngModelChange"],["size","2","size-md","2"],["color","primary","fill","solid",2,"margin-top","10px",3,"click"],["name","search-outline"],[3,"ngModel","ngModelChange"],[2,"margin-left","7vw","margin-right","7vw"],["lines","none","color","none"],["slot","start","mode","md","item-left","","value","productName"],[2,"margin","5px 5px"],["size","5","size-md","7"],["lines","none"],[2,"font-size","12px","color","grey"],["size","7","size-md","3"],["interface","popover","value","10",2,"font-size","12px","color","grey",3,"ionChange"],["value","10"],["value","25"],["value","50"],["value","100"],["slot","start","mode","md","item-left","","value","email"],[3,"ngSubmit"],["position","stacked"],["type","text","name","productName",3,"ngModel","ngModelChange"],["name","content",3,"ngModel","ngModelChange"],["name","frequency",3,"ngModel","ngModelChange"],["lines","none",4,"ngFor","ngForOf"],["type","text","name","dose",3,"ngModel","ngModelChange"],["name","duration",3,"ngModel","ngModelChange"],["name","reason",3,"ngModel","ngModelChange"],["name","purchase",3,"ngModel","ngModelChange"],["name","isMedication",3,"ngModel","ngModelChange"],["name","isSideEffect",3,"ngModel","ngModelChange"],["name","isStillTaking",3,"ngModel","ngModelChange"],["name","isConsult",3,"ngModel","ngModelChange"],["name","question",3,"ngModel","ngModelChange"],["lines","none",1,"ion-margin-top"],["type","submit","slot","end","size","default"],["slot","start",3,"value"],["type","text","name","otherFrequency",3,"ngModel","ngModelChange"],["type","text","name","otherPurchase",3,"ngModel","ngModelChange"],["type","text","name","medication",3,"ngModel","ngModelChange"],["type","text","name","sideEffect",3,"ngModel","ngModelChange"],["rowHeight","auto",1,"material",2,"margin-bottom","70vh",3,"rows","columnMode","headerHeight","footerHeight","externalPaging","count","offset","limit","scrollbarH","selected","selectionType","externalSorting","page","select","sort"],[3,"name","width",4,"ngFor","ngForOf"],[3,"name","width"],["ngx-datatable-cell-template",""],["class","underlined-row",3,"innerHTML","click",4,"ngIf"],[3,"innerHTML",4,"ngIf"],[1,"underlined-row",3,"innerHTML","click"],[3,"innerHTML"]],template:function(e,i){1&e&&(r.Rb(0,"ion-header"),r.Nb(1,"app-header",0),r.Qb(),r.Rb(2,"ion-content",1),r.Zb("ionScroll",(function(e){return i.onScroll(e)})),r.Rb(3,"div",2),r.Rb(4,"div",3),r.Nb(5,"span",4),r.Qb(),r.Rb(6,"div",5),r.Rb(7,"ion-grid",6),r.Rb(8,"ion-row"),r.Nb(9,"ion-col",7),r.Rb(10,"ion-col",8),r.Rb(11,"h1",9),r.Ac(12,"Consultation"),r.Qb(),r.yc(13,v,2,0,"p",10),r.Qb(),r.Nb(14,"ion-col",7),r.yc(15,P,1,0,"ion-col",11),r.yc(16,k,3,1,"ion-col",12),r.yc(17,N,1,0,"ion-col",11),r.yc(18,q,40,4,"ion-col",13),r.Nb(19,"ion-col",7),r.Rb(20,"ion-col",8),r.yc(21,_,70,23,"form",14),r.yc(22,G,3,13,"div",15),r.Qb(),r.Nb(23,"ion-col",7),r.Qb(),r.Qb(),r.Nb(24,"app-footer",16),r.Qb(),r.Qb(),r.Qb()),2&e&&(r.Ab(1),r.ic("pageAtTop",i.pageAtTop),r.Ab(1),r.ic("fullscreen",!0)("scrollEvents",!0),r.Ab(11),r.ic("ngIf","mobile user"==i.getRole()),r.Ab(2),r.ic("ngIf","mobile user"==i.getRole()),r.Ab(1),r.ic("ngIf","mobile user"==i.getRole()),r.Ab(1),r.ic("ngIf","mobile user"==i.getRole()),r.Ab(1),r.ic("ngIf","mobile user"!=i.getRole()||0==i.showForm),r.Ab(3),r.ic("ngIf","mobile user"==i.getRole()&&1==i.showForm),r.Ab(1),r.ic("ngIf","mobile user"!=i.getRole()||0==i.showForm),r.Ab(2),r.ic("innerWidth",i.innerWidth))},directives:[s.q,C.a,s.n,s.p,s.C,s.m,o.l,F.a,s.e,s.D,s.X,n.e,n.h,s.r,s.A,s.W,s.t,s.u,s.z,s.U,s.E,s.F,n.j,n.f,n.g,s.s,s.L,s.v,s.w,o.k,S.c,S.b,S.a],styles:[".circle-1[_ngcontent-%COMP%]{right:-434px;top:-554px;height:868px;width:868px}.circle-1[_ngcontent-%COMP%], .circle-2[_ngcontent-%COMP%]{position:absolute;background-color:#bbb;border-radius:50%;display:inline-block;background:#6078ea;background:linear-gradient(201deg,#6078ea,#17ead9)}.circle-2[_ngcontent-%COMP%]{left:-200px;top:1200px;height:500px;width:500px}#container[_ngcontent-%COMP%]{position:relative}#infoi[_ngcontent-%COMP%], #navi[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;top:0;left:0}#infoi[_ngcontent-%COMP%]{z-index:1}.page-height[_ngcontent-%COMP%]{min-height:100vh}.home-title[_ngcontent-%COMP%]{font-size:4rem;white-space:pre-wrap;margin-top:50px}.home-subtitle[_ngcontent-%COMP%]{font-size:1.5rem!important}.underlined-row[_ngcontent-%COMP%]{cursor:pointer}.underlined-row[_ngcontent-%COMP%]:hover{text-decoration:underline}"]}),e})()}];let X=(()=>{class e{}return e.\u0275mod=r.Kb({type:e}),e.\u0275inj=r.Jb({factory:function(i){return new(i||e)},imports:[[c.i.forChild(J)],c.i]}),e})();var V=t("iWjc");let ee=(()=>{class e{}return e.\u0275mod=r.Kb({type:e}),e.\u0275inj=r.Jb({factory:function(i){return new(i||e)},providers:[o.e],imports:[[o.c,n.a,s.O,X,S.d,V.a]]}),e})()}}]);