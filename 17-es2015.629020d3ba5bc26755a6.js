(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{m6Yz:function(t,e,i){"use strict";i.r(e),i.d(e,"ArticleManagementPageModule",(function(){return x}));var n=i("ofXK"),o=i("3Pt+"),a=i("TEn/"),r=i("tyNb"),c=i("UTcu"),l=i("fNvp"),s=i("mrSG"),b=i("dfks"),d=i("Buy9"),g=i("fXoL"),u=i("QY0l");let h=(()=>{class t{constructor(t,e,i){this.modalController=t,this.articleService=e,this.toastController=i}ngOnInit(){}dismissModal(){this.modalController.dismiss()}editArticle(){this.articleService.editArticle(this.article).subscribe(()=>Object(s.a)(this,void 0,void 0,(function*(){this.dismissModal(),(yield this.toastController.create({header:`Edit ${this.article.title} success!`,color:"success",duration:2e3})).present()})),()=>Object(s.a)(this,void 0,void 0,(function*(){(yield this.toastController.create({header:`Fail to edit ${this.article.title}!`,color:"danger",duration:2e3})).present()})))}}return t.\u0275fac=function(e){return new(e||t)(g.Lb(a.P),g.Lb(u.a),g.Lb(a.U))},t.\u0275cmp=g.Fb({type:t,selectors:[["app-edit-article"]],inputs:{article:"article"},decls:41,vars:6,consts:[["color","tertiary"],["slot","end"],["shape","round","fill","clear",3,"click"],["name","close"],["name","pencil","slot","start"],["position","floating"],["type","text",3,"ngModel","ngModelChange"],["name","apps","slot","start"],["name","calendar","slot","start"],["name","link","slot","start"],["name","chatbubble-ellipses","slot","start"],["rows","8",3,"ngModel","ngModelChange"],["lines","none",1,"ion-margin-top"],["slot","end","size","default",3,"click"],["name","save","slot","start"]],template:function(t,e){1&t&&(g.Qb(0,"ion-header"),g.Qb(1,"ion-toolbar",0),g.Qb(2,"ion-title"),g.xc(3),g.Pb(),g.Qb(4,"ion-buttons",1),g.Qb(5,"ion-button",2),g.Yb("click",(function(){return e.dismissModal()})),g.Mb(6,"ion-icon",3),g.Pb(),g.Pb(),g.Pb(),g.Pb(),g.Qb(7,"ion-content"),g.Qb(8,"ion-grid"),g.Qb(9,"ion-row"),g.Qb(10,"ion-col"),g.Qb(11,"ion-item"),g.Mb(12,"ion-icon",4),g.Qb(13,"ion-label",5),g.xc(14,"Title"),g.Pb(),g.Qb(15,"ion-input",6),g.Yb("ngModelChange",(function(t){return e.article.title=t})),g.Pb(),g.Pb(),g.Qb(16,"ion-item"),g.Mb(17,"ion-icon",7),g.Qb(18,"ion-label",5),g.xc(19,"Category"),g.Pb(),g.Qb(20,"ion-input",6),g.Yb("ngModelChange",(function(t){return e.article.category=t})),g.Pb(),g.Pb(),g.Qb(21,"ion-item"),g.Mb(22,"ion-icon",8),g.Qb(23,"ion-label",5),g.xc(24,"Year"),g.Pb(),g.Qb(25,"ion-input",6),g.Yb("ngModelChange",(function(t){return e.article.year=t})),g.Pb(),g.Pb(),g.Qb(26,"ion-item"),g.Mb(27,"ion-icon",9),g.Qb(28,"ion-label",5),g.xc(29,"Link"),g.Pb(),g.Qb(30,"ion-input",6),g.Yb("ngModelChange",(function(t){return e.article.link=t})),g.Pb(),g.Pb(),g.Qb(31,"ion-item"),g.Mb(32,"ion-icon",10),g.Qb(33,"ion-label",5),g.xc(34,"Abstract"),g.Pb(),g.Qb(35,"ion-textarea",11),g.Yb("ngModelChange",(function(t){return e.article.abstract=t})),g.Pb(),g.Pb(),g.Qb(36,"ion-item",12),g.Qb(37,"ion-button",13),g.Yb("click",(function(){return e.editArticle()})),g.Mb(38,"ion-icon",14),g.Qb(39,"ion-label"),g.xc(40,"Save"),g.Pb(),g.Pb(),g.Pb(),g.Pb(),g.Pb(),g.Pb(),g.Pb()),2&t&&(g.zb(3),g.zc("Edit ",e.article.title,""),g.zb(12),g.gc("ngModel",e.article.title),g.zb(5),g.gc("ngModel",e.article.category),g.zb(5),g.gc("ngModel",e.article.year),g.zb(5),g.gc("ngModel",e.article.link),g.zb(5),g.gc("ngModel",e.article.abstract))},directives:[a.o,a.L,a.K,a.f,a.e,a.p,a.m,a.n,a.z,a.l,a.r,a.s,a.q,a.T,o.d,o.g,a.J],styles:[""]}),t})(),p=(()=>{class t{constructor(t,e,i){this.modalController=t,this.articleService=e,this.toastController=i,this.article={_id:"",title:"",category:"",year:"",link:"",abstract:""}}ngOnInit(){}dismissModal(){this.modalController.dismiss()}createArticle(){this.articleService.createArticle(this.article).subscribe(()=>Object(s.a)(this,void 0,void 0,(function*(){this.dismissModal(),(yield this.toastController.create({header:`Add article ${this.article.title} success!`,color:"success",duration:2e3})).present()})),()=>Object(s.a)(this,void 0,void 0,(function*(){(yield this.toastController.create({header:`Fail to add article ${this.article.title}!`,color:"danger",duration:2e3})).present()})))}}return t.\u0275fac=function(e){return new(e||t)(g.Lb(a.P),g.Lb(u.a),g.Lb(a.U))},t.\u0275cmp=g.Fb({type:t,selectors:[["app-create-article"]],decls:41,vars:5,consts:[["color","tertiary"],["slot","end"],["shape","round","fill","clear",3,"click"],["name","close"],["name","pencil","slot","start"],["position","floating"],["type","text",3,"ngModel","ngModelChange"],["name","apps","slot","start"],["name","calendar","slot","start"],["name","link","slot","start"],["name","chatbubble-ellipses","slot","start"],["rows","8",3,"ngModel","ngModelChange"],["lines","none",1,"ion-margin-top"],["slot","end","size","default",3,"click"],["name","save","slot","start"]],template:function(t,e){1&t&&(g.Qb(0,"ion-header"),g.Qb(1,"ion-toolbar",0),g.Qb(2,"ion-title"),g.xc(3,"Add new article"),g.Pb(),g.Qb(4,"ion-buttons",1),g.Qb(5,"ion-button",2),g.Yb("click",(function(){return e.dismissModal()})),g.Mb(6,"ion-icon",3),g.Pb(),g.Pb(),g.Pb(),g.Pb(),g.Qb(7,"ion-content"),g.Qb(8,"ion-grid"),g.Qb(9,"ion-row"),g.Qb(10,"ion-col"),g.Qb(11,"ion-item"),g.Mb(12,"ion-icon",4),g.Qb(13,"ion-label",5),g.xc(14,"Title"),g.Pb(),g.Qb(15,"ion-input",6),g.Yb("ngModelChange",(function(t){return e.article.title=t})),g.Pb(),g.Pb(),g.Qb(16,"ion-item"),g.Mb(17,"ion-icon",7),g.Qb(18,"ion-label",5),g.xc(19,"Category"),g.Pb(),g.Qb(20,"ion-input",6),g.Yb("ngModelChange",(function(t){return e.article.category=t})),g.Pb(),g.Pb(),g.Qb(21,"ion-item"),g.Mb(22,"ion-icon",8),g.Qb(23,"ion-label",5),g.xc(24,"Year"),g.Pb(),g.Qb(25,"ion-input",6),g.Yb("ngModelChange",(function(t){return e.article.year=t})),g.Pb(),g.Pb(),g.Qb(26,"ion-item"),g.Mb(27,"ion-icon",9),g.Qb(28,"ion-label",5),g.xc(29,"Link"),g.Pb(),g.Qb(30,"ion-input",6),g.Yb("ngModelChange",(function(t){return e.article.link=t})),g.Pb(),g.Pb(),g.Qb(31,"ion-item"),g.Mb(32,"ion-icon",10),g.Qb(33,"ion-label",5),g.xc(34,"Abstract"),g.Pb(),g.Qb(35,"ion-textarea",11),g.Yb("ngModelChange",(function(t){return e.article.abstract=t})),g.Pb(),g.Pb(),g.Qb(36,"ion-item",12),g.Qb(37,"ion-button",13),g.Yb("click",(function(){return e.createArticle()})),g.Mb(38,"ion-icon",14),g.Qb(39,"ion-label"),g.xc(40,"Add"),g.Pb(),g.Pb(),g.Pb(),g.Pb(),g.Pb(),g.Pb(),g.Pb()),2&t&&(g.zb(15),g.gc("ngModel",e.article.title),g.zb(5),g.gc("ngModel",e.article.category),g.zb(5),g.gc("ngModel",e.article.year),g.zb(5),g.gc("ngModel",e.article.link),g.zb(5),g.gc("ngModel",e.article.abstract))},directives:[a.o,a.L,a.K,a.f,a.e,a.p,a.m,a.n,a.z,a.l,a.r,a.s,a.q,a.T,o.d,o.g,a.J],styles:[""]}),t})();var m=i("KJTt"),f=i("2MiI"),P=i("lDzL"),Q=i("LmEr");function y(t,e){if(1&t){const t=g.Rb();g.Qb(0,"ion-item",29),g.Qb(1,"ion-text"),g.xc(2),g.Pb(),g.Qb(3,"ion-buttons",14),g.Qb(4,"ion-button",30),g.Yb("click",(function(){g.oc(t);const i=e.$implicit;return g.ac().editArticle(i)})),g.Mb(5,"ion-icon",31),g.Qb(6,"ion-label"),g.xc(7,"Edit"),g.Pb(),g.Pb(),g.Qb(8,"ion-button",32),g.Yb("click",(function(){g.oc(t);const i=e.$implicit;return g.ac().deleteArticle(i)})),g.Mb(9,"ion-icon",33),g.Qb(10,"ion-label"),g.xc(11,"Delete"),g.Pb(),g.Pb(),g.Pb(),g.Pb()}if(2&t){const t=e.$implicit;g.zb(2),g.yc(t.title)}}function M(t,e){if(1&t&&(g.Qb(0,"span"),g.xc(1),g.Pb()),2&t){const t=g.ac().value;g.zb(1),g.yc(t)}}function v(t,e){if(1&t){const t=g.Rb();g.Qb(0,"span"),g.Qb(1,"ion-button",37),g.Yb("click",(function(){g.oc(t);const e=g.ac().row;return g.ac(2).openAbstract(e)})),g.Mb(2,"ion-icon",38),g.Pb(),g.Qb(3,"ion-button",37),g.Yb("click",(function(){g.oc(t);const e=g.ac().row;return g.ac(2).navigateToArticle(e.link)})),g.Mb(4,"ion-icon",39),g.Pb(),g.Qb(5,"ion-button",37),g.Yb("click",(function(){g.oc(t);const e=g.ac().row;return g.ac(2).navigateToAnnotation(e._id)})),g.Mb(6,"ion-icon",40),g.Pb(),g.Pb()}}function A(t,e){if(1&t&&(g.vc(0,M,2,1,"span",36),g.vc(1,v,7,0,"span",36)),2&t){const t=g.ac().$implicit;g.gc("ngIf","Actions"!==t.name),g.zb(1),g.gc("ngIf","Actions"===t.name)}}function w(t,e){1&t&&(g.Qb(0,"ngx-datatable-column",34),g.vc(1,A,2,2,"ng-template",35),g.Pb()),2&t&&g.gc("name",e.$implicit.name)("width",200)}const C=[{path:"",component:(()=>{class t{constructor(t,e,i,n,o,a){this.pagePositionService=t,this.articleService=e,this.modalController=i,this.alertController=n,this.toastController=o,this.router=a,this.pageAtTop=!0,this.page=new b.a,this.rows=new Array,this.selected=[],this.columns=[{name:"Title"},{name:"Category"},{name:"Year"},{name:"Actions"}],this.page.limit=5}ngOnInit(){this.innerWidth=window.innerWidth,this.setPage({offset:0})}onResize(t){this.innerWidth=window.innerWidth}onScroll(t){this.pageAtTop=this.pagePositionService.isPageAtTop(t)}setPage(t){this.page.offset=t.offset,this.articleService.getArticleList(this.page).subscribe(t=>{this.page.offset=t.offset,this.page.totalArticles=t.totalArticles,this.page.totalPage=t.totalPage,this.rows=t.articles.map(t=>({_id:t._id,title:t.title,category:t.category,year:t.year,abstract:t.abstract,link:t.link}))})}search(t){this.page.offset=0,"title"===this.page.searchBy?(this.page.title=t.target.value,this.page.category="",this.page.year="",this.page.abstract=""):"category"===this.page.searchBy?(this.page.title="",this.page.category=t.target.value,this.page.year="",this.page.abstract=""):"year"===this.page.searchBy?(this.page.title="",this.page.category="",this.page.year=t.target.value,this.page.abstract=""):"abstract"===this.page.searchBy&&(this.page.title="",this.page.category="",this.page.year="",this.page.abstract=t.target.value),this.articleService.getArticleList(this.page).subscribe(t=>{this.page.offset=t.offset,this.page.totalArticles=t.totalArticles,this.page.totalPage=t.totalPage,this.rows=t.articles.map(t=>({_id:t._id,title:t.title,category:t.category,year:t.year,abstract:t.abstract,link:t.link}))})}onSort(t){this.page.orderBy=t.column.name.toLowerCase(),this.page.isAscending="asc"===t.newValue,this.articleService.getArticleList(this.page).subscribe(t=>{this.page.offset=t.offset,this.page.totalArticles=t.totalArticles,this.page.totalPage=t.totalPage,this.rows=t.articles.map(t=>({_id:t._id,title:t.title,category:t.category,year:t.year,abstract:t.abstract,link:t.link}))})}onSelect({selected:t}){console.log("Select Event",t,this.selected)}openAbstract(t){return Object(s.a)(this,void 0,void 0,(function*(){const e=yield this.modalController.create({component:d.a,componentProps:{article:t}});return yield e.present()}))}navigateToArticle(t){window.open(t)}navigateToAnnotation(t){this.router.navigate(["/article-management/annotation/"+t])}openCreateArticleModal(){return Object(s.a)(this,void 0,void 0,(function*(){const t=yield this.modalController.create({component:p});return yield t.present()}))}editArticle(t){return Object(s.a)(this,void 0,void 0,(function*(){const e=yield this.modalController.create({component:h,componentProps:{article:t}});return yield e.present()}))}deleteArticle(t){return Object(s.a)(this,void 0,void 0,(function*(){const e=yield this.alertController.create({cssClass:"my-custom-class",header:"Permenantly delete "+t.title,message:"Are you sure you want to delete this article? This action cannot be undone.",buttons:[{text:"Cancel",role:"cancel"},{text:"Delete",handler:()=>{this.articleService.deleteArticle(t).subscribe(()=>Object(s.a)(this,void 0,void 0,(function*(){(yield this.toastController.create({header:`Delete ${t.title} success!`,color:"success",duration:2e3})).present()})),()=>Object(s.a)(this,void 0,void 0,(function*(){(yield this.toastController.create({header:`Fail to delete ${t.title}!`,color:"danger",duration:2e3})).present()})))}}]});yield e.present()}))}}return t.\u0275fac=function(e){return new(e||t)(g.Lb(m.a),g.Lb(u.a),g.Lb(a.P),g.Lb(a.a),g.Lb(a.U),g.Lb(r.g))},t.\u0275cmp=g.Fb({type:t,selectors:[["app-article-management"]],hostBindings:function(t,e){1&t&&g.Yb("resize",(function(t){return e.onResize(t)}),!1,g.nc)},decls:55,vars:19,consts:[[3,"pageAtTop"],[3,"fullscreen","scrollEvents","ionScroll"],["id","container"],["id","navi"],[1,"circle-1"],["id","infoi"],[1,"ion-no-padding","page-height"],["size","1"],["size","10","size-lg","6"],[1,"home-title"],[1,"home-subtitle"],["size","0","size-md","1"],["size","12","size-md","10"],["lines","none"],["slot","end"],["color","primary","fill","solid",3,"click"],["name","newspaper","slot","start"],["size","12","size-md","6"],["showCancelButton","focus","animated","","placeholder","Enter your search",3,"keyup.enter"],["size","12","size-md","4"],["interface","popover",3,"ngModel","ngModelChange"],["value","title"],["value","category"],["value","year"],["value","abstract"],["lines","none","color","light",4,"ngFor","ngForOf"],["rowHeight","auto",1,"material",2,"margin-bottom","20vh",3,"rows","columnMode","headerHeight","footerHeight","externalPaging","count","offset","limit","scrollbarH","selected","selectionType","externalSorting","page","select","sort"],[3,"name","width",4,"ngFor","ngForOf"],[3,"innerWidth"],["lines","none","color","light"],["color","warning","fill","solid",3,"click"],["name","pencil","slot","start"],["color","danger","fill","solid",3,"click"],["name","trash","slot","start"],[3,"name","width"],["ngx-datatable-cell-template",""],[4,"ngIf"],["shape","round","fill","clear",3,"click"],["name","information-circle","color","tertiary"],["name","link","color","tertiary"],["name","bookmarks","color","tertiary"]],template:function(t,e){1&t&&(g.Qb(0,"ion-header"),g.Mb(1,"app-header",0),g.Pb(),g.Qb(2,"ion-content",1),g.Yb("ionScroll",(function(t){return e.onScroll(t)})),g.Qb(3,"div",2),g.Qb(4,"div",3),g.Mb(5,"span",4),g.Pb(),g.Qb(6,"div",5),g.Qb(7,"ion-grid",6),g.Qb(8,"ion-row"),g.Mb(9,"ion-col",7),g.Qb(10,"ion-col",8),g.Qb(11,"h1",9),g.xc(12,"Search"),g.Pb(),g.Qb(13,"p",10),g.xc(14,"Let's start searching!"),g.Pb(),g.Pb(),g.Pb(),g.Qb(15,"ion-row"),g.Mb(16,"ion-col",11),g.Qb(17,"ion-col",12),g.Qb(18,"ion-item",13),g.Qb(19,"ion-buttons",14),g.Qb(20,"ion-button",15),g.Yb("click",(function(){return e.openCreateArticleModal()})),g.Mb(21,"ion-icon",16),g.Qb(22,"ion-label"),g.xc(23,"Add Article"),g.Pb(),g.Pb(),g.Pb(),g.Pb(),g.Pb(),g.Mb(24,"ion-col",11),g.Pb(),g.Qb(25,"ion-row"),g.Mb(26,"ion-col",11),g.Qb(27,"ion-col",17),g.Qb(28,"ion-searchbar",18),g.Yb("keyup.enter",(function(t){return e.search(t)})),g.Pb(),g.Pb(),g.Qb(29,"ion-col",19),g.Qb(30,"ion-item"),g.Qb(31,"ion-label"),g.xc(32,"Search by"),g.Pb(),g.Qb(33,"ion-select",20),g.Yb("ngModelChange",(function(t){return e.page.searchBy=t})),g.Qb(34,"ion-select-option",21),g.xc(35,"Title"),g.Pb(),g.Qb(36,"ion-select-option",22),g.xc(37,"Category"),g.Pb(),g.Qb(38,"ion-select-option",23),g.xc(39,"Year"),g.Pb(),g.Qb(40,"ion-select-option",24),g.xc(41,"Abstract"),g.Pb(),g.Pb(),g.Pb(),g.Pb(),g.Mb(42,"ion-col",11),g.Pb(),g.Qb(43,"ion-row"),g.Mb(44,"ion-col",11),g.Qb(45,"ion-col",12),g.vc(46,y,12,1,"ion-item",25),g.Pb(),g.Mb(47,"ion-col",11),g.Pb(),g.Qb(48,"ion-row"),g.Mb(49,"ion-col",11),g.Qb(50,"ion-col",12),g.Qb(51,"ngx-datatable",26),g.Yb("page",(function(t){return e.setPage(t)}))("select",(function(t){return e.onSelect(t)}))("sort",(function(t){return e.onSort(t)})),g.vc(52,w,2,2,"ngx-datatable-column",27),g.Pb(),g.Pb(),g.Mb(53,"ion-col",11),g.Pb(),g.Pb(),g.Mb(54,"app-footer",28),g.Pb(),g.Pb(),g.Pb()),2&t&&(g.zb(1),g.gc("pageAtTop",e.pageAtTop),g.zb(1),g.gc("fullscreen",!0)("scrollEvents",!0),g.zb(31),g.gc("ngModel",e.page.searchBy),g.zb(13),g.gc("ngForOf",e.selected),g.zb(5),g.gc("rows",e.rows)("columnMode","force")("headerHeight",50)("footerHeight",50)("externalPaging",!0)("count",e.page.totalArticles)("offset",e.page.offset)("limit",e.page.limit)("scrollbarH",!0)("selected",e.selected)("selectionType","single")("externalSorting",!0),g.zb(1),g.gc("ngForOf",e.columns),g.zb(2),g.gc("innerWidth",e.innerWidth))},directives:[a.o,f.a,a.m,a.n,a.z,a.l,a.r,a.f,a.e,a.p,a.s,a.A,a.T,a.D,a.S,o.d,o.g,a.E,n.j,P.c,Q.a,a.I,P.b,P.a,n.k],styles:[""]}),t})()},{path:"annotation/:article-id",canActivate:[c.a,l.a],data:{dataManagerOnly:!0},loadChildren:()=>Promise.all([i.e(0),i.e(18)]).then(i.bind(null,"SmNP")).then(t=>t.DataAnnotationPageModule)}];let k=(()=>{class t{}return t.\u0275mod=g.Jb({type:t}),t.\u0275inj=g.Ib({factory:function(e){return new(e||t)},imports:[[r.i.forChild(C)],r.i]}),t})();var z=i("iWjc");let x=(()=>{class t{}return t.\u0275mod=g.Jb({type:t}),t.\u0275inj=g.Ib({factory:function(e){return new(e||t)},imports:[[n.c,o.a,a.M,k,P.d,z.a]]}),t})()}}]);