function _objectDestructuringEmpty(t){if(null==t)throw new TypeError("Cannot destructure undefined")}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,n,e){return n&&_defineProperties(t.prototype,n),e&&_defineProperties(t,e),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{SmNP:function(t,n,e){"use strict";e.r(n),e.d(n,"DataAnnotationPageModule",(function(){return D}));var i=e("ofXK"),o=e("3Pt+"),r=e("TEn/"),a=e("tyNb"),c=e("mrSG"),s=e("9/eo"),l=e("VQbp"),u=e("QuQm"),b=e("nKRM"),p=e("fXoL"),d=e("KJTt"),f=e("nF61"),g=e("QY0l"),h=e("Yhfc"),m=e("2MiI"),v=e("lDzL"),R=e("LmEr");function w(t,n){if(1&t&&(p.Rb(0,"ion-row"),p.Nb(1,"ion-col",11),p.Rb(2,"ion-col",24),p.Rb(3,"ion-card"),p.Rb(4,"ion-card-header"),p.Rb(5,"ion-card-title"),p.Ac(6),p.Qb(),p.Rb(7,"ion-card-subtitle"),p.Rb(8,"strong"),p.Ac(9,"DOI"),p.Qb(),p.Ac(10),p.Qb(),p.Qb(),p.Rb(11,"ion-card-content"),p.Nb(12,"p",25),p.Qb(),p.Qb(),p.Qb(),p.Qb()),2&t){var e=p.bc();p.Ab(6),p.Cc(" ",e.articleInfo.title," "),p.Ab(4),p.Cc(" : ",e.articleInfo.doi,""),p.Ab(2),p.ic("innerHTML",e.articleInfo.abstract,p.sc)}}function A(t,n){if(1&t){var e=p.Sb();p.Rb(0,"ion-item",26),p.Nb(1,"ion-text",25),p.Rb(2,"ion-buttons",17),p.Rb(3,"ion-button",27),p.Zb("click",(function(){p.rc(e);var t=n.$implicit;return p.bc().deleteAnnotation(t)})),p.Nb(4,"ion-icon",28),p.Rb(5,"ion-label"),p.Ac(6,"Delete"),p.Qb(),p.Qb(),p.Rb(7,"ion-button",29),p.Zb("click",(function(){p.rc(e);var t=n.$implicit;return p.bc().editAnnotation(t)})),p.Nb(8,"ion-icon",30),p.Rb(9,"ion-label"),p.Ac(10,"Edit"),p.Qb(),p.Qb(),p.Qb(),p.Qb()}if(2&t){var i=n.$implicit;p.Ab(1),p.ic("innerHTML",i.plant,p.sc)}}function y(t,n){if(1&t&&p.Nb(0,"span",25),2&t){var e=p.bc().value;p.ic("innerHTML",e,p.sc)}}function Q(t,n){if(1&t){var e=p.Sb();p.Rb(0,"span"),p.Rb(1,"ion-button",34),p.Zb("click",(function(){p.rc(e);var t=p.bc().row;return p.bc(2).openInfo(t)})),p.Nb(2,"ion-icon",35),p.Qb(),p.Qb()}}function k(t,n){if(1&t&&(p.yc(0,y,1,1,"span",33),p.yc(1,Q,3,0,"span",10)),2&t){var e=p.bc().$implicit;p.ic("ngIf","More Info"!==e.name),p.Ab(1),p.ic("ngIf","More Info"===e.name)}}function I(t,n){1&t&&(p.Rb(0,"ngx-datatable-column",31),p.yc(1,k,2,2,"ng-template",32),p.Qb()),2&t&&p.ic("name",n.$implicit.name)("width",200)}function x(t,n){if(1&t){var e=p.Sb();p.Rb(0,"ion-item",26),p.Nb(1,"ion-text",25),p.Rb(2,"ion-buttons",17),p.Rb(3,"ion-button",27),p.Zb("click",(function(){p.rc(e);var t=n.$implicit;return p.bc(2).deleteAnnotation(t)})),p.Nb(4,"ion-icon",28),p.Rb(5,"ion-label"),p.Ac(6,"Delete"),p.Qb(),p.Qb(),p.Rb(7,"ion-button",29),p.Zb("click",(function(){p.rc(e);var t=n.$implicit;return p.bc(2).editAnnotation(t)})),p.Nb(8,"ion-icon",30),p.Rb(9,"ion-label"),p.Ac(10,"Edit"),p.Qb(),p.Qb(),p.Qb(),p.Qb()}if(2&t){var i=n.$implicit;p.Ab(1),p.ic("innerHTML",i.plant,p.sc)}}function C(t,n){if(1&t&&(p.Rb(0,"ion-row"),p.Nb(1,"ion-col",14),p.Rb(2,"ion-col",15),p.yc(3,x,11,1,"ion-item",20),p.Qb(),p.Nb(4,"ion-col",14),p.Qb()),2&t){var e=p.bc();p.Ab(3),p.ic("ngForOf",e.selected2)}}function M(t,n){if(1&t&&p.Nb(0,"span",25),2&t){var e=p.bc().value;p.ic("innerHTML",e,p.sc)}}function P(t,n){if(1&t){var e=p.Sb();p.Rb(0,"span"),p.Rb(1,"ion-button",34),p.Zb("click",(function(){p.rc(e);var t=p.bc().row;return p.bc(2).openInfo(t)})),p.Nb(2,"ion-icon",35),p.Qb(),p.Qb()}}function S(t,n){if(1&t&&(p.yc(0,M,1,1,"span",33),p.yc(1,P,3,0,"span",10)),2&t){var e=p.bc().$implicit;p.ic("ngIf","More Info"!==e.name),p.Ab(1),p.ic("ngIf","More Info"===e.name)}}function N(t,n){1&t&&(p.Rb(0,"ngx-datatable-column",31),p.yc(1,S,2,2,"ng-template",32),p.Qb()),2&t&&p.ic("name",n.$implicit.name)("width",200)}var O,_,H,T=[{path:"",component:(O=function(){function t(n,e,i,o,r,a,c,s){_classCallCheck(this,t),this.pagePositionService=n,this.annotationService=e,this.articleService=i,this.modalController=o,this.alertController=r,this.toastController=a,this.tokenHelper=c,this.route=s,this.pageAtTop=!0,this.isSenior=!1,this.page=new u.a,this.rows=new Array,this.page2=new u.a,this.rows2=new Array,this.selected=[],this.selected2=[],this.columns=[{name:"Product"},{name:"Plant"},{name:"Components"},{name:"Study"},{name:"Interactions"},{name:"Significance"},{name:"status"},{name:"comments"},{name:"More Info"}],this.page.limit=5,this.page2.limit=5,this.articleId=this.route.snapshot.paramMap.get("article-id"),this.isSenior="senior data manager"===this.tokenHelper.getRole()}return _createClass(t,[{key:"ionViewWillEnter",value:function(){}},{key:"ngOnInit",value:function(){this.articleId=this.route.snapshot.paramMap.get("article-id"),this.innerWidth=window.innerWidth,this.getArticleInfo(),this.setPage({offset:0}),this.setPage2({offset:0})}},{key:"onResize",value:function(t){this.innerWidth=window.innerWidth}},{key:"onScroll",value:function(t){this.pageAtTop=this.pagePositionService.isPageAtTop(t)}},{key:"getArticleInfo",value:function(){var t=this;this.articleService.getArticleInfoById(this.articleId).subscribe((function(n){t.articleInfo=n.articles[0]}))}},{key:"setPage",value:function(t){var n=this;this.page.offset=t.offset,this.page.articleId=this.articleId,this.page.requestUser=!0,this.page.approved="pending,unapproved",this.annotationService.getAnnotationList(this.page).subscribe((function(t){n.page.offset=t.offset,n.page.totalAnnotations=t.total,n.page.totalPage=t.pages,n.rows=t.result.map((function(t){return{_id:t._id,product:t.product,plant:t.plant,components:t.components,study:t.study,interactions:t.interactions,significance:t.significance,comments:t.comments,articleId:t.articles,status:t.approved,descriptions:t.descriptions}}))}))}},{key:"setPage2",value:function(t){var n=this;this.page2.offset=t.offset,this.page2.articleId=this.articleId,this.page2.approved="approved",this.annotationService.getAnnotationList(this.page2).subscribe((function(t){n.page2.offset=t.offset,n.page2.totalAnnotations=t.total,n.page2.totalPage=t.pages,n.rows2=t.result.map((function(t){return{_id:t._id,product:t.product,plant:t.plant,components:t.components,study:t.study,interactions:t.interactions,significance:t.significance,comments:t.comments,articleId:t.articles,status:t.approved,descriptions:t.descriptions}}))}))}},{key:"onSort",value:function(t){var n=this;this.page.orderBy=t.column.name.toLowerCase(),this.page.isAscending="asc"===t.newValue,this.page.articleId=this.articleId,this.page.approved="pending,unapproved",this.annotationService.getAnnotationList(this.page).subscribe((function(t){n.page.offset=t.offset,n.page.totalAnnotations=t.total,n.page.totalPage=t.pages,n.rows=t.articles.map((function(t){return{_id:t._id,product:t.product,plant:t.plant,components:t.components,study:t.study,interactions:t.interactions,significance:t.significance,comments:t.comments,articleId:t.articles,descriptions:t.descriptions}}))}))}},{key:"onSort2",value:function(t){var n=this;this.page2.orderBy=t.column.name.toLowerCase(),this.page2.isAscending="asc"===t.newValue,this.page2.articleId=this.articleId,this.page2.approved="approved",this.annotationService.getAnnotationList(this.page2).subscribe((function(t){n.page2.offset=t.offset,n.page2.totalAnnotations=t.total,n.page2.totalPage=t.pages,n.rows2=t.articles.map((function(t){return{_id:t._id,product:t.product,plant:t.plant,components:t.components,study:t.study,interactions:t.interactions,significance:t.significance,comments:t.comments,articleId:t.articles,descriptions:t.descriptions}}))}))}},{key:"onSelect",value:function(t){_objectDestructuringEmpty(t)}},{key:"onSelect2",value:function(t){_objectDestructuringEmpty(t)}},{key:"openInfo",value:function(t){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var e;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.modalController.create({cssClass:"custom-lg-modal",component:l.a,componentProps:{annotation:t}});case 2:return e=n.sent,n.next=5,e.present();case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}}),n,this)})))}},{key:"openAddAnnotationModal",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalController.create({cssClass:"custom-lg-modal",component:s.a,componentProps:{articleId:this.articleId}});case 2:return n=t.sent,t.next=5,n.present();case 5:return t.next=7,n.onWillDismiss().then((function(){e.ngOnInit()}));case 7:case"end":return t.stop()}}),t,this)})))}},{key:"editAnnotation",value:function(t){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var e,i=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.modalController.create({cssClass:"custom-lg-modal",component:b.a,componentProps:{annotation:t}});case 2:return e=n.sent,n.next=5,e.present();case 5:return n.next=7,e.onWillDismiss().then((function(){i.ngOnInit()}));case 7:case"end":return n.stop()}}),n,this)})))}},{key:"deleteAnnotation",value:function(t){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var e,i=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.alertController.create({cssClass:"my-custom-class",header:"Permenantly delete",subHeader:"Are you sure you want to delete this annotation?",message:""+t.plant,buttons:[{text:"Cancel",role:"cancel"},{text:"Delete",handler:function(){i.annotationService.deleteAnnotation(t).subscribe((function(){return Object(c.a)(i,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.toastController.create({header:"Delete selected data annotation success!",color:"success",duration:2e3});case 2:t.sent.present(),this.ngOnInit();case 4:case"end":return t.stop()}}),t,this)})))}),(function(){return Object(c.a)(i,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.toastController.create({header:"Fail to delete selected data annotation!",color:"danger",duration:2e3});case 2:t.sent.present(),this.ngOnInit();case 4:case"end":return t.stop()}}),t,this)})))}))}}]});case 2:return e=n.sent,n.next=5,e.present();case 5:case"end":return n.stop()}}),n,this)})))}}]),t}(),O.\u0275fac=function(t){return new(t||O)(p.Mb(d.a),p.Mb(f.a),p.Mb(g.a),p.Mb(r.R),p.Mb(r.a),p.Mb(r.Y),p.Mb(h.a),p.Mb(a.a))},O.\u0275cmp=p.Gb({type:O,selectors:[["app-data-annotation"]],hostBindings:function(t,n){1&t&&p.Zb("resize",(function(t){return n.onResize(t)}),!1,p.qc)},decls:51,vars:33,consts:[[3,"pageAtTop"],["fixed",""],["slot","start"],["defaultHref","/article-management"],[3,"fullscreen","scrollEvents","ionScroll"],["id","container"],["id","navi"],[1,"circle-1"],["id","infoi"],[1,"ion-no-padding","page-height"],[4,"ngIf"],["size","1"],["size","10","size-lg","6"],[1,"home-title"],["size","0","size-md","1"],["size","12","size-md","10"],["lines","none"],["slot","end"],["color","primary","fill","solid",3,"click"],["name","bookmark","slot","start"],["lines","none","color","light",4,"ngFor","ngForOf"],["rowHeight","auto",1,"material",2,"margin-bottom","20vh",3,"rows","columnMode","headerHeight","footerHeight","externalPaging","count","offset","limit","scrollbarH","selected","selectionType","externalSorting","page","select","sort"],[3,"name","width",4,"ngFor","ngForOf"],[3,"innerWidth"],["size","10"],[3,"innerHTML"],["lines","none","color","light"],["color","danger","fill","solid",3,"click"],["name","trash","slot","start"],["color","warning","fill","solid",3,"click"],["name","create-outline"],[3,"name","width"],["ngx-datatable-cell-template",""],[3,"innerHTML",4,"ngIf"],["shape","round","fill","clear",3,"click"],["name","information-circle","color","tertiary"]],template:function(t,n){1&t&&(p.Rb(0,"ion-header"),p.Nb(1,"app-header",0),p.Rb(2,"ion-toolbar",1),p.Rb(3,"ion-buttons",2),p.Nb(4,"ion-back-button",3),p.Qb(),p.Qb(),p.Qb(),p.Rb(5,"ion-content",4),p.Zb("ionScroll",(function(t){return n.onScroll(t)})),p.Rb(6,"div",5),p.Rb(7,"div",6),p.Nb(8,"span",7),p.Qb(),p.Rb(9,"div",8),p.Rb(10,"ion-grid",9),p.yc(11,w,13,3,"ion-row",10),p.Rb(12,"ion-row"),p.Nb(13,"ion-col",11),p.Rb(14,"ion-col",12),p.Rb(15,"h1",13),p.Ac(16,"My Pending/Unapproved Data Annotation"),p.Qb(),p.Qb(),p.Qb(),p.Rb(17,"ion-row"),p.Nb(18,"ion-col",14),p.Rb(19,"ion-col",15),p.Rb(20,"ion-item",16),p.Rb(21,"ion-buttons",17),p.Rb(22,"ion-button",18),p.Zb("click",(function(){return n.openAddAnnotationModal()})),p.Nb(23,"ion-icon",19),p.Rb(24,"ion-label"),p.Ac(25,"Add Annotation"),p.Qb(),p.Qb(),p.Qb(),p.Qb(),p.Qb(),p.Nb(26,"ion-col",14),p.Qb(),p.Rb(27,"ion-row"),p.Nb(28,"ion-col",14),p.Rb(29,"ion-col",15),p.yc(30,A,11,1,"ion-item",20),p.Qb(),p.Nb(31,"ion-col",14),p.Qb(),p.Rb(32,"ion-row"),p.Nb(33,"ion-col",14),p.Rb(34,"ion-col",15),p.Rb(35,"ngx-datatable",21),p.Zb("page",(function(t){return n.setPage(t)}))("select",(function(t){return n.onSelect(t)}))("sort",(function(t){return n.onSort(t)})),p.yc(36,I,2,2,"ngx-datatable-column",22),p.Qb(),p.Qb(),p.Nb(37,"ion-col",14),p.Qb(),p.Rb(38,"ion-row"),p.Nb(39,"ion-col",11),p.Rb(40,"ion-col",12),p.Rb(41,"h1",13),p.Ac(42,"Approved Data Annotation"),p.Qb(),p.Qb(),p.Qb(),p.yc(43,C,5,1,"ion-row",10),p.Rb(44,"ion-row"),p.Nb(45,"ion-col",14),p.Rb(46,"ion-col",15),p.Rb(47,"ngx-datatable",21),p.Zb("page",(function(t){return n.setPage2(t)}))("select",(function(t){return n.onSelect2(t)}))("sort",(function(t){return n.onSort2(t)})),p.yc(48,N,2,2,"ngx-datatable-column",22),p.Qb(),p.Qb(),p.Nb(49,"ion-col",14),p.Qb(),p.Qb(),p.Nb(50,"app-footer",23),p.Qb(),p.Qb(),p.Qb()),2&t&&(p.Ab(1),p.ic("pageAtTop",n.pageAtTop),p.Ab(4),p.ic("fullscreen",!0)("scrollEvents",!0),p.Ab(6),p.ic("ngIf",n.articleInfo),p.Ab(19),p.ic("ngForOf",n.selected),p.Ab(5),p.ic("rows",n.rows)("columnMode","force")("headerHeight",50)("footerHeight",50)("externalPaging",!0)("count",n.page.totalAnnotations)("offset",n.page.offset)("limit",n.page.limit)("scrollbarH",!0)("selected",n.selected)("selectionType","single")("externalSorting",!0),p.Ab(1),p.ic("ngForOf",n.columns),p.Ab(7),p.ic("ngIf",n.isSenior),p.Ab(4),p.ic("rows",n.rows2)("columnMode","force")("headerHeight",50)("footerHeight",50)("externalPaging",!0)("count",n.page2.totalAnnotations)("offset",n.page2.offset)("limit",n.page2.limit)("scrollbarH",!0)("selected",n.selected2)("selectionType","single")("externalSorting",!0),p.Ab(1),p.ic("ngForOf",n.columns),p.Ab(2),p.ic("innerWidth",n.innerWidth))},directives:[r.q,m.a,r.N,r.f,r.c,r.d,r.n,r.p,i.l,r.C,r.m,r.t,r.e,r.r,r.u,i.k,v.c,R.a,r.g,r.i,r.k,r.j,r.h,r.K,v.b,v.a],styles:[".circle-1[_ngcontent-%COMP%]{right:-434px;top:-554px;height:868px;width:868px}.circle-1[_ngcontent-%COMP%], .circle-2[_ngcontent-%COMP%]{position:absolute;background-color:#bbb;border-radius:50%;display:inline-block;background:#6078ea;background:linear-gradient(201deg,#6078ea,#17ead9)}.circle-2[_ngcontent-%COMP%]{left:-200px;top:1200px;height:500px;width:500px}#container[_ngcontent-%COMP%]{position:relative}#infoi[_ngcontent-%COMP%], #navi[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;top:0;left:0}#infoi[_ngcontent-%COMP%]{z-index:1}.page-height[_ngcontent-%COMP%]{min-height:100vh}"]}),O)}],L=((_=function t(){_classCallCheck(this,t)}).\u0275mod=p.Kb({type:_}),_.\u0275inj=p.Jb({factory:function(t){return new(t||_)},imports:[[a.i.forChild(T)],a.i]}),_),j=e("iWjc"),D=((H=function t(){_classCallCheck(this,t)}).\u0275mod=p.Kb({type:H}),H.\u0275inj=p.Jb({factory:function(t){return new(t||H)},imports:[[i.c,o.a,r.O,L,v.d,j.a]]}),H)}}]);