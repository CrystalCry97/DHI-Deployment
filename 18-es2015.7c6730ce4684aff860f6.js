(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{SmNP:function(t,n,o){"use strict";o.r(n),o.d(n,"DataAnnotationPageModule",(function(){return k}));var e=o("ofXK"),i=o("3Pt+"),a=o("TEn/"),s=o("tyNb"),c=o("mrSG"),r=o("fXoL"),l=o("nF61");function b(t,n){if(1&t&&(r.Qb(0,"ion-select-option",16),r.xc(1),r.Pb()),2&t){const t=n.$implicit;r.gc("value",t),r.zb(1),r.yc(t)}}function d(t,n){if(1&t&&(r.Qb(0,"ion-select-option",16),r.xc(1),r.Pb()),2&t){const t=n.$implicit;r.gc("value",t),r.zb(1),r.yc(t)}}function g(t,n){if(1&t&&(r.Qb(0,"ion-select-option",16),r.xc(1),r.Pb()),2&t){const t=n.$implicit;r.gc("value",t),r.zb(1),r.yc(t)}}let p=(()=>{class t{constructor(t,n,o){this.modalController=t,this.annotationService=n,this.toastController=o,this.typeOfStudy=new Array,this.typeOfInteractions=new Array,this.significance=new Array,this.annotation={_id:"",plant:"",components:"",study:"",interactions:"",significance:"",comments:"",articleId:""},this.getAttributes()}ngOnInit(){this.annotation.articleId=this.articleId}getAttributes(){this.annotationService.getAttributes().subscribe(t=>{this.typeOfStudy=t.find(t=>"Type of Study"===t.attr_name).attr_value,this.typeOfInteractions=t.find(t=>"Type of Interactions"===t.attr_name).attr_value,this.significance=t.find(t=>"Significance"===t.attr_name).attr_value,console.log(this.typeOfStudy),console.log(this.typeOfInteractions),console.log(this.significance)})}dismissModal(){this.modalController.dismiss()}addAnnotation(){this.annotationService.addAnnotation(this.annotation).subscribe(()=>Object(c.a)(this,void 0,void 0,(function*(){this.dismissModal(),(yield this.toastController.create({header:"Add data annotation success!",color:"success",duration:2e3})).present()})),()=>Object(c.a)(this,void 0,void 0,(function*(){(yield this.toastController.create({header:"Fail to add data annotation!",color:"danger",duration:2e3})).present()})))}}return t.\u0275fac=function(n){return new(n||t)(r.Lb(a.P),r.Lb(l.a),r.Lb(a.U))},t.\u0275cmp=r.Fb({type:t,selectors:[["app-add-annotation"]],inputs:{articleId:"articleId"},decls:44,vars:8,consts:[["color","tertiary"],["slot","end"],["shape","round","fill","clear",3,"click"],["name","close"],["name","leaf","slot","start"],["position","floating"],["type","text",3,"ngModel","ngModelChange"],["name","logo-web-component","slot","start"],["name","book","slot","start"],["interface","popover",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","chatbubbles","slot","start"],["name","thumbs-up","slot","start"],["lines","none",1,"ion-margin-top"],["slot","end","size","default",3,"click"],["name","save","slot","start"],[3,"value"]],template:function(t,n){1&t&&(r.Qb(0,"ion-header"),r.Qb(1,"ion-toolbar",0),r.Qb(2,"ion-title"),r.xc(3,"Add Annotation"),r.Pb(),r.Qb(4,"ion-buttons",1),r.Qb(5,"ion-button",2),r.Yb("click",(function(){return n.dismissModal()})),r.Mb(6,"ion-icon",3),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(7,"ion-content"),r.Qb(8,"ion-grid"),r.Qb(9,"ion-row"),r.Qb(10,"ion-col"),r.Qb(11,"ion-item"),r.Mb(12,"ion-icon",4),r.Qb(13,"ion-label",5),r.xc(14,"Name of Plant"),r.Pb(),r.Qb(15,"ion-input",6),r.Yb("ngModelChange",(function(t){return n.annotation.plant=t})),r.Pb(),r.Pb(),r.Qb(16,"ion-item"),r.Mb(17,"ion-icon",7),r.Qb(18,"ion-label",5),r.xc(19,"Active Components"),r.Pb(),r.Qb(20,"ion-input",6),r.Yb("ngModelChange",(function(t){return n.annotation.components=t})),r.Pb(),r.Pb(),r.Qb(21,"ion-item"),r.Mb(22,"ion-icon",8),r.Qb(23,"ion-label",5),r.xc(24,"Type of Study"),r.Pb(),r.Qb(25,"ion-select",9),r.Yb("ngModelChange",(function(t){return n.annotation.study=t})),r.vc(26,b,2,2,"ion-select-option",10),r.Pb(),r.Pb(),r.Qb(27,"ion-item"),r.Mb(28,"ion-icon",11),r.Qb(29,"ion-label",5),r.xc(30,"Type of Interactions"),r.Pb(),r.Qb(31,"ion-select",9),r.Yb("ngModelChange",(function(t){return n.annotation.interactions=t})),r.vc(32,d,2,2,"ion-select-option",10),r.Pb(),r.Pb(),r.Qb(33,"ion-item"),r.Mb(34,"ion-icon",12),r.Qb(35,"ion-label",5),r.xc(36,"Significance"),r.Pb(),r.Qb(37,"ion-select",9),r.Yb("ngModelChange",(function(t){return n.annotation.significance=t})),r.vc(38,g,2,2,"ion-select-option",10),r.Pb(),r.Pb(),r.Qb(39,"ion-item",13),r.Qb(40,"ion-button",14),r.Yb("click",(function(){return n.addAnnotation()})),r.Mb(41,"ion-icon",15),r.Qb(42,"ion-label"),r.xc(43,"Add"),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb()),2&t&&(r.zb(15),r.gc("ngModel",n.annotation.plant),r.zb(5),r.gc("ngModel",n.annotation.components),r.zb(5),r.gc("ngModel",n.annotation.study),r.zb(1),r.gc("ngForOf",n.typeOfStudy),r.zb(5),r.gc("ngModel",n.annotation.interactions),r.zb(1),r.gc("ngForOf",n.typeOfInteractions),r.zb(5),r.gc("ngModel",n.annotation.significance),r.zb(1),r.gc("ngForOf",n.significance))},directives:[a.o,a.L,a.K,a.f,a.e,a.p,a.m,a.n,a.z,a.l,a.r,a.s,a.q,a.T,i.d,i.g,a.D,a.S,e.j,a.E],styles:[""]}),t})();var u=o("VQbp"),f=o("QuQm"),h=o("KJTt"),m=o("2MiI"),P=o("lDzL"),Q=o("LmEr");function y(t,n){if(1&t){const t=r.Rb();r.Qb(0,"ion-item",24),r.Qb(1,"ion-text"),r.xc(2),r.Pb(),r.Qb(3,"ion-buttons",16),r.Qb(4,"ion-button",25),r.Yb("click",(function(){r.oc(t);const o=n.$implicit;return r.ac().deleteAnnotation(o)})),r.Mb(5,"ion-icon",26),r.Qb(6,"ion-label"),r.xc(7,"Delete"),r.Pb(),r.Pb(),r.Pb(),r.Pb()}if(2&t){const t=n.$implicit;r.zb(2),r.Ac("",t.plant," and ",t.components,"")}}function v(t,n){if(1&t&&(r.Qb(0,"span"),r.xc(1),r.Pb()),2&t){const t=r.ac().value;r.zb(1),r.yc(t)}}function M(t,n){if(1&t){const t=r.Rb();r.Qb(0,"span"),r.Qb(1,"ion-button",30),r.Yb("click",(function(){r.oc(t);const n=r.ac().row;return r.ac(2).openInfo(n)})),r.Mb(2,"ion-icon",31),r.Pb(),r.Pb()}}function w(t,n){if(1&t&&(r.vc(0,v,2,1,"span",29),r.vc(1,M,3,0,"span",29)),2&t){const t=r.ac().$implicit;r.gc("ngIf","More Info"!==t.name),r.zb(1),r.gc("ngIf","More Info"===t.name)}}function A(t,n){1&t&&(r.Qb(0,"ngx-datatable-column",27),r.vc(1,w,2,2,"ng-template",28),r.Pb()),2&t&&r.gc("name",n.$implicit.name)("width",200)}function I(t,n){if(1&t&&(r.Qb(0,"span"),r.xc(1),r.Pb()),2&t){const t=r.ac().value;r.zb(1),r.yc(t)}}function S(t,n){if(1&t){const t=r.Rb();r.Qb(0,"span"),r.Qb(1,"ion-button",30),r.Yb("click",(function(){r.oc(t);const n=r.ac().row;return r.ac(2).openInfo(n)})),r.Mb(2,"ion-icon",31),r.Pb(),r.Pb()}}function z(t,n){if(1&t&&(r.vc(0,I,2,1,"span",29),r.vc(1,S,3,0,"span",29)),2&t){const t=r.ac().$implicit;r.gc("ngIf","More Info"!==t.name),r.zb(1),r.gc("ngIf","More Info"===t.name)}}function x(t,n){1&t&&(r.Qb(0,"ngx-datatable-column",27),r.vc(1,z,2,2,"ng-template",28),r.Pb()),2&t&&r.gc("name",n.$implicit.name)("width",200)}const C=[{path:"",component:(()=>{class t{constructor(t,n,o,e,i,a){this.pagePositionService=t,this.annotationService=n,this.modalController=o,this.alertController=e,this.toastController=i,this.route=a,this.pageAtTop=!0,this.page=new f.a,this.rows=new Array,this.page2=new f.a,this.rows2=new Array,this.selected=[],this.columns=[{name:"Plant"},{name:"Components"},{name:"Study"},{name:"Interactions"},{name:"Significance"}],this.page.limit=5,this.page2.limit=5,this.articleId=this.route.snapshot.paramMap.get("article-id")}ionViewWillEnter(){}ngOnInit(){this.articleId=this.route.snapshot.paramMap.get("article-id"),console.log(this.articleId),this.innerWidth=window.innerWidth,this.setPage({offset:0}),this.setPage2({offset:0})}onResize(t){this.innerWidth=window.innerWidth}onScroll(t){this.pageAtTop=this.pagePositionService.isPageAtTop(t)}setPage(t){this.page.offset=t.offset,this.page.articleId=this.articleId,this.page.approved=!1,this.annotationService.getAnnotationList(this.page).subscribe(t=>{this.page.offset=t.offset,this.page.totalAnnotations=t.total,this.page.totalPage=t.pages,this.rows=t.result.map(t=>({_id:t._id,plant:t.plant,components:t.components,study:t.study,interactions:t.interactions,significance:t.significance,comments:t.comments,articleId:t.articles}))})}setPage2(t){this.page2.offset=t.offset,this.page2.articleId=this.articleId,this.page2.approved=!0,this.annotationService.getAnnotationList(this.page2).subscribe(t=>{console.log(t),this.page2.offset=t.offset,this.page2.totalAnnotations=t.total,this.page2.totalPage=t.pages,this.rows2=t.result.map(t=>({_id:t._id,plant:t.plant,components:t.components,study:t.study,interactions:t.interactions,significance:t.significance,comments:t.comments,articleId:t.articles}))})}onSort(t){this.page.orderBy=t.column.name.toLowerCase(),this.page.isAscending="asc"===t.newValue,this.page.articleId=this.articleId,this.page.approved=!1,this.annotationService.getAnnotationList(this.page).subscribe(t=>{this.page.offset=t.offset,this.page.totalAnnotations=t.total,this.page.totalPage=t.pages,this.rows=t.articles.map(t=>({_id:t._id,plant:t.plant,components:t.components,study:t.study,interactions:t.interactions,significance:t.significance,comments:t.comments,articleId:t.articles}))})}onSort2(t){this.page2.orderBy=t.column.name.toLowerCase(),this.page2.isAscending="asc"===t.newValue,this.page2.articleId=this.articleId,this.page2.approved=!1,this.annotationService.getAnnotationList(this.page2).subscribe(t=>{this.page2.offset=t.offset,this.page2.totalAnnotations=t.total,this.page2.totalPage=t.pages,this.rows2=t.articles.map(t=>({_id:t._id,plant:t.plant,components:t.components,study:t.study,interactions:t.interactions,significance:t.significance,comments:t.comments,articleId:t.articles}))})}onSelect({selected:t}){console.log("Select Event",t,this.selected)}openInfo(t){return Object(c.a)(this,void 0,void 0,(function*(){const n=yield this.modalController.create({component:u.a,componentProps:{annotation:t}});return yield n.present()}))}openAddAnnotationModal(){return Object(c.a)(this,void 0,void 0,(function*(){const t=yield this.modalController.create({component:p,componentProps:{articleId:this.articleId}});return yield t.present()}))}deleteAnnotation(t){return Object(c.a)(this,void 0,void 0,(function*(){const n=yield this.alertController.create({cssClass:"my-custom-class",header:"Permenantly delete selected data annotation",message:"Are you sure you want to delete this data annotation? This action cannot be undone.",buttons:[{text:"Cancel",role:"cancel"},{text:"Delete",handler:()=>{this.annotationService.deleteAnnotation(t).subscribe(()=>Object(c.a)(this,void 0,void 0,(function*(){(yield this.toastController.create({header:"Delete selected data annotation success!",color:"success",duration:2e3})).present()})),()=>Object(c.a)(this,void 0,void 0,(function*(){(yield this.toastController.create({header:"Fail to delete selected data annotation!",color:"danger",duration:2e3})).present()})))}}]});yield n.present()}))}}return t.\u0275fac=function(n){return new(n||t)(r.Lb(h.a),r.Lb(l.a),r.Lb(a.P),r.Lb(a.a),r.Lb(a.U),r.Lb(s.a))},t.\u0275cmp=r.Fb({type:t,selectors:[["app-data-annotation"]],hostBindings:function(t,n){1&t&&r.Yb("resize",(function(t){return n.onResize(t)}),!1,r.nc)},decls:49,vars:29,consts:[[3,"pageAtTop"],["fixed",""],["slot","start"],["defaultHref","/article-management"],[3,"fullscreen","scrollEvents","ionScroll"],["id","container"],["id","navi"],[1,"circle-1"],["id","infoi"],[1,"ion-no-padding","page-height"],["size","1"],["size","10","size-lg","6"],[1,"home-title"],["size","0","size-md","1"],["size","12","size-md","10"],["lines","none"],["slot","end"],["color","primary","fill","solid",3,"click"],["name","bookmark","slot","start"],["lines","none","color","light",4,"ngFor","ngForOf"],["rowHeight","auto",1,"material",2,"margin-bottom","20vh",3,"rows","columnMode","headerHeight","footerHeight","externalPaging","count","offset","limit","scrollbarH","selected","selectionType","externalSorting","page","select","sort"],[3,"name","width",4,"ngFor","ngForOf"],["rowHeight","auto",1,"material",2,"margin-bottom","20vh",3,"rows","columnMode","headerHeight","footerHeight","externalPaging","count","offset","limit","scrollbarH","externalSorting","page","sort"],[3,"innerWidth"],["lines","none","color","light"],["color","danger","fill","solid",3,"click"],["name","trash","slot","start"],[3,"name","width"],["ngx-datatable-cell-template",""],[4,"ngIf"],["shape","round","fill","clear",3,"click"],["name","information-circle","color","tertiary"]],template:function(t,n){1&t&&(r.Qb(0,"ion-header"),r.Mb(1,"app-header",0),r.Qb(2,"ion-toolbar",1),r.Qb(3,"ion-buttons",2),r.Mb(4,"ion-back-button",3),r.Pb(),r.Pb(),r.Pb(),r.Qb(5,"ion-content",4),r.Yb("ionScroll",(function(t){return n.onScroll(t)})),r.Qb(6,"div",5),r.Qb(7,"div",6),r.Mb(8,"span",7),r.Pb(),r.Qb(9,"div",8),r.Qb(10,"ion-grid",9),r.Qb(11,"ion-row"),r.Mb(12,"ion-col",10),r.Qb(13,"ion-col",11),r.Qb(14,"h1",12),r.xc(15,"My Pending Data Annotation"),r.Pb(),r.Pb(),r.Pb(),r.Qb(16,"ion-row"),r.Mb(17,"ion-col",13),r.Qb(18,"ion-col",14),r.Qb(19,"ion-item",15),r.Qb(20,"ion-buttons",16),r.Qb(21,"ion-button",17),r.Yb("click",(function(){return n.openAddAnnotationModal()})),r.Mb(22,"ion-icon",18),r.Qb(23,"ion-label"),r.xc(24,"Add Annotation"),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Mb(25,"ion-col",13),r.Pb(),r.Qb(26,"ion-row"),r.Mb(27,"ion-col",13),r.Qb(28,"ion-col",14),r.vc(29,y,8,2,"ion-item",19),r.Pb(),r.Mb(30,"ion-col",13),r.Pb(),r.Qb(31,"ion-row"),r.Mb(32,"ion-col",13),r.Qb(33,"ion-col",14),r.Qb(34,"ngx-datatable",20),r.Yb("page",(function(t){return n.setPage(t)}))("select",(function(t){return n.onSelect(t)}))("sort",(function(t){return n.onSort(t)})),r.vc(35,A,2,2,"ngx-datatable-column",21),r.Pb(),r.Pb(),r.Mb(36,"ion-col",13),r.Pb(),r.Qb(37,"ion-row"),r.Mb(38,"ion-col",10),r.Qb(39,"ion-col",11),r.Qb(40,"h1",12),r.xc(41,"All Approved Data Annotation"),r.Pb(),r.Pb(),r.Pb(),r.Qb(42,"ion-row"),r.Mb(43,"ion-col",13),r.Qb(44,"ion-col",14),r.Qb(45,"ngx-datatable",22),r.Yb("page",(function(t){return n.setPage2(t)}))("sort",(function(t){return n.onSort2(t)})),r.vc(46,x,2,2,"ngx-datatable-column",21),r.Pb(),r.Pb(),r.Mb(47,"ion-col",13),r.Pb(),r.Pb(),r.Mb(48,"app-footer",23),r.Pb(),r.Pb(),r.Pb()),2&t&&(r.zb(1),r.gc("pageAtTop",n.pageAtTop),r.zb(4),r.gc("fullscreen",!0)("scrollEvents",!0),r.zb(24),r.gc("ngForOf",n.selected),r.zb(5),r.gc("rows",n.rows)("columnMode","force")("headerHeight",50)("footerHeight",50)("externalPaging",!0)("count",n.page.totalAnnotations)("offset",n.page.offset)("limit",n.page.limit)("scrollbarH",!0)("selected",n.selected)("selectionType","single")("externalSorting",!0),r.zb(1),r.gc("ngForOf",n.columns),r.zb(10),r.gc("rows",n.rows2)("columnMode","force")("headerHeight",50)("footerHeight",50)("externalPaging",!0)("count",n.page2.totalAnnotations)("offset",n.page2.offset)("limit",n.page2.limit)("scrollbarH",!0)("externalSorting",!0),r.zb(1),r.gc("ngForOf",n.columns),r.zb(2),r.gc("innerWidth",n.innerWidth))},directives:[a.o,m.a,a.L,a.f,a.c,a.d,a.m,a.n,a.z,a.l,a.r,a.e,a.p,a.s,e.j,P.c,Q.a,a.I,P.b,P.a,e.k],styles:[""]}),t})()}];let O=(()=>{class t{}return t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({factory:function(n){return new(n||t)},imports:[[s.i.forChild(C)],s.i]}),t})();var L=o("iWjc");let k=(()=>{class t{}return t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({factory:function(n){return new(n||t)},imports:[[e.c,i.a,a.M,O,P.d,L.a]]}),t})()}}]);