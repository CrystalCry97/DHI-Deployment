function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(n,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}function _createClass(n,t,e){return t&&_defineProperties(n.prototype,t),e&&_defineProperties(n,e),n}(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{SmNP:function(n,t,e){"use strict";e.r(t),e.d(t,"DataAnnotationPageModule",(function(){return T}));var o=e("ofXK"),i=e("3Pt+"),a=e("TEn/"),r=e("tyNb"),c=e("mrSG"),s=e("fXoL"),l=e("nF61");function u(n,t){if(1&n&&(s.Qb(0,"ion-select-option",16),s.xc(1),s.Pb()),2&n){var e=t.$implicit;s.gc("value",e),s.zb(1),s.yc(e)}}function b(n,t){if(1&n&&(s.Qb(0,"ion-select-option",16),s.xc(1),s.Pb()),2&n){var e=t.$implicit;s.gc("value",e),s.zb(1),s.yc(e)}}function f(n,t){if(1&n&&(s.Qb(0,"ion-select-option",16),s.xc(1),s.Pb()),2&n){var e=t.$implicit;s.gc("value",e),s.zb(1),s.yc(e)}}var d,p=((d=function(){function n(t,e,o){_classCallCheck(this,n),this.modalController=t,this.annotationService=e,this.toastController=o,this.typeOfStudy=new Array,this.typeOfInteractions=new Array,this.significance=new Array,this.annotation={_id:"",plant:"",components:"",study:"",interactions:"",significance:"",comments:"",articleId:""},this.getAttributes()}return _createClass(n,[{key:"ngOnInit",value:function(){this.annotation.articleId=this.articleId}},{key:"getAttributes",value:function(){var n=this;this.annotationService.getAttributes().subscribe((function(t){n.typeOfStudy=t.find((function(n){return"Type of Study"===n.attr_name})).attr_value,n.typeOfInteractions=t.find((function(n){return"Type of Interactions"===n.attr_name})).attr_value,n.significance=t.find((function(n){return"Significance"===n.attr_name})).attr_value,console.log(n.typeOfStudy),console.log(n.typeOfInteractions),console.log(n.significance)}))}},{key:"dismissModal",value:function(){this.modalController.dismiss()}},{key:"addAnnotation",value:function(){var n=this;this.annotationService.addAnnotation(this.annotation).subscribe((function(){return Object(c.a)(n,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.dismissModal(),n.next=3,this.toastController.create({header:"Add data annotation success!",color:"success",duration:2e3});case 3:n.sent.present();case 4:case"end":return n.stop()}}),n,this)})))}),(function(){return Object(c.a)(n,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.toastController.create({header:"Fail to add data annotation!",color:"danger",duration:2e3});case 2:n.sent.present();case 3:case"end":return n.stop()}}),n,this)})))}))}}]),n}()).\u0275fac=function(n){return new(n||d)(s.Lb(a.P),s.Lb(l.a),s.Lb(a.U))},d.\u0275cmp=s.Fb({type:d,selectors:[["app-add-annotation"]],inputs:{articleId:"articleId"},decls:44,vars:8,consts:[["color","tertiary"],["slot","end"],["shape","round","fill","clear",3,"click"],["name","close"],["name","leaf","slot","start"],["position","floating"],["type","text",3,"ngModel","ngModelChange"],["name","logo-web-component","slot","start"],["name","book","slot","start"],["interface","popover",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","chatbubbles","slot","start"],["name","thumbs-up","slot","start"],["lines","none",1,"ion-margin-top"],["slot","end","size","default",3,"click"],["name","save","slot","start"],[3,"value"]],template:function(n,t){1&n&&(s.Qb(0,"ion-header"),s.Qb(1,"ion-toolbar",0),s.Qb(2,"ion-title"),s.xc(3,"Add Annotation"),s.Pb(),s.Qb(4,"ion-buttons",1),s.Qb(5,"ion-button",2),s.Yb("click",(function(){return t.dismissModal()})),s.Mb(6,"ion-icon",3),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Qb(7,"ion-content"),s.Qb(8,"ion-grid"),s.Qb(9,"ion-row"),s.Qb(10,"ion-col"),s.Qb(11,"ion-item"),s.Mb(12,"ion-icon",4),s.Qb(13,"ion-label",5),s.xc(14,"Name of Plant"),s.Pb(),s.Qb(15,"ion-input",6),s.Yb("ngModelChange",(function(n){return t.annotation.plant=n})),s.Pb(),s.Pb(),s.Qb(16,"ion-item"),s.Mb(17,"ion-icon",7),s.Qb(18,"ion-label",5),s.xc(19,"Active Components"),s.Pb(),s.Qb(20,"ion-input",6),s.Yb("ngModelChange",(function(n){return t.annotation.components=n})),s.Pb(),s.Pb(),s.Qb(21,"ion-item"),s.Mb(22,"ion-icon",8),s.Qb(23,"ion-label",5),s.xc(24,"Type of Study"),s.Pb(),s.Qb(25,"ion-select",9),s.Yb("ngModelChange",(function(n){return t.annotation.study=n})),s.vc(26,u,2,2,"ion-select-option",10),s.Pb(),s.Pb(),s.Qb(27,"ion-item"),s.Mb(28,"ion-icon",11),s.Qb(29,"ion-label",5),s.xc(30,"Type of Interactions"),s.Pb(),s.Qb(31,"ion-select",9),s.Yb("ngModelChange",(function(n){return t.annotation.interactions=n})),s.vc(32,b,2,2,"ion-select-option",10),s.Pb(),s.Pb(),s.Qb(33,"ion-item"),s.Mb(34,"ion-icon",12),s.Qb(35,"ion-label",5),s.xc(36,"Significance"),s.Pb(),s.Qb(37,"ion-select",9),s.Yb("ngModelChange",(function(n){return t.annotation.significance=n})),s.vc(38,f,2,2,"ion-select-option",10),s.Pb(),s.Pb(),s.Qb(39,"ion-item",13),s.Qb(40,"ion-button",14),s.Yb("click",(function(){return t.addAnnotation()})),s.Mb(41,"ion-icon",15),s.Qb(42,"ion-label"),s.xc(43,"Add"),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb()),2&n&&(s.zb(15),s.gc("ngModel",t.annotation.plant),s.zb(5),s.gc("ngModel",t.annotation.components),s.zb(5),s.gc("ngModel",t.annotation.study),s.zb(1),s.gc("ngForOf",t.typeOfStudy),s.zb(5),s.gc("ngModel",t.annotation.interactions),s.zb(1),s.gc("ngForOf",t.typeOfInteractions),s.zb(5),s.gc("ngModel",t.annotation.significance),s.zb(1),s.gc("ngForOf",t.significance))},directives:[a.o,a.L,a.K,a.f,a.e,a.p,a.m,a.n,a.z,a.l,a.r,a.s,a.q,a.T,i.d,i.g,a.D,a.S,o.j,a.E],styles:[""]}),d),g=e("VQbp"),m=e("QuQm"),h=e("KJTt"),v=e("2MiI"),P=e("lDzL"),y=e("LmEr");function Q(n,t){if(1&n){var e=s.Rb();s.Qb(0,"ion-item",24),s.Qb(1,"ion-text"),s.xc(2),s.Pb(),s.Qb(3,"ion-buttons",16),s.Qb(4,"ion-button",25),s.Yb("click",(function(){s.oc(e);var n=t.$implicit;return s.ac().deleteAnnotation(n)})),s.Mb(5,"ion-icon",26),s.Qb(6,"ion-label"),s.xc(7,"Delete"),s.Pb(),s.Pb(),s.Pb(),s.Pb()}if(2&n){var o=t.$implicit;s.zb(2),s.Ac("",o.plant," and ",o.components,"")}}function w(n,t){if(1&n&&(s.Qb(0,"span"),s.xc(1),s.Pb()),2&n){var e=s.ac().value;s.zb(1),s.yc(e)}}function M(n,t){if(1&n){var e=s.Rb();s.Qb(0,"span"),s.Qb(1,"ion-button",30),s.Yb("click",(function(){s.oc(e);var n=s.ac().row;return s.ac(2).openInfo(n)})),s.Mb(2,"ion-icon",31),s.Pb(),s.Pb()}}function x(n,t){if(1&n&&(s.vc(0,w,2,1,"span",29),s.vc(1,M,3,0,"span",29)),2&n){var e=s.ac().$implicit;s.gc("ngIf","More Info"!==e.name),s.zb(1),s.gc("ngIf","More Info"===e.name)}}function A(n,t){1&n&&(s.Qb(0,"ngx-datatable-column",27),s.vc(1,x,2,2,"ng-template",28),s.Pb()),2&n&&s.gc("name",t.$implicit.name)("width",200)}function k(n,t){if(1&n&&(s.Qb(0,"span"),s.xc(1),s.Pb()),2&n){var e=s.ac().value;s.zb(1),s.yc(e)}}function I(n,t){if(1&n){var e=s.Rb();s.Qb(0,"span"),s.Qb(1,"ion-button",30),s.Yb("click",(function(){s.oc(e);var n=s.ac().row;return s.ac(2).openInfo(n)})),s.Mb(2,"ion-icon",31),s.Pb(),s.Pb()}}function C(n,t){if(1&n&&(s.vc(0,k,2,1,"span",29),s.vc(1,I,3,0,"span",29)),2&n){var e=s.ac().$implicit;s.gc("ngIf","More Info"!==e.name),s.zb(1),s.gc("ngIf","More Info"===e.name)}}function S(n,t){1&n&&(s.Qb(0,"ngx-datatable-column",27),s.vc(1,C,2,2,"ng-template",28),s.Pb()),2&n&&s.gc("name",t.$implicit.name)("width",200)}var z,O,_,L=[{path:"",component:(z=function(){function n(t,e,o,i,a,r){_classCallCheck(this,n),this.pagePositionService=t,this.annotationService=e,this.modalController=o,this.alertController=i,this.toastController=a,this.route=r,this.pageAtTop=!0,this.page=new m.a,this.rows=new Array,this.page2=new m.a,this.rows2=new Array,this.selected=[],this.columns=[{name:"Plant"},{name:"Components"},{name:"Study"},{name:"Interactions"},{name:"Significance"}],this.page.limit=5,this.page2.limit=5,this.articleId=this.route.snapshot.paramMap.get("article-id")}return _createClass(n,[{key:"ionViewWillEnter",value:function(){}},{key:"ngOnInit",value:function(){this.articleId=this.route.snapshot.paramMap.get("article-id"),console.log(this.articleId),this.innerWidth=window.innerWidth,this.setPage({offset:0}),this.setPage2({offset:0})}},{key:"onResize",value:function(n){this.innerWidth=window.innerWidth}},{key:"onScroll",value:function(n){this.pageAtTop=this.pagePositionService.isPageAtTop(n)}},{key:"setPage",value:function(n){var t=this;this.page.offset=n.offset,this.page.articleId=this.articleId,this.page.approved=!1,this.annotationService.getAnnotationList(this.page).subscribe((function(n){t.page.offset=n.offset,t.page.totalAnnotations=n.total,t.page.totalPage=n.pages,t.rows=n.result.map((function(n){return{_id:n._id,plant:n.plant,components:n.components,study:n.study,interactions:n.interactions,significance:n.significance,comments:n.comments,articleId:n.articles}}))}))}},{key:"setPage2",value:function(n){var t=this;this.page2.offset=n.offset,this.page2.articleId=this.articleId,this.page2.approved=!0,this.annotationService.getAnnotationList(this.page2).subscribe((function(n){console.log(n),t.page2.offset=n.offset,t.page2.totalAnnotations=n.total,t.page2.totalPage=n.pages,t.rows2=n.result.map((function(n){return{_id:n._id,plant:n.plant,components:n.components,study:n.study,interactions:n.interactions,significance:n.significance,comments:n.comments,articleId:n.articles}}))}))}},{key:"onSort",value:function(n){var t=this;this.page.orderBy=n.column.name.toLowerCase(),this.page.isAscending="asc"===n.newValue,this.page.articleId=this.articleId,this.page.approved=!1,this.annotationService.getAnnotationList(this.page).subscribe((function(n){t.page.offset=n.offset,t.page.totalAnnotations=n.total,t.page.totalPage=n.pages,t.rows=n.articles.map((function(n){return{_id:n._id,plant:n.plant,components:n.components,study:n.study,interactions:n.interactions,significance:n.significance,comments:n.comments,articleId:n.articles}}))}))}},{key:"onSort2",value:function(n){var t=this;this.page2.orderBy=n.column.name.toLowerCase(),this.page2.isAscending="asc"===n.newValue,this.page2.articleId=this.articleId,this.page2.approved=!1,this.annotationService.getAnnotationList(this.page2).subscribe((function(n){t.page2.offset=n.offset,t.page2.totalAnnotations=n.total,t.page2.totalPage=n.pages,t.rows2=n.articles.map((function(n){return{_id:n._id,plant:n.plant,components:n.components,study:n.study,interactions:n.interactions,significance:n.significance,comments:n.comments,articleId:n.articles}}))}))}},{key:"onSelect",value:function(n){var t=n.selected;console.log("Select Event",t,this.selected)}},{key:"openInfo",value:function(n){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalController.create({component:g.a,componentProps:{annotation:n}});case 2:return e=t.sent,t.next=5,e.present();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"openAddAnnotationModal",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var t;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.modalController.create({component:p,componentProps:{articleId:this.articleId}});case 2:return t=n.sent,n.next=5,t.present();case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}}),n,this)})))}},{key:"deleteAnnotation",value:function(n){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.alertController.create({cssClass:"my-custom-class",header:"Permenantly delete selected data annotation",message:"Are you sure you want to delete this data annotation? This action cannot be undone.",buttons:[{text:"Cancel",role:"cancel"},{text:"Delete",handler:function(){o.annotationService.deleteAnnotation(n).subscribe((function(){return Object(c.a)(o,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.toastController.create({header:"Delete selected data annotation success!",color:"success",duration:2e3});case 2:n.sent.present();case 3:case"end":return n.stop()}}),n,this)})))}),(function(){return Object(c.a)(o,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.toastController.create({header:"Fail to delete selected data annotation!",color:"danger",duration:2e3});case 2:n.sent.present();case 3:case"end":return n.stop()}}),n,this)})))}))}}]});case 2:return e=t.sent,t.next=5,e.present();case 5:case"end":return t.stop()}}),t,this)})))}}]),n}(),z.\u0275fac=function(n){return new(n||z)(s.Lb(h.a),s.Lb(l.a),s.Lb(a.P),s.Lb(a.a),s.Lb(a.U),s.Lb(r.a))},z.\u0275cmp=s.Fb({type:z,selectors:[["app-data-annotation"]],hostBindings:function(n,t){1&n&&s.Yb("resize",(function(n){return t.onResize(n)}),!1,s.nc)},decls:49,vars:29,consts:[[3,"pageAtTop"],["fixed",""],["slot","start"],["defaultHref","/article-management"],[3,"fullscreen","scrollEvents","ionScroll"],["id","container"],["id","navi"],[1,"circle-1"],["id","infoi"],[1,"ion-no-padding","page-height"],["size","1"],["size","10","size-lg","6"],[1,"home-title"],["size","0","size-md","1"],["size","12","size-md","10"],["lines","none"],["slot","end"],["color","primary","fill","solid",3,"click"],["name","bookmark","slot","start"],["lines","none","color","light",4,"ngFor","ngForOf"],["rowHeight","auto",1,"material",2,"margin-bottom","20vh",3,"rows","columnMode","headerHeight","footerHeight","externalPaging","count","offset","limit","scrollbarH","selected","selectionType","externalSorting","page","select","sort"],[3,"name","width",4,"ngFor","ngForOf"],["rowHeight","auto",1,"material",2,"margin-bottom","20vh",3,"rows","columnMode","headerHeight","footerHeight","externalPaging","count","offset","limit","scrollbarH","externalSorting","page","sort"],[3,"innerWidth"],["lines","none","color","light"],["color","danger","fill","solid",3,"click"],["name","trash","slot","start"],[3,"name","width"],["ngx-datatable-cell-template",""],[4,"ngIf"],["shape","round","fill","clear",3,"click"],["name","information-circle","color","tertiary"]],template:function(n,t){1&n&&(s.Qb(0,"ion-header"),s.Mb(1,"app-header",0),s.Qb(2,"ion-toolbar",1),s.Qb(3,"ion-buttons",2),s.Mb(4,"ion-back-button",3),s.Pb(),s.Pb(),s.Pb(),s.Qb(5,"ion-content",4),s.Yb("ionScroll",(function(n){return t.onScroll(n)})),s.Qb(6,"div",5),s.Qb(7,"div",6),s.Mb(8,"span",7),s.Pb(),s.Qb(9,"div",8),s.Qb(10,"ion-grid",9),s.Qb(11,"ion-row"),s.Mb(12,"ion-col",10),s.Qb(13,"ion-col",11),s.Qb(14,"h1",12),s.xc(15,"My Pending Data Annotation"),s.Pb(),s.Pb(),s.Pb(),s.Qb(16,"ion-row"),s.Mb(17,"ion-col",13),s.Qb(18,"ion-col",14),s.Qb(19,"ion-item",15),s.Qb(20,"ion-buttons",16),s.Qb(21,"ion-button",17),s.Yb("click",(function(){return t.openAddAnnotationModal()})),s.Mb(22,"ion-icon",18),s.Qb(23,"ion-label"),s.xc(24,"Add Annotation"),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Mb(25,"ion-col",13),s.Pb(),s.Qb(26,"ion-row"),s.Mb(27,"ion-col",13),s.Qb(28,"ion-col",14),s.vc(29,Q,8,2,"ion-item",19),s.Pb(),s.Mb(30,"ion-col",13),s.Pb(),s.Qb(31,"ion-row"),s.Mb(32,"ion-col",13),s.Qb(33,"ion-col",14),s.Qb(34,"ngx-datatable",20),s.Yb("page",(function(n){return t.setPage(n)}))("select",(function(n){return t.onSelect(n)}))("sort",(function(n){return t.onSort(n)})),s.vc(35,A,2,2,"ngx-datatable-column",21),s.Pb(),s.Pb(),s.Mb(36,"ion-col",13),s.Pb(),s.Qb(37,"ion-row"),s.Mb(38,"ion-col",10),s.Qb(39,"ion-col",11),s.Qb(40,"h1",12),s.xc(41,"All Approved Data Annotation"),s.Pb(),s.Pb(),s.Pb(),s.Qb(42,"ion-row"),s.Mb(43,"ion-col",13),s.Qb(44,"ion-col",14),s.Qb(45,"ngx-datatable",22),s.Yb("page",(function(n){return t.setPage2(n)}))("sort",(function(n){return t.onSort2(n)})),s.vc(46,S,2,2,"ngx-datatable-column",21),s.Pb(),s.Pb(),s.Mb(47,"ion-col",13),s.Pb(),s.Pb(),s.Mb(48,"app-footer",23),s.Pb(),s.Pb(),s.Pb()),2&n&&(s.zb(1),s.gc("pageAtTop",t.pageAtTop),s.zb(4),s.gc("fullscreen",!0)("scrollEvents",!0),s.zb(24),s.gc("ngForOf",t.selected),s.zb(5),s.gc("rows",t.rows)("columnMode","force")("headerHeight",50)("footerHeight",50)("externalPaging",!0)("count",t.page.totalAnnotations)("offset",t.page.offset)("limit",t.page.limit)("scrollbarH",!0)("selected",t.selected)("selectionType","single")("externalSorting",!0),s.zb(1),s.gc("ngForOf",t.columns),s.zb(10),s.gc("rows",t.rows2)("columnMode","force")("headerHeight",50)("footerHeight",50)("externalPaging",!0)("count",t.page2.totalAnnotations)("offset",t.page2.offset)("limit",t.page2.limit)("scrollbarH",!0)("externalSorting",!0),s.zb(1),s.gc("ngForOf",t.columns),s.zb(2),s.gc("innerWidth",t.innerWidth))},directives:[a.o,v.a,a.L,a.f,a.c,a.d,a.m,a.n,a.z,a.l,a.r,a.e,a.p,a.s,o.j,P.c,y.a,a.I,P.b,P.a,o.k],styles:[""]}),z)}],R=((O=function n(){_classCallCheck(this,n)}).\u0275mod=s.Jb({type:O}),O.\u0275inj=s.Ib({factory:function(n){return new(n||O)},imports:[[r.i.forChild(L)],r.i]}),O),F=e("iWjc"),T=((_=function n(){_classCallCheck(this,n)}).\u0275mod=s.Jb({type:_}),_.\u0275inj=s.Ib({factory:function(n){return new(n||_)},imports:[[o.c,i.a,a.M,R,P.d,F.a]]}),_)}}]);