(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"3zE6":function(t,e,n){"use strict";n.r(e),n.d(e,"AnnotationPublicPageModule",(function(){return S}));var i=n("ofXK"),o=n("3Pt+"),a=n("TEn/"),s=n("tyNb"),c=n("mrSG"),r=n("9/eo"),l=n("VQbp"),d=n("QuQm"),p=n("nKRM"),b=n("fXoL"),h=n("KJTt"),g=n("nF61"),u=n("QY0l"),f=n("Yhfc"),m=n("2MiI"),v=n("lDzL"),y=n("LmEr");function A(t,e){if(1&t&&(b.Rb(0,"ion-row"),b.Nb(1,"ion-col",11),b.Rb(2,"ion-col",19),b.Rb(3,"ion-card"),b.Rb(4,"ion-card-header"),b.Rb(5,"ion-card-title"),b.Ac(6),b.Qb(),b.Rb(7,"ion-card-subtitle"),b.Rb(8,"strong"),b.Ac(9,"DOI"),b.Qb(),b.Ac(10),b.Qb(),b.Qb(),b.Rb(11,"ion-card-content"),b.Nb(12,"p",20),b.Qb(),b.Qb(),b.Qb(),b.Qb()),2&t){const t=b.bc();b.Ab(6),b.Cc(" ",t.articleInfo.title," "),b.Ab(4),b.Cc(" : ",t.articleInfo.doi,""),b.Ab(2),b.ic("innerHTML",t.articleInfo.abstract,b.sc)}}function I(t,e){if(1&t&&b.Nb(0,"span",20),2&t){const t=b.bc().value;b.ic("innerHTML",t,b.sc)}}function w(t,e){if(1&t){const t=b.Sb();b.Rb(0,"span"),b.Rb(1,"ion-button",24),b.Zb("click",(function(){b.rc(t);const e=b.bc().row;return b.bc(2).openInfo(e)})),b.Nb(2,"ion-icon",25),b.Qb(),b.Qb()}}function M(t,e){if(1&t&&(b.yc(0,I,1,1,"span",23),b.yc(1,w,3,0,"span",10)),2&t){const t=b.bc().$implicit;b.ic("ngIf","More Info"!==t.name),b.Ab(1),b.ic("ngIf","More Info"===t.name)}}function R(t,e){1&t&&(b.Rb(0,"ngx-datatable-column",21),b.yc(1,M,2,2,"ng-template",22),b.Qb()),2&t&&b.ic("name",e.$implicit.name)("width",200)}const C=[{path:"",component:(()=>{class t{constructor(t,e,n,i,o,a,s,c){this.pagePositionService=t,this.annotationService=e,this.articleService=n,this.modalController=i,this.alertController=o,this.toastController=a,this.tokenHelper=s,this.route=c,this.pageAtTop=!0,this.isSenior=!1,this.page2=new d.a,this.rows2=new Array,this.selected=[],this.selected2=[],this.columns=[{name:"Product"},{name:"Plant"},{name:"Components"},{name:"Study"},{name:"Interactions"},{name:"Significance"},{name:"status"},{name:"comments"},{name:"More Info"}],this.page2.limit=5,this.articleId=this.route.snapshot.paramMap.get("article-id"),this.isSenior="senior data manager"===this.tokenHelper.getRole()}ionViewWillEnter(){}ngOnInit(){this.articleId=this.route.snapshot.paramMap.get("article-id"),this.innerWidth=window.innerWidth,this.getArticleInfo(),this.setPage2({offset:0})}onResize(t){this.innerWidth=window.innerWidth}onScroll(t){this.pageAtTop=this.pagePositionService.isPageAtTop(t)}getArticleInfo(){this.articleService.getArticleInfoById(this.articleId).subscribe(t=>{this.articleInfo=t.articles[0]})}setPage2(t){this.page2.offset=t.offset,this.page2.articleId=this.articleId,this.page2.approved="approved",this.annotationService.getAnnotationList(this.page2).subscribe(t=>{this.page2.offset=t.offset,this.page2.totalAnnotations=t.total,this.page2.totalPage=t.pages,this.rows2=t.result.map(t=>({_id:t._id,product:t.product,plant:t.plant,components:t.components,study:t.study,interactions:t.interactions,significance:t.significance,comments:t.comments,articleId:t.articles,status:t.approved,descriptions:t.descriptions}))})}onSort2(t){this.page2.orderBy=t.column.name.toLowerCase(),this.page2.isAscending="asc"===t.newValue,this.page2.articleId=this.articleId,this.page2.approved="approved",this.annotationService.getAnnotationList(this.page2).subscribe(t=>{this.page2.offset=t.offset,this.page2.totalAnnotations=t.total,this.page2.totalPage=t.pages,this.rows2=t.articles.map(t=>({_id:t._id,product:t.product,plant:t.plant,components:t.components,study:t.study,interactions:t.interactions,significance:t.significance,comments:t.comments,articleId:t.articles,descriptions:t.descriptions}))})}onSelect({}){}onSelect2({}){}openInfo(t){return Object(c.a)(this,void 0,void 0,(function*(){const e=yield this.modalController.create({cssClass:"custom-lg-modal",component:l.a,componentProps:{annotation:t}});return yield e.present()}))}openAddAnnotationModal(){return Object(c.a)(this,void 0,void 0,(function*(){const t=yield this.modalController.create({cssClass:"custom-lg-modal",component:r.a,componentProps:{articleId:this.articleId}});yield t.present(),yield t.onWillDismiss().then(()=>{this.ngOnInit()})}))}editAnnotation(t){return Object(c.a)(this,void 0,void 0,(function*(){const e=yield this.modalController.create({cssClass:"custom-lg-modal",component:p.a,componentProps:{annotation:t}});yield e.present(),yield e.onWillDismiss().then(()=>{this.ngOnInit()})}))}deleteAnnotation(t){return Object(c.a)(this,void 0,void 0,(function*(){const e=yield this.alertController.create({cssClass:"my-custom-class",header:"Permenantly delete",subHeader:"Are you sure you want to delete this annotation?",message:""+t.plant,buttons:[{text:"Cancel",role:"cancel"},{text:"Delete",handler:()=>{this.annotationService.deleteAnnotation(t).subscribe(()=>Object(c.a)(this,void 0,void 0,(function*(){(yield this.toastController.create({header:"Delete selected data annotation success!",color:"success",duration:2e3})).present(),this.ngOnInit()})),()=>Object(c.a)(this,void 0,void 0,(function*(){(yield this.toastController.create({header:"Fail to delete selected data annotation!",color:"danger",duration:2e3})).present(),this.ngOnInit()})))}}]});yield e.present()}))}}return t.\u0275fac=function(e){return new(e||t)(b.Mb(h.a),b.Mb(g.a),b.Mb(u.a),b.Mb(a.R),b.Mb(a.a),b.Mb(a.Y),b.Mb(f.a),b.Mb(s.a))},t.\u0275cmp=b.Gb({type:t,selectors:[["app-annotation-public"]],hostBindings:function(t,e){1&t&&b.Zb("resize",(function(t){return e.onResize(t)}),!1,b.qc)},decls:24,vars:18,consts:[[3,"pageAtTop"],["fixed",""],["slot","start"],["defaultHref","/search"],[3,"fullscreen","scrollEvents","ionScroll"],["id","container"],["id","navi"],[1,"circle-1"],["id","infoi"],[1,"ion-no-padding","page-height"],[4,"ngIf"],["size","1"],["size","10","size-lg","6"],[1,"home-title"],["size","0","size-md","1"],["size","12","size-md","10"],["rowHeight","auto",1,"material",2,"margin-bottom","20vh",3,"rows","columnMode","headerHeight","footerHeight","externalPaging","count","offset","limit","scrollbarH","selected","selectionType","externalSorting","page","select","sort"],[3,"name","width",4,"ngFor","ngForOf"],[3,"innerWidth"],["size","10"],[3,"innerHTML"],[3,"name","width"],["ngx-datatable-cell-template",""],[3,"innerHTML",4,"ngIf"],["shape","round","fill","clear",3,"click"],["name","information-circle","color","tertiary"]],template:function(t,e){1&t&&(b.Rb(0,"ion-header"),b.Nb(1,"app-header",0),b.Rb(2,"ion-toolbar",1),b.Rb(3,"ion-buttons",2),b.Nb(4,"ion-back-button",3),b.Qb(),b.Qb(),b.Qb(),b.Rb(5,"ion-content",4),b.Zb("ionScroll",(function(t){return e.onScroll(t)})),b.Rb(6,"div",5),b.Rb(7,"div",6),b.Nb(8,"span",7),b.Qb(),b.Rb(9,"div",8),b.Rb(10,"ion-grid",9),b.yc(11,A,13,3,"ion-row",10),b.Rb(12,"ion-row"),b.Nb(13,"ion-col",11),b.Rb(14,"ion-col",12),b.Rb(15,"h1",13),b.Ac(16,"Data Annotation"),b.Qb(),b.Qb(),b.Qb(),b.Rb(17,"ion-row"),b.Nb(18,"ion-col",14),b.Rb(19,"ion-col",15),b.Rb(20,"ngx-datatable",16),b.Zb("page",(function(t){return e.setPage2(t)}))("select",(function(t){return e.onSelect2(t)}))("sort",(function(t){return e.onSort2(t)})),b.yc(21,R,2,2,"ngx-datatable-column",17),b.Qb(),b.Qb(),b.Nb(22,"ion-col",14),b.Qb(),b.Qb(),b.Nb(23,"app-footer",18),b.Qb(),b.Qb(),b.Qb()),2&t&&(b.Ab(1),b.ic("pageAtTop",e.pageAtTop),b.Ab(4),b.ic("fullscreen",!0)("scrollEvents",!0),b.Ab(6),b.ic("ngIf",e.articleInfo),b.Ab(9),b.ic("rows",e.rows2)("columnMode","force")("headerHeight",50)("footerHeight",50)("externalPaging",!0)("count",e.page2.totalAnnotations)("offset",e.page2.offset)("limit",e.page2.limit)("scrollbarH",!0)("selected",e.selected2)("selectionType","single")("externalSorting",!0),b.Ab(1),b.ic("ngForOf",e.columns),b.Ab(2),b.ic("innerWidth",e.innerWidth))},directives:[a.q,m.a,a.N,a.f,a.c,a.d,a.n,a.p,i.l,a.C,a.m,v.c,i.k,y.a,a.g,a.i,a.k,a.j,a.h,v.b,v.a,a.e,a.r],styles:[".circle-1[_ngcontent-%COMP%]{right:-434px;top:-554px;height:868px;width:868px}.circle-1[_ngcontent-%COMP%], .circle-2[_ngcontent-%COMP%]{position:absolute;background-color:#bbb;border-radius:50%;display:inline-block;background:#6078ea;background:linear-gradient(201deg,#6078ea,#17ead9)}.circle-2[_ngcontent-%COMP%]{left:-200px;top:1200px;height:500px;width:500px}#container[_ngcontent-%COMP%]{position:relative}#infoi[_ngcontent-%COMP%], #navi[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;top:0;left:0}#infoi[_ngcontent-%COMP%]{z-index:1}.page-height[_ngcontent-%COMP%]{min-height:100vh}"]}),t})()}];let Q=(()=>{class t{}return t.\u0275mod=b.Kb({type:t}),t.\u0275inj=b.Jb({factory:function(e){return new(e||t)},imports:[[s.i.forChild(C)],s.i]}),t})();var P=n("iWjc");let S=(()=>{class t{}return t.\u0275mod=b.Kb({type:t}),t.\u0275inj=b.Jb({factory:function(e){return new(e||t)},imports:[[i.c,o.a,a.O,Q,v.d,P.a]]}),t})()}}]);