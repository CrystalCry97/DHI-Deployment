function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{yQt4:function(e,t,i){"use strict";i.r(t),i.d(t,"SearchPageModule",(function(){return P}));var n=i("ofXK"),o=i("3Pt+"),a=i("TEn/"),r=i("tyNb"),c=i("mrSG"),s=i("dfks"),l=i("Buy9"),b=i("fXoL"),g=i("KJTt"),h=i("QY0l"),p=i("2MiI"),u=i("lDzL"),f=i("LmEr");function d(e,t){if(1&e&&b.Nb(0,"span",44),2&e){var i=b.bc().value;b.ic("innerHTML",i,b.sc)}}function m(e,t){if(1&e){var i=b.Sb();b.Rb(0,"span",45),b.Zb("click",(function(){b.rc(i);var e=b.bc().row;return b.bc(2).navigateToArticle(e.link)})),b.Ac(1),b.Qb()}if(2&e){var n=b.bc().value;b.ic("innerHTML",n,b.sc),b.Ab(1),b.Cc(" ",n," ")}}function v(e,t){if(1&e){var i=b.Sb();b.Rb(0,"span"),b.Rb(1,"ion-button",46),b.Zb("click",(function(){b.rc(i);var e=b.bc().row;return b.bc(2).openAbstract(e)})),b.Nb(2,"ion-icon",47),b.Qb(),b.Qb()}}function y(e,t){if(1&e&&(b.yc(0,d,1,1,"span",41),b.yc(1,m,2,2,"span",42),b.yc(2,v,3,0,"span",43)),2&e){var i=b.bc().$implicit;b.ic("ngIf","Actions"!==i.name&&"Title"!==i.name),b.Ab(1),b.ic("ngIf","Actions"!==i.name&&"Title"===i.name),b.Ab(1),b.ic("ngIf","Actions"===i.name)}}function R(e,t){1&e&&(b.Rb(0,"ngx-datatable-column",39),b.yc(1,y,3,3,"ng-template",40),b.Qb()),2&e&&b.ic("name",t.$implicit.name)("width",200)}var Q,w,A,x=[{path:"",component:(Q=function(){function e(t,i,n,o){_classCallCheck(this,e),this.pagePositionService=t,this.articleService=i,this.modalController=n,this.loadingController=o,this.pageAtTop=!0,this.page=new s.a,this.rows=new Array,this.selected=[],this.searchText="",this.columns=[{name:"Title"},{name:"Category"},{name:"Year"},{name:"Actions"}],this.page.limit=10}return _createClass(e,[{key:"ngOnInit",value:function(){this.innerWidth=window.innerWidth}},{key:"onResize",value:function(e){this.innerWidth=window.innerWidth}},{key:"onScroll",value:function(e){this.pageAtTop=this.pagePositionService.isPageAtTop(e)}},{key:"highlightFilter",value:function(e,t){var i=e;try{if(e&&t&&void 0!==typeof e&&void 0!==typeof t&&(e=e.toString().trim(),(t=t.toString().trim()).length>0)){var n=(t=t.replace(",","")).replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");n=n.split(" ").filter((function(e){return e.length>0})).join("|");var o=new RegExp(n,"gi");e=e.replace(o,(function(e){return"<b>".concat(e,"</b>")}))}}catch(a){return console.error(a),i}return e}},{key:"setPage",value:function(e){var t=this;this.presentLoading(),this.page.offset=e.offset,this.articleService.getArticleList(this.page).subscribe((function(e){t.stopLoading(),t.page.offset=e.offset,t.page.totalArticles=e.totalArticles,t.page.totalPage=e.totalPage,t.rows=e.articles.map((function(e){return{_id:e._id,title:t.highlightFilter(e.title,t.searchText),category:e.category,year:e.year,abstract:e.abstract,link:e.link,doi:e.doi}}))}),(function(){t.stopLoading()}))}},{key:"search",value:function(e){var t=this;this.presentLoading();var i=e?e.target.value:this.searchText;this.page.offset=0,"title"===this.page.searchBy?(this.page.textSearch=!1,this.page.title=i,this.page.category="",this.page.year="",this.page.abstract=""):"category"===this.page.searchBy?(this.page.textSearch=!1,this.page.title="",this.page.category=i,this.page.year="",this.page.abstract=""):"year"===this.page.searchBy?(this.page.textSearch=!1,this.page.title="",this.page.category="",this.page.year=i,this.page.abstract=""):"abstract"===this.page.searchBy?(this.page.textSearch=!1,this.page.title="",this.page.category="",this.page.year="",this.page.abstract=i):"text"===this.page.searchBy&&(this.page.textSearch=!0,this.page.title=i,this.page.category="",this.page.year="",this.page.abstract=""),this.articleService.getArticleList(this.page).subscribe((function(e){t.stopLoading(),t.page.offset=e.offset,t.page.totalArticles=e.totalArticles,t.page.totalPage=e.totalPage,t.rows=e.articles.map((function(e){return{_id:e._id,title:t.highlightFilter(e.title,t.searchText),category:e.category,year:e.year,abstract:e.abstract,link:e.link,doi:e.doi}}))}),(function(){t.stopLoading()}))}},{key:"presentLoading",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadingController.create({cssClass:"my-custom-class",message:"Searching articles..."});case 2:return t=e.sent,e.next=5,t.present();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"stopLoading",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.loadingController.dismiss();case 1:case"end":return e.stop()}}),e,this)})))}},{key:"onSort",value:function(e){var t=this;this.page.orderBy=e.column.name.toLowerCase(),this.page.isAscending="asc"===e.newValue,this.articleService.getArticleList(this.page).subscribe((function(e){t.page.offset=e.offset,t.page.totalArticles=e.totalArticles,t.page.totalPage=e.totalPage,t.rows=e.articles.map((function(e){return{_id:e._id,title:t.highlightFilter(e.title,t.searchText),category:e.category,year:e.year,abstract:e.abstract,link:e.link,doi:e.doi}}))}))}},{key:"openAbstract",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalController.create({cssClass:"custom-lg-modal ",component:l.a,componentProps:{article:e,searchKey:this.searchText}});case 2:return i=t.sent,t.next=5,i.present();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})))}},{key:"navigateToArticle",value:function(e){window.open(e)}},{key:"changeResultPerPage",value:function(e){this.page.limit=e.detail.value,this.search(!1)}}]),e}(),Q.\u0275fac=function(e){return new(e||Q)(b.Mb(g.a),b.Mb(h.a),b.Mb(a.R),b.Mb(a.Q))},Q.\u0275cmp=b.Gb({type:Q,selectors:[["app-search"]],hostBindings:function(e,t){1&e&&b.Zb("resize",(function(e){return t.onResize(e)}),!1,b.qc)},decls:80,vars:18,consts:[[3,"pageAtTop"],[3,"fullscreen","scrollEvents","ionScroll"],["id","container"],["id","navi"],[1,"circle-1"],["id","infoi"],[1,"ion-no-padding","page-height","ion-margin"],["size","1"],["size","10","size-lg","6"],[1,"home-title"],[1,"home-subtitle"],["size","0","size-md","1"],["size","10","size-md","9"],["id","sbar","showCancelButton","never","animated","","placeholder","Enter your search",3,"ngModel","keyup.enter","ngModelChange"],["size","2","size-md","2"],["color","primary","fill","solid",2,"margin-top","10px",3,"click"],["name","search-outline"],[3,"ngModel","ngModelChange"],[2,"margin-left","7vw","margin-right","7vw"],["lines","none","color","none"],["slot","start","mode","md","item-left","","value","text"],["slot","start","mode","md","item-left","","value","title"],["slot","start","mode","md","item-left","","value","category"],["slot","start","mode","md","item-left","","value","year"],["slot","start","mode","md","item-left","","value","abstract"],[2,"margin","5px 5px"],["size","5","size-md","7"],["lines","none"],[2,"font-size","12px","color","grey"],["size","7","size-md","3"],["interface","popover","value","10",2,"font-size","12px","color","grey",3,"ionChange"],["value","10"],["value","25"],["value","50"],["value","100"],["size","12","size-md","10"],["rowHeight","auto",1,"material",2,"margin-bottom","20vh",3,"rows","columnMode","headerHeight","footerHeight","externalPaging","count","offset","limit","scrollbarH","externalSorting","page","sort"],[3,"name","width",4,"ngFor","ngForOf"],[3,"innerWidth"],[3,"name","width"],["ngx-datatable-cell-template",""],[3,"innerHTML",4,"ngIf"],["class","article-title","src","#",3,"innerHTML","click",4,"ngIf"],[4,"ngIf"],[3,"innerHTML"],["src","#",1,"article-title",3,"innerHTML","click"],["shape","round","fill","clear",3,"click"],["name","information-circle","color","tertiary"]],template:function(e,t){1&e&&(b.Rb(0,"ion-header"),b.Nb(1,"app-header",0),b.Qb(),b.Rb(2,"ion-content",1),b.Zb("ionScroll",(function(e){return t.onScroll(e)})),b.Rb(3,"div",2),b.Rb(4,"div",3),b.Nb(5,"span",4),b.Qb(),b.Rb(6,"div",5),b.Rb(7,"ion-grid",6),b.Rb(8,"ion-row"),b.Nb(9,"ion-col",7),b.Rb(10,"ion-col",8),b.Rb(11,"h1",9),b.Ac(12,"Search"),b.Qb(),b.Rb(13,"p",10),b.Ac(14,"Let's start searching!"),b.Qb(),b.Qb(),b.Qb(),b.Rb(15,"ion-row"),b.Nb(16,"ion-col",11),b.Rb(17,"ion-col",12),b.Rb(18,"ion-searchbar",13),b.Zb("keyup.enter",(function(e){return t.search(e)}))("ngModelChange",(function(e){return t.searchText=e})),b.Qb(),b.Qb(),b.Rb(19,"ion-col",14),b.Rb(20,"ion-button",15),b.Zb("click",(function(){return t.search(!1)})),b.Nb(21,"ion-icon",16),b.Qb(),b.Qb(),b.Qb(),b.Rb(22,"ion-radio-group",17),b.Zb("ngModelChange",(function(e){return t.page.searchBy=e})),b.Rb(23,"ion-grid",18),b.Rb(24,"ion-row"),b.Rb(25,"ion-col"),b.Rb(26,"ion-item",19),b.Rb(27,"ion-label"),b.Ac(28,"Search by:"),b.Qb(),b.Qb(),b.Qb(),b.Rb(29,"ion-col"),b.Rb(30,"ion-item",19),b.Rb(31,"ion-label"),b.Ac(32,"Text"),b.Qb(),b.Nb(33,"ion-radio",20),b.Qb(),b.Qb(),b.Rb(34,"ion-col"),b.Rb(35,"ion-item",19),b.Rb(36,"ion-label"),b.Ac(37,"Title"),b.Qb(),b.Nb(38,"ion-radio",21),b.Qb(),b.Qb(),b.Rb(39,"ion-col"),b.Rb(40,"ion-item",19),b.Rb(41,"ion-label"),b.Ac(42,"Category"),b.Qb(),b.Nb(43,"ion-radio",22),b.Qb(),b.Qb(),b.Rb(44,"ion-col"),b.Rb(45,"ion-item",19),b.Rb(46,"ion-label"),b.Ac(47,"Year"),b.Qb(),b.Nb(48,"ion-radio",23),b.Qb(),b.Qb(),b.Rb(49,"ion-col"),b.Rb(50,"ion-item",19),b.Rb(51,"ion-label"),b.Ac(52,"Abstract"),b.Qb(),b.Nb(53,"ion-radio",24),b.Qb(),b.Qb(),b.Qb(),b.Qb(),b.Qb(),b.Rb(54,"ion-row",25),b.Nb(55,"ion-col",11),b.Rb(56,"ion-col",26),b.Rb(57,"ion-item",27),b.Rb(58,"ion-label",28),b.Ac(59),b.Qb(),b.Qb(),b.Qb(),b.Rb(60,"ion-col",29),b.Rb(61,"ion-item",27),b.Rb(62,"ion-label",28),b.Ac(63,"Results per Page"),b.Qb(),b.Rb(64,"ion-select",30),b.Zb("ionChange",(function(e){return t.changeResultPerPage(e)})),b.Rb(65,"ion-select-option",31),b.Ac(66,"10"),b.Qb(),b.Rb(67,"ion-select-option",32),b.Ac(68,"25"),b.Qb(),b.Rb(69,"ion-select-option",33),b.Ac(70,"50"),b.Qb(),b.Rb(71,"ion-select-option",34),b.Ac(72,"100"),b.Qb(),b.Qb(),b.Qb(),b.Qb(),b.Qb(),b.Rb(73,"ion-row"),b.Nb(74,"ion-col",11),b.Rb(75,"ion-col",35),b.Rb(76,"ngx-datatable",36),b.Zb("page",(function(e){return t.setPage(e)}))("sort",(function(e){return t.onSort(e)})),b.yc(77,R,2,2,"ngx-datatable-column",37),b.Qb(),b.Qb(),b.Nb(78,"ion-col",11),b.Qb(),b.Qb(),b.Nb(79,"app-footer",38),b.Qb(),b.Qb(),b.Qb()),2&e&&(b.Ab(1),b.ic("pageAtTop",t.pageAtTop),b.Ab(1),b.ic("fullscreen",!0)("scrollEvents",!0),b.Ab(16),b.ic("ngModel",t.searchText),b.Ab(4),b.ic("ngModel",t.page.searchBy),b.Ab(37),b.Cc("",t.page.totalArticles," total"),b.Ab(17),b.ic("rows",t.rows)("columnMode","force")("headerHeight",50)("footerHeight",50)("externalPaging",!0)("count",t.page.totalArticles)("offset",t.page.offset)("limit",t.page.limit)("scrollbarH",!0)("externalSorting",!0),b.Ab(1),b.ic("ngForOf",t.columns),b.Ab(2),b.ic("innerWidth",t.innerWidth))},directives:[a.q,p.a,a.n,a.p,a.C,a.m,a.D,a.X,o.e,o.h,a.e,a.r,a.A,a.W,a.t,a.u,a.z,a.U,a.E,a.F,u.c,n.k,f.a,u.b,u.a,n.l],styles:[".circle-1[_ngcontent-%COMP%]{right:-434px;top:-554px;height:868px;width:868px}.circle-1[_ngcontent-%COMP%], .circle-2[_ngcontent-%COMP%]{position:absolute;background-color:#bbb;border-radius:50%;display:inline-block;background:#6078ea;background:linear-gradient(201deg,#6078ea,#17ead9)}.circle-2[_ngcontent-%COMP%]{left:-200px;top:1200px;height:500px;width:500px}#container[_ngcontent-%COMP%]{position:relative}#infoi[_ngcontent-%COMP%], #navi[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;top:0;left:0}#infoi[_ngcontent-%COMP%]{z-index:1}.page-height[_ngcontent-%COMP%]{min-height:100vh}.home-title[_ngcontent-%COMP%]{font-size:4rem;white-space:pre-wrap;margin-top:50px}.home-subtitle[_ngcontent-%COMP%]{font-size:1.5rem!important}.article-title[_ngcontent-%COMP%]{cursor:pointer}.article-title[_ngcontent-%COMP%]:hover{text-decoration:underline}"]}),Q)}],C=((w=function e(){_classCallCheck(this,e)}).\u0275mod=b.Kb({type:w}),w.\u0275inj=b.Jb({factory:function(e){return new(e||w)},imports:[[r.i.forChild(x)],r.i]}),w),k=i("iWjc"),P=((A=function e(){_classCallCheck(this,e)}).\u0275mod=b.Kb({type:A}),A.\u0275inj=b.Jb({factory:function(e){return new(e||A)},providers:[],imports:[[n.c,o.a,a.O,C,u.d,k.a]]}),A)}}]);